import{B as A}from"./Button.68c82513.js";import{A as E}from"./App.8e677174.js";import{r as a,b as O,a as t,j as e,H as C,F as v}from"./app.9754158e.js";import{A as z}from"./AddModal.ef273970.js";import{E as H}from"./EditModal.83853bff.js";import{D as M}from"./DestroyModal.fa0f0e16.js";import{C as $,E as F}from"./EditRevision.30c0f625.js";import{I as K}from"./InfoModal.9b500176.js";import"./clsx.m.256e9345.js";import"./DropdownMenu.782c60d3.js";import"./transition.76171a97.js";import"./use-event-listener.78904c41.js";import"./index_responsive.e5b2f6cd.js";import"./Tawarin.08057ae7.js";import"./Aside.345123d9.js";import"./dialog.ab9b7aa1.js";import"./description.1a9caf04.js";import"./ExclamationIcon.e74d6cdb.js";function B({plan:m,dataplan:c,plan_master:T,plan_details:y,datarevisionresult:p,datadescriptionrevisionresult:u}){const w=s=>{o(s),r(!0)},k=s=>{o(s),n(!0)},[N,f]=a.exports.useState(!1),j=s=>{o(s),f(!0)},{data:_,setData:U,put:D,clearErrors:V,reset:S,errors:L}=O({}),I=s=>{s.preventDefault(),D(route("planresult.finish",i.result_id),{data:_,onSuccess:()=>{S(),n(!1)}})},[h,r]=a.exports.useState(!1),[x,b]=a.exports.useState(!1),[R,n]=a.exports.useState(!1),[i,o]=a.exports.useState([]);return t("div",{children:[e(C,{title:"Upload Hasil"}),e(z,{isOpenAddDialog:h,setIsOpenAddDialog:r,size:"2xl",title:"Revisi "+i.name,children:e($,{isOpenAddDialog:h,setIsOpenAddDialog:r,result:i.result_id})}),e(H,{isOpenEditDialog:x,setIsOpenEditDialog:b,size:"2xl",title:"Edit User",children:e(F,{model:i,isOpenEditDialog:x,setIsOpenEditDialog:b})}),e(M,{isOpenDestroyDialog:R,setIsOpenDestroyDialog:n,size:"2xl",title:"Tidak ada revisi untuk "+i.name+" ?",children:e(A,{onClick:I,children:"Selesai"})}),t(K,{isOpenInfoDialog:N,setIsOpenInfoDialog:f,size:"6xl",title:"Hasil Revisi Ke-"+i.jumlah_pengajuan_revisi+" dari "+i.name,header:"",children:[u[i.revision_id]?e("div",{className:"mt-1",children:e("textarea",{rows:3,className:"block w-full mt-1 border border-gray-300 rounded-md shadow-sm focus:ring-sky-500 focus:border-sky-500 sm:text-sm",placeholder:"",disabled:!0,defaultValue:u[i.revision_id]})}):"",p[i.revision_id]?e(v,{children:e("div",{className:"relative flex justify-center px-6 pt-5 pb-6 mt-1 overflow-hidden border-2 border-gray-300 border-dashed rounded-md",children:e("div",{className:"w-full text-center",children:p[i.revision_id].map((s,l)=>e("div",{className:" shadow overflow-hidden rounded-xl col-span-3 max-h-[14rem]",children:e("img",{className:"object-cover w-full h-full ",src:`/storage/${s.id}/${s.file_name}`,alt:l})},{state:i}))})})}):""]}),e("div",{className:"bg-white",children:e("div",{className:"grid items-start max-w-2xl grid-cols-1 px-4 py-4 mx-auto gap-y-8 gap-x-8 sm:px-6 sm:py-16 lg:max-w-7xl lg:grid-cols-2 lg:px-8",children:y.map((s,l)=>e(v,{children:c[s.slug]?e("div",{className:"mt-5 ",children:e("div",{className:"bg-white ",children:e("div",{children:e("div",{className:"mt-5 md:mt-0",children:e("div",{className:"shadow sm:rounded-md sm:overflow-hidden",children:e("div",{className:"px-4 py-5 space-y-6 bg-white sm:p-6",children:t("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700",children:s.name}),e("div",{className:"py-3 sm:flex sm:flex-row-reverse",children:e("button",{onClick:()=>j(s),type:"submit",className:"inline-flex items-center justify-center w-full px-4 py-2 text-sm font-medium text-pink-900 transition duration-150 ease-in-out bg-pink-100 border border-transparent rounded-md hover:bg-pink-200 active:bg-pink-300 sm:ml-3 sm:w-auto sm:text-sm",tabIndex:0,children:"Lihat Revisi"})}),t("div",{className:"relative flex justify-center px-6 pt-5 pb-6 mt-1 overflow-hidden border-2 border-gray-300 border-dashed rounded-md",children:[s.is_finish==1&&e("div",{className:"absolute top-0 right-0 w-16 h-16",children:e("div",{className:"absolute right-[-44px] top-[22px] w-[170px] transform rotate-45 bg-sky-100 text-center text-sky-900 font-semibold py-1",children:"Selesai"})}),e("div",{className:"w-full text-center",children:c[s.slug].map((d,g)=>g==0&&e("div",{className:" shadow overflow-hidden rounded-xl col-span-3 max-h-[14rem]",children:e("img",{className:"object-cover w-full h-full ",src:`/storage/${d.id}/${d.file_name}`,alt:g})},d.id))})]}),e("div",{className:"mt-1",children:e("textarea",{rows:3,className:"block w-full mt-1 border border-gray-300 rounded-md shadow-sm focus:ring-sky-500 focus:border-sky-500 sm:text-sm",placeholder:"",disabled:!0,defaultValue:"Ini adalah hasil "+s.name+" dari konsultan"})}),s.is_finish==1&&s.jumlah_pengajuan_revisi==0?e("div",{className:"py-3 sm:flex sm:flex-row-reverse",children:e("button",{type:"button",className:"inline-flex items-center justify-center w-full px-4 py-2 text-sm font-medium transition duration-150 ease-in-out border border-transparent rounded-md text-sky-900 bg-sky-100 hover:bg-sky-200 active:bg-sky-300 sm:ml-3 sm:w-auto sm:text-sm",children:"Tidak Ada Revisi"})}):"",s.is_finish==1&&s.jumlah_pengajuan_revisi>0?e("div",{className:"py-3 sm:flex sm:flex-row-reverse",children:e("button",{type:"button",className:"inline-flex items-center justify-center w-full px-4 py-2 text-sm font-medium transition duration-150 ease-in-out border border-transparent rounded-md text-sky-900 bg-sky-100 hover:bg-sky-200 active:bg-sky-300 sm:ml-3 sm:w-auto sm:text-sm",children:"Revisi Selesai"})}):"",s.is_finish==0&&s.jumlah_pengajuan_revisi>=s.jumlah_revisi?e("div",{className:"py-3 sm:flex sm:flex-row-reverse",children:t("button",{type:"button",className:"inline-flex items-center justify-center w-full px-4 py-2 text-sm font-medium transition duration-150 ease-in-out border border-transparent rounded-md text-sky-900 bg-sky-100 hover:bg-sky-200 active:bg-sky-300 sm:ml-3 sm:w-auto sm:text-sm",children:["Pengajuan Revisi Sudah"," ",s.jumlah_pengajuan_revisi," ","Kali"]})}):"",s.is_finish==0&&s.jumlah_pengajuan_revisi<s.jumlah_revisi?t("div",{className:"py-3 sm:flex sm:flex-row-reverse",children:[t("button",{onClick:()=>w(s),type:"submit",className:"inline-flex items-center justify-center w-full px-4 py-2 text-sm font-medium text-pink-900 transition duration-150 ease-in-out bg-pink-100 border border-transparent rounded-md hover:bg-pink-200 active:bg-pink-300 sm:ml-3 sm:w-auto sm:text-sm",tabIndex:0,children:["Ajukan Revisi Ke-",s.jumlah_pengajuan_revisi+1]}),t("button",{onClick:()=>k(s),type:"button",name:s.slug,id:s.slug,className:"inline-flex justify-center w-full px-4 py-2 mt-3 text-base font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:["Selesai"," ",s.name]})]}):""]})})})})})})},l):""}))})})]})}B.layout=m=>e(E,{children:m});export{B as default};
