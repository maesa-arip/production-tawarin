import{a as e,r as s,j as a,u as F,l as v,d as L,H as T,L as N}from"./app.4af0c67f.js";import{m as u,e as A,A as E}from"./App.58bc75fc.js";import{C as H}from"./Container.3ad52d91.js";import{H as I}from"./Header.6d180062.js";import{P as z}from"./Pagination.928f2d15.js";import{n as f}from"./helper.e37a4314.js";import{N as p}from"./XIcon.86d45e7a.js";import{E as R}from"./EmptyCard.c6b1d086.js";import{E as W}from"./ExclamationIcon.0da48070.js";import{W as x}from"./transition.9cc07eaa.js";import"./clsx.m.256e9345.js";import"./Tawarin.08057ae7.js";function $({title:i,children:o,header:c,isOpenInfoDialog:m,setIsOpenInfoDialog:d,size:n="6xl"}){return e("div",{children:e(x,{appear:!0,show:m,as:s.exports.Fragment,children:a(u,{as:"div",className:"relative z-10",open:m,onClose:()=>d(!1),children:[e(x.Child,{as:s.exports.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),e("div",{className:"fixed inset-0 overflow-y-auto",children:e("div",{className:"flex items-center justify-center min-h-full p-4 text-center",children:e(x.Child,{as:s.exports.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:a(u.Panel,{className:`relative bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:max-w-lg sm:w-full max-w-${n}`,children:[e("div",{className:"px-4 pt-5 pb-4 bg-white sm:p-6 sm:pb-4",children:a("div",{className:"sm:flex sm:items-start",children:[e("div",{className:"flex items-center justify-center flex-shrink-0 w-12 h-12 mx-auto bg-red-100 rounded-full sm:mx-0 sm:h-10 sm:w-10",children:e(W,{className:"w-6 h-6 text-yellow-600","aria-hidden":"true"})}),a("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[e(u.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900",children:i}),a("div",{className:"mt-2",children:[e("p",{className:"text-sm text-gray-500",children:c}),o]})]})]})}),e("div",{className:"px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:e("button",{type:"button",className:"inline-flex justify-center w-full px-4 py-2 mt-3 text-base font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",onClick:()=>d(!1),children:"Close"})})]})})})})]})})})}function q(i){const{data:o,meta:c,links:m,filtered:d,attributes:n}=i.plans,[w,j]=s.exports.useState([]),[l,k]=s.exports.useState(d),{permissions:g}=F().props,b=g?g.map(t=>t.name):"null",_=s.exports.useCallback(v.exports.debounce(t=>{L.Inertia.get(route("plan.list"),{...v.exports.pickBy(t),page:t.page},{preserveState:!0,preserveScroll:!0})},150),[]);s.exports.useEffect(()=>_(l),[l]),s.exports.useEffect(()=>{let t=[];for(let r=n.per_page;r<n.total/n.per_page;r=r+n.per_page)t.push(r);j(t)},[]);const h=t=>k({...l,[t.target.name]:t.target.value}),[P,y]=s.exports.useState(!1),[B,C]=s.exports.useState([]),S=()=>{C(),y(!0)};return a("div",{children:[e(T,{title:"Plans"}),e(I,{title:"Perencanaan",description:"List perencanaan yang ada di Tawarin."}),e($,{isOpenInfoDialog:P,setIsOpenInfoDialog:y,size:"2xl",title:"Info",header:"",children:"Anda harus memiliki akun owner terlebih dahulu sebelum bisa membuat perencanaan"}),a(H,{children:[a("div",{className:"flex items-center justify-end",children:[e("div",{className:"w-2/3",children:a("div",{className:"flex items-center justify-start gap-x-2",children:[b.indexOf("membuat perencanaan")>-1?a("div",{className:"flex items-center justify-start gap-x-2",children:[e(p,{type:"button",className:"justify-start px-4 py-2 text-sm font-medium text-blue-900 bg-blue-100 border border-transparent rounded-md hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",href:"/plans/create",children:"Tambah"}),e(p,{type:"button",className:"justify-start px-4 py-2 text-sm font-medium text-blue-900 bg-blue-100 border border-transparent rounded-md hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",href:route("plans.index"),children:"Perencanaan Saya"})]}):e("button",{className:"justify-start px-4 py-2 text-sm font-medium text-blue-900 bg-blue-100 border border-transparent rounded-md hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",onClick:()=>S(),children:"Tambah"}),b.indexOf("melakukan penawaran perencanaan")>-1?e(p,{type:"button",className:"justify-start px-4 py-2 text-sm font-medium text-blue-900 bg-blue-100 border border-transparent rounded-md hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",href:"/planbids",children:"Penawaran Saya"}):""]})}),e("div",{className:"w-1/3",children:a("div",{className:"flex items-center justify-end gap-x-2",children:[e("select",{name:"load",id:"load",onChange:h,value:l.load,className:"hidden transition duration-150 ease-in-out border-gray-300 rounded-lg md:flex focus:ring-blue-200 focus:ring form-select",children:w.map((t,r)=>e("option",{children:t},r))}),a("div",{className:"flex items-center px-2 transition duration-150 ease-in-out bg-white border border-gray-300 rounded-lg gap-x-2 focus-within:border-blue-400 focus-within:ring-blue-200 focus-within:ring",children:[e("svg",{className:"inline w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e("input",{type:"text",name:"q",id:"q",onChange:h,value:l.q,className:"w-full border-0 focus:ring-0 form-text"})]})]})})]}),o.length?e("div",{className:"grid w-full grid-cols-2 gap-1 mt-4 md:gap-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4",children:o.map((t,r)=>e("div",{className:"relative w-full pb-4 mx-auto",children:e(N,{href:`/public/plans/${t.slug}`,className:"relative inline-block w-full transition-transform duration-300 ease-in-out",children:a("div",{className:"p-2 bg-white border rounded-lg",children:[a("div",{className:"relative flex justify-center overflow-hidden border rounded-lg h-52",children:[e("div",{className:"w-full transition-transform duration-500 ease-in-out",children:e("div",{className:"absolute inset-0 ",children:e("img",{className:"object-cover object-top w-full h-full lg:h-full lg:w-full",src:t.media?t.media:"/storage/files/default/NoImage.svg",alt:t.slug})})}),e("div",{className:"absolute bottom-0 flex justify-center mb-3",children:e("div",{className:"flex px-2 py-1 space-x-1 overflow-hidden bg-white rounded-lg md:px-5 md:space-x-5",children:a("p",{className:"flex items-center text-sm font-medium text-gray-800",children:[e(A,{className:"w-5 h-5 text-gray-800 bg-transparent"}),t.owner.name]})})}),t.plan_bids_sum_is_approved==1?e("span",{className:"absolute top-0 left-0 inline-flex justify-end px-2 py-1 mt-3 ml-3 text-xs font-medium text-white bg-yellow-500 rounded-lg select-none z-9",children:"Sudah Ada Pemenang"}):a("span",{className:"absolute top-0 left-0 inline-flex justify-end px-2 py-1 mt-3 ml-3 text-xs font-medium text-white bg-blue-500 rounded-lg select-none z-9",children:[t.until," Hari Lagi"]})]}),a("div",{className:"mt-4",children:[e("h2",{className:"text-base font-medium text-gray-800 md:text-lg line-clamp-1",title:"New York",children:t.name}),e(N,{className:"mt-2 text-sm text-gray-800 line-clamp-1",href:`/public/plans/list?plan_category=${t.plan_category.slug}`,children:t.plan_category.name})]}),e("div",{className:"flex items-center justify-between my-2 space-x-4",children:a("span",{className:"items-center w-full px-2 py-1 text-xs font-semibold text-gray-500 bg-gray-100 rounded-md md:justify-between md:flex ",children:[e("p",{className:"text-[10px] md:text-xs",children:"Anggaran Proyek"}),a("p",{className:"md:ml-1 text-[9px] md:text-xs",children:["Rp"," ",f(t.anggaran_proyek)]})]})}),e("div",{className:"flex items-center justify-between space-x-4",children:a("span",{className:"items-center w-full px-2 py-1 text-xs font-semibold text-blue-700 bg-blue-100 rounded-md md:flex md:justify-between",children:[e("p",{className:"text-[10px] md:text-xs",children:"Anggaran Perencanaan"}),a("p",{className:"justify-end text-[9px] md:text-xs md:flex",children:["Rp"," ",f(t.dari_anggaran)," ","-","Rp"," ",f(t.sampai_anggaran)]})]})}),a("div",{className:"flex items-center justify-between my-2 space-x-4",children:[a("span",{className:"flex items-center px-2 py-1 mt-2 text-xs font-semibold text-yellow-700 bg-yellow-100 rounded-md w-36",children:[t.jangka_waktu_pelaksanaan," ","Hari Pengerjaan"]}),a("span",{className:"flex items-center px-2 py-1 mt-2 text-xs font-semibold text-green-500 rounded-md bg-green-50",children:[t.jumlah_revisi," Kali Revisi1"]})]})]})})},r))}):e(R,{}),e(z,{meta:c,links:m})]})]})}q.layout=i=>e(E,{children:i});export{q as default};
