import{I as F}from"./InputError.bf2b0621.js";import{I as n}from"./InputLabel.b2ab0276.js";import{P as J}from"./PrimaryButton.3fe433c7.js";import{S as P}from"./SecondaryButton.838e5c6c.js";import{T}from"./TextInput.86fbab6d.js";import{T as h}from"./TextInputCheckbox.9a601675.js";import"./TextInputRadio.b3c5885b.js";import{r as d,a as c,F as K,j as a}from"./app.5ea42cee.js";function U({errors:b,employees:i,counters:O,submit:k,data:x,setData:m,model:t,closeButton:C,reservationCounterTeams:o}){const[N,g]=d.exports.useState([]),[y,S]=d.exports.useState([]);d.exports.useEffect(()=>{if(!i.length)return;const e=t!=null&&t.details?t.details.map(l=>l.user.id):[],r=t!=null&&t.details?t.details.filter(l=>l.leader===1).map(l=>l.user.id):[],s=i.map(l=>({...l,isSelected:e.includes(l.user.id)})),E=i.map(l=>({...l,isSelected:r.includes(l.user.id)}));g(s),S(E)},[t,i]);const w=e=>{g(r=>r.map(s=>({...s,isSelected:s.user.id===e?!s.isSelected:s.isSelected})))},I=e=>{S(r=>r.map(s=>({...s,isSelected:s.user.id===e?!s.isSelected:s.isSelected})))},u=N.filter(e=>e.isSelected).map(e=>e.user.id),f=y.filter(e=>e.isSelected).map(e=>e.user.id);d.exports.useEffect(()=>{m(e=>JSON.stringify(e.employees)===JSON.stringify(u)&&JSON.stringify(e.leader)===JSON.stringify(f)?e:{...e,employees:u,leader:f})},[u,f]);const _=O,j=o?o.filter(e=>e.reservation_team_header_id===t.details[0].reservation_team_header_id).map(e=>e.reservation_counter_id):[],[p,v]=d.exports.useState([]);d.exports.useEffect(()=>{const e=j,r=_.map(s=>e.includes(s.id)?{...s,isSelected:!0}:s);v(r)},[]);const L=e=>{v(r=>r.map(s=>s.id===e?{...s,isSelected:!s.isSelected}:s))},B=p.filter(e=>e.isSelected).map(e=>e.id);return d.exports.useEffect(()=>{m({...x,counters:B})},[p]),c(K,{children:[a("div",{className:"px-2 py-2 bg-white sm:p-0",children:c("div",{className:"grid grid-cols-12 gap-1",children:[c("div",{className:"col-span-12",children:[a(n,{for:"name",value:"Nama"}),a(T,{id:"name",value:x.name,handleChange:e=>m("name",e.target.value),type:"text",className:"block w-full mt-1"}),a(F,{message:b.name,className:"mt-2"})]}),c("div",{className:"col-span-10 mt-2",children:[a("p",{className:"text-lg font-semibold text-gray-700",children:"Pilih Karyawan"}),N.map(e=>c("div",{className:"flex justify-between col-span-12 px-3 py-4 my-4 border rounded-md",children:[a(n,{for:e.user.name,value:e.user.name,className:"uppercase"}),a("div",{className:"flex flex-col items-start",children:a(h,{id:e.user.name,value:e.user.id,name:e.user.name,checked:e.isSelected,onChange:r=>{w(e.user.id)},className:"block w-full"},e.user.id)})]},e.user.id))]}),c("div",{className:"col-span-2 mt-2",children:[a("p",{className:"text-lg font-semibold text-gray-700",children:"Leader"}),y.map(e=>c("div",{className:"flex justify-between col-span-12 px-3 py-4 my-4 border rounded-md",children:[a(n,{for:e.user.name,className:"uppercase"}),a("div",{className:"flex flex-col items-start",children:a(h,{id:"pilih",value:e.user.id,name:"pilih",checked:e.isSelected,onChange:r=>{I(e.user.id)},className:"block w-full"},e.user.id)})]},e.user.id))]}),a("div",{className:"col-span-12 mt-2",children:a("p",{className:"text-lg font-semibold text-gray-700",children:"Pilih Layanan"})}),p.map(e=>c("div",{className:"flex justify-between col-span-12 px-3 py-4 border rounded-md",children:[a(n,{for:e.name,value:e.category.name+" - "+e.name,className:"uppercase"}),a("div",{className:"flex flex-col items-start",children:a(h,{id:e.name,value:e.id,name:e.name,checked:e.isSelected,onChange:r=>{L(e.id)},className:"block w-full"},e.id)})]},e.id))]})}),c("div",{className:"px-2 py-2 sm:px-2 sm:flex sm:flex-row-reverse",children:[a(J,{children:k}),a(P,{className:"mx-2",onClick:C,children:"Batal"})]})]})}export{U as default};
