var N=Object.defineProperty;var v=(l,r,e)=>r in l?N(l,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):l[r]=e;var i=(l,r,e)=>(v(l,typeof r!="symbol"?r+"":r,e),e);import{r as f,h as M,j as s,a as o,R as b}from"./app.e7470cdc.js";let w=60*60*24*1e3,g=Date.now()-Date.now()%w+new Date().getTimezoneOffset()*1e3*60,p=b.createRef();class C extends f.exports.Component{constructor(){super();i(this,"state",{getMonthDetails:[]});i(this,"addBackDrop",e=>{this.state.showDatePicker&&!M.findDOMNode(this).contains(e.target)&&this.showDatePicker(!1)});i(this,"showDatePicker",(e=!0)=>{this.setState({showDatePicker:e})});i(this,"daysMap",["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]);i(this,"monthMap",["January","February","March","April","May","June","July","August","September","October","November","December"]);i(this,"getDayDetails",e=>{let t=e.index-e.firstDay,a=e.index%7,n=e.month-1,h=e.year;n<0&&(n=11,h--);let c=this.getNumberOfDays(h,n),d=(t<0?c+t:t%e.numberOfDays)+1,m=t<0?-1:t>=e.numberOfDays?1:0,D=new Date(e.year,e.month,d).getTime();return{date:d,day:a,month:m,timestamp:D,dayString:this.daysMap[a]}});i(this,"getNumberOfDays",(e,t)=>40-new Date(e,t,40).getDate());i(this,"getMonthDetails",(e,t)=>{let a=new Date(e,t).getDay(),n=this.getNumberOfDays(e,t),h=[],c=6,d=null,m=0,D=7;for(let u=0;u<c;u++)for(let y=0;y<D;y++)d=this.getDayDetails({index:m,numberOfDays:n,firstDay:a,year:e,month:t}),h.push(d),m++;return h});i(this,"isCurrentDay",e=>e.timestamp===g);i(this,"isSelectedDay",e=>e.timestamp===this.state.selectedDay);i(this,"getDateFromDateString",e=>{let t=e.split("-").map(c=>parseInt(c,10));if(t.length<3)return null;let a=t[0],n=t[1],h=t[2];return{year:a,month:n,date:h}});i(this,"getMonthStr",e=>this.monthMap[Math.max(Math.min(11,e),0)]||"Month");i(this,"getDateStringFromTimestamp",e=>{let t=new Date(e),a=t.getMonth()+1,n=t.getDate();return t.getFullYear()+"-"+(a<10?"0"+a:a)+"-"+(n<10?"0"+n:n)});i(this,"setDate",e=>{let t=new Date(e.year,e.month-1,e.date).getTime();this.setState({selectedDay:t}),this.props.onChange&&this.props.onChange(t)});i(this,"updateDateFromInput",e=>{e.preventDefault();let t=p.current.value,a=this.getDateFromDateString(t);a!==null&&(this.setDate(a),this.setState({year:a.year,month:a.month-1,monthDetails:this.getMonthDetails(a.year,a.month-1)}))});i(this,"setDateToInput",e=>{let t=this.getDateStringFromTimestamp(e);p.current.value=t});i(this,"onDateClick",e=>{this.setState({selectedDay:e.timestamp},()=>this.setDateToInput(e.timestamp)),this.props.onChange&&this.props.onChange(e.timestamp),this.showDatePicker(!1)});i(this,"setYear",e=>{let t=this.state.year+e,a=this.state.month;this.setState({year:t,monthDetails:this.getMonthDetails(t,a)})});i(this,"setMonth",e=>{let t=this.state.year,a=this.state.month+e;a===-1?(a=11,t--):a===12&&(a=0,t++),this.setState({year:t,month:a,monthDetails:this.getMonthDetails(t,a)})});let e=new Date,t=e.getFullYear(),a=e.getMonth();this.state={year:t,month:a,selectedDay:g,monthDetails:this.getMonthDetails(t,a)}}componentDidMount(){window.addEventListener("click",this.addBackDrop),this.setDateToInput(this.state.selectedDay)}componentWillUnmount(){window.removeEventListener("click",this.addBackDrop)}renderCalendar(){let e=this.state.monthDetails.map((t,a)=>s("div",{className:"c-day-container "+(t.month!==0?" disabled":"")+(this.isCurrentDay(t)?" highlight":"")+(this.isSelectedDay(t)?" highlight-green":""),children:s("div",{className:"cdc-day",children:s("span",{onClick:()=>this.onDateClick(t),children:t.date})})},a));return o("div",{className:"c-container",children:[s("div",{className:"cc-head",children:["SUN","MON","TUE","WED","THU","FRI","SAT"].map((t,a)=>s("div",{className:"cch-name",children:t},a))}),s("div",{className:"cc-body",children:e})]})}render(){return o("div",{className:"DatePicker",children:[s("div",{className:"mdp-input",onClick:()=>this.showDatePicker(!0),children:s("input",{type:"date",onChange:this.updateDateFromInput,ref:p})}),this.state.showDatePicker?o("div",{className:"mdp-container",children:[o("div",{className:"mdpc-head",children:[s("div",{className:"mdpch-button",children:s("div",{className:"mdpchb-inner",onClick:()=>this.setYear(-1),children:s("span",{className:"mdpchbi-left-arrows"})})}),s("div",{className:"mdpch-button",children:s("div",{className:"mdpchb-inner",onClick:()=>this.setMonth(-1),children:s("span",{className:"mdpchbi-left-arrow"})})}),o("div",{className:"mdpch-container",children:[s("div",{className:"mdpchc-year",children:this.state.year}),s("div",{className:"mdpchc-month",children:this.getMonthStr(this.state.month)})]}),s("div",{className:"mdpch-button",children:s("div",{className:"mdpchb-inner",onClick:()=>this.setMonth(1),children:s("span",{className:"mdpchbi-right-arrow"})})}),s("div",{className:"mdpch-button",onClick:()=>this.setYear(1),children:s("div",{className:"mdpchb-inner",children:s("span",{className:"mdpchbi-right-arrows"})})})]}),s("div",{className:"mdpc-body",children:this.renderCalendar()})]}):""]})}}export{C as D};
