import{r,b as Y,a as s,F as n,j as e,H as F}from"./app.90c8d3e2.js";import{l as J,n as I,w as W,o as X,k as V,f as G,p as Q}from"./AsideReservasi.41b68d92.js";import{A as U}from"./AppReservasi.c0c08336.js";import"./CopyButton.dfd1943b.js";import{I as x}from"./InfoModal.b2e7f8a8.js";import{T as t}from"./ThirdButtonNoLink.7207aea5.js";import"./TextInputCheckbox.90f6b28b.js";import{T as Z}from"./TextAreaInput.1f13f6b6.js";import"./transition.045e6a5c.js";import"./DropdownMenu.e3f63dd8.js";import"./clsx.m.256e9345.js";import"./use-event-listener.26d5446c.js";import"./Tawarin.08057ae7.js";import"./ExclamationIcon.0a12063a.js";import"./dialog.74037b4a.js";import"./description.f03cf318.js";function $({auth:y,mustVerifyEmail:ee,status:ae,myCustomers:b,appEnv:se}){const[o,i]=r.exports.useState([]),[j,c]=r.exports.useState(!1),[D,d]=r.exports.useState(!1),[C,p]=r.exports.useState(!1),[S,m]=r.exports.useState(!1),{data:le,setData:O,patch:ne,post:te,put:h,processing:u,errors:oe,reset:re}=Y({}),_=a=>{O(a.target.name,a.target.type==="checkbox"?a.target.checked:a.target.value)},P=a=>{i(a),c(!0)},T=a=>{i(a),d(!0)},N=a=>{i(a),p(!0)},f=a=>{i(a),m(!0)},B=()=>{h(route("reservation.startservice",o.id),{onSuccess:()=>c(!1)})},q=()=>{h(route("reservation.finishservice",o.id),{onSuccess:()=>d(!1)})},K=()=>{h(route("reservation.declineanswer",o.id),{onSuccess:()=>p(!1)})},M=()=>{h(route("reservation.approvedanswer",o.id),{onSuccess:()=>m(!1)})},A=()=>{c(!1)},z=()=>{d(!1)},E=()=>{p(!1)},L=()=>{m(!1)};let g="";return console.log(b),s(n,{children:[s(x,{isOpenInfoDialog:j,setIsOpenInfoDialog:c,size:"2xl",closeButton:"false",title:"Yakin Mulai Pelayanan ?",children:[e(t,{processing:u,onClick:B,children:"Mulai"}),e(t,{className:"mx-2 mt-2",color:"secondary",onClick:A,children:"Close"})]}),s(x,{isOpenInfoDialog:D,setIsOpenInfoDialog:d,size:"2xl",closeButton:"false",title:"Yakin Selesaikan Pelayanan ?",children:[e(t,{processing:u,onClick:q,children:"Selesai"}),e(t,{className:"mx-2 mt-2",color:"secondary",onClick:z,children:"Close"})]}),s(x,{isOpenInfoDialog:C,setIsOpenInfoDialog:p,size:"2xl",closeButton:"false",title:"Yakin Tolak Jawaban Pelanggan ?",children:[e(Z,{placeholder:"Komentar",name:"pekerja_comment",handleChange:_}),e(t,{processing:u,onClick:K,color:"danger",children:"Tolak"}),e(t,{className:"mx-2 mt-2",color:"secondary",onClick:E,children:"Close"})]}),s(x,{isOpenInfoDialog:S,setIsOpenInfoDialog:m,size:"2xl",closeButton:"false",title:"Yakin Terima Jawaban Pelanggan ?",children:[o.request_approved==1?s("div",{className:"col-span-12 px-3 py-4 mb-6 text-sm text-gray-500 rounded shadow md:col-span-8",children:[s("svg",{xmlns:"http://www.w3.org/2000/svg",className:"justify-center inline w-6 h-6 mr-3 -mt-1 text-center text-white rounded-full bg-gradient-to-r from-yellow-300 via-yellow-500 to-yellow-600 icon icon-tabler icon-tabler-info-circle",width:24,height:24,viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[e("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e("circle",{cx:12,cy:12,r:9}),e("line",{x1:12,y1:8,x2:"12.01",y2:8}),e("polyline",{points:"11 12 12 12 12 16 13 16"})]}),e("span",{className:"text-lg font-semibold text-left",children:o.customer_comment})]}):e(n,{}),e(t,{processing:u,onClick:M,children:"Terima"}),e(t,{className:"mx-2 mt-2",color:"secondary",onClick:L,children:"Close"})]}),e(F,{title:"Profile"}),e("div",{className:"py-12",children:e("div",{className:"mx-auto space-y-6 sm:px-6 lg:px-8",children:s("div",{className:"p-4 bg-white shadow sm:p-8 dark:bg-gray-800 sm:rounded-lg",children:[e("div",{className:"p-8 border border-gray-200 rounded-2xl",children:e("div",{className:"flex justify-center mb-2 text-lg",children:"Pelanggan Saya"})}),b.map((a,R)=>{var w,v,k;return e("div",{className:"py-5",children:e("div",{className:"p-2 duration-150 bg-white rounded-lg shadow cursor-pointer",children:s("div",{children:[s("div",{className:"flex items-center justify-between px-4 my-6",children:[e("p",{className:"font-bold text-gray-500",children:"Nama Layanan"}),s("p",{className:"rounded-full bg-blue-500 px-2 py-0.5 text-xs font-semibold text-white",children:[a.counterCategoryName," ",a.counterName]})]}),s("div",{className:"flex items-center justify-between px-4 my-4",children:[e("p",{className:"text-sm font-semibold text-gray-500",children:"Kode Bukti"}),e("p",{className:"rounded-full bg-gray-200 px-2 py-0.5 text-xs font-semibold text-gray-600",children:a.code})]}),a.plat&&s("div",{className:"flex items-center justify-between px-4 my-4",children:[e("p",{className:"text-sm font-semibold text-gray-500",children:"Plat Kendaraan"}),e("p",{className:"rounded-full bg-gray-200 px-2 py-0.5 text-xs font-semibold text-gray-600",children:a.plat})]}),s("div",{className:"flex items-center justify-between px-4 my-4",children:[e("p",{className:"text-sm font-semibold text-gray-500",children:"Tanggal Reservasi"}),e("p",{className:"rounded-full bg-gray-200 px-2 py-0.5 text-xs font-semibold text-gray-600",children:a.date})]}),s("div",{className:"flex items-center justify-between px-4 my-4",children:[e("p",{className:"text-sm font-semibold text-gray-500",children:"Jam Reservasi"}),e("p",{className:"rounded-full bg-gray-200 px-2 py-0.5 text-xs font-semibold text-gray-600",children:a.time})]}),s("div",{className:"flex items-center justify-between px-4 my-4",children:[e("p",{className:"text-sm font-semibold text-gray-500",children:"Nama Pelanggan"}),e("p",{className:"rounded-full bg-gray-200 px-2 py-0.5 text-xs font-semibold text-gray-600",children:a.user.name})]}),a.complaint==1?s("div",{className:"flex items-center justify-between px-4 my-4",children:[e("p",{className:"text-sm font-semibold text-gray-500",children:"Alasan Komplain"}),e("p",{className:"rounded-full bg-red-200 px-2 py-0.5 text-xs font-semibold text-red-600",children:a.complaint_reason})]}):e(n,{}),a.answers.map((l,H)=>s("div",{className:"grid grid-cols-12 gap-1",children:[e("div",{className:"col-span-10 p-1 mt-2 duration-150 bg-white rounded-lg shadow cursor-pointer ",children:e("div",{children:s("div",{className:"flex items-center justify-between ",children:[e("p",{className:"text-sm font-semibold text-gray-500",children:l.question.question}),e("p",{className:"rounded-full bg-gray-200 px-2 py-0.5 text-xs font-semibold text-gray-600",children:l.description}),l.request_approved==1?e("p",{className:"rounded-full bg-gray-200 px-2 py-0.5 text-xs font-semibold text-yellow-600",children:l.customer_comment}):e(n,{})]})})}),l.approved==0&&l.decline==0&&l.request_approved==0?s(n,{children:[e("div",{className:"col-span-1 p-1 mx-auto mt-2 duration-150 bg-white rounded-lg shadow cursor-pointer ",children:e("div",{children:e("div",{className:"flex items-center justify-between ",children:e("p",{className:"text-sm font-semibold text-red-500",children:e(J,{onClick:()=>N(l)})})})})}),e("div",{className:"col-span-1 p-1 mx-auto mt-2 duration-150 bg-white rounded-lg shadow cursor-pointer ",children:e("div",{children:e("div",{className:"flex items-center justify-between ",children:e("p",{className:"text-sm font-semibold text-green-500",children:e(I,{onClick:()=>f(l)})})})})})]}):e(n,{}),l.approved==1?e(n,{children:e("div",{className:"col-span-1 p-1 mx-auto mt-2 duration-150 bg-white rounded-lg shadow cursor-pointer ",children:e("div",{children:e("div",{className:"flex items-center justify-between ",children:e("p",{className:"text-sm font-semibold text-green-500",children:e(I,{onClick:()=>f(l)})})})})})}):e(n,{}),l.decline==1&&l.request_approved==1&&l.approved==0?e(n,{children:e("div",{className:"col-span-1 p-1 mx-auto mt-2 duration-150 bg-white rounded-lg shadow cursor-pointer ",children:e("div",{children:e("div",{className:"flex items-center justify-between ",children:e("p",{className:"text-sm font-semibold text-yellow-500",children:e(W,{onClick:()=>f(l)})})})})})}):e(n,{}),l.decline==1&&l.approved==0?e(n,{children:e("div",{className:"col-span-1 p-1 mx-auto mt-2 duration-150 bg-white rounded-lg shadow cursor-pointer ",children:e("div",{children:e("div",{className:"flex items-center justify-between ",children:e("p",{className:"text-sm font-semibold text-red-500",children:e(X,{onClick:()=>N(l)})})})})})}):e(n,{})]},H)),a.batal_customer==1?s("div",{className:"flex items-center justify-between px-4 my-4",children:[e("p",{className:"text-sm font-semibold text-gray-500",children:"Alasan Batal"}),e("p",{className:"rounded-full bg-red-200 px-2 py-0.5 text-xs font-semibold text-red-600",children:a.alasan_batal_customer})]}):e(n,{}),e("div",{className:"flex items-center px-4 my-4 justify-evenly",children:a.batal_customer==1?s(t,{className:"cursor-not-allowed",color:"red",children:["Sudah dibatalkan"," ",e(V,{className:"w-4 h-4"})]}):a.selesai_customer==1?s(n,{children:[s(t,{color:"teal",className:"cursor-not-allowed",children:["BERES"," ",e(G,{className:"w-5 h-5 ml-2"})]}),e("div",{className:"hidden",children:((w=a.user.phone)==null?void 0:w.charAt(0))==="0"?g=a.user.phone.slice(1):g=a.user.phone}),e("a",{className:"inline-flex items-center px-3 py-2 mr-1 text-xs font-semibold text-yellow-600 rounded-md bg-yellow-50 ring-yellow-500/10 ring-1 ring-inset",href:"https://wa.me/62"+g+"?text=Terima kasih telah berbelanja Rp. "+((v=a.team)==null?void 0:v.counter.price.toLocaleString("id-ID"))+" di "+((k=a.team)==null?void 0:k.counter.company.name)+", cek struk di https://www.tawarin.id/ereceipt/"+a.code,"data-action":"share/whatsapp/share",children:"Kirim Nota via Whatsapp"})]}):e(n,{children:a.selesai_team==1?e(t,{color:"yellow",className:"cursor-not-allowed",children:"Menunggu Konfirmasi Pelanggan"}):a.complaint==1?s(t,{color:"red",className:"cursor-not-allowed",children:["Pelanggan Komplain"," ",e(Q,{className:"w-5 h-5 ml-2"})]}):s(n,{children:[a.dikerjakan==1?e(t,{children:"Sedang dikerjakan ..."}):e(t,{onClick:a.leader===1?()=>P(a):void 0,className:a.leader===1?"":"cursor-not-allowed",children:"Mulai"}),a.dikerjakan==1?e(t,{onClick:a.leader===1?()=>T(a):void 0,className:a.leader===1?"":"cursor-not-allowed",color:"cyan",children:"Selesai"}):e(t,{color:"gray",className:"cursor-not-allowed",children:"Selesai"})]})})})]})})},R)})]})})})]})}$.layout=y=>e(U,{children:y});export{$ as default};
