import{r as s,l as g,d as k,a as t,F as C,j as e,H as R}from"./app.14cd69a4.js";import{A as D}from"./AppReservasi.5c1a9700.js";import{C as S}from"./Container.1b150379.js";import{n as f}from"./helper.e37a4314.js";import"./DatePicker.e8d48de8.js";import{H as j}from"./Header.d9fd19b6.js";import"./DropdownMenu.1bb65ede.js";import"./clsx.m.256e9345.js";import"./transition.816dc52e.js";import"./use-event-listener.6538992c.js";import"./AsideReservasi.43a96555.js";import"./Tawarin.08057ae7.js";const m=()=>e("svg",{className:"w-5 h-5 text-gray-500",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e("path",{fillRule:"evenodd",d:"M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z",clipRule:"evenodd"})}),p=()=>e("svg",{className:"w-5 h-5 text-gray-500",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})});function H(i){const{data:h,meta:x,filtered:b,attributes:n}=i.transactions,{data:y}=i.sumTransactions,[I,N]=s.exports.useState([]),[r,d]=s.exports.useState(b),[w,v]=s.exports.useState(!0),_=s.exports.useCallback(g.exports.debounce(a=>{k.Inertia.get(route(route().current()),{...g.exports.pickBy(a),page:a.page},{preserveState:!0,preserveScroll:!0})},150),[]);s.exports.useEffect(()=>{w?v(!1):_(r)},[r]),s.exports.useEffect(()=>{let a=[];for(let l=n.per_page;l<n.total/n.per_page;l=l+n.per_page)a.push(l);N(a)},[]);const u=a=>d({...r,[a.target.name]:a.target.value}),c=a=>{d({...r,field:a,direction:r.direction=="asc"?"desc":"asc"})},o=new Date().toLocaleDateString("en-CA");return s.exports.useState(o[0]),t(C,{children:[e(R,{title:"History"}),e(j,{title:"Rekapan",description:"Rekapan Layanan."}),e(S,{children:e("div",{className:"py-12",children:t("div",{className:"mx-auto max-w-8xl sm:px-6 lg:px-8",children:[e("div",{className:"flex items-center justify-end",children:e("div",{className:"w-full px-4",children:t("div",{className:"flex items-center justify-end mb-6 gap-x-2",children:[e("div",{className:"flex items-center px-2 transition duration-150 ease-in-out bg-white border border-gray-300 rounded-lg gap-x-2 focus-within:border-blue-400 focus-within:ring-blue-200 focus-within:ring",children:e("input",{type:"date",name:"startDate",id:"startDate",defaultValue:o,onChange:u,value:r.startDate,className:"w-full border-0 focus:ring-0 form-text"})}),e("div",{className:"flex items-center px-2 transition duration-150 ease-in-out bg-white border border-gray-300 rounded-lg gap-x-2 focus-within:border-blue-400 focus-within:ring-blue-200 focus-within:ring",children:e("input",{type:"date",name:"endDate",id:"endDate",defaultValue:o,onChange:u,value:r.endDate,className:"w-full border-0 focus:ring-0 form-text"})})]})})}),y.map((a,l)=>e("div",{children:t("div",{className:"grid grid-cols-3 border border-gray-200 lg:items-center rounded-xl",children:[t("div",{className:"flex flex-col p-4",children:[e("h4",{className:"mb-2 text-gray-800"}),t("div",{className:"flex gap-x-1",children:[e("span",{className:"text-xl font-normal text-gray-800"}),e("p",{className:"text-base font-semibold text-gray-800",children:a.employee_name})]})]}),t("div",{className:"flex flex-col p-4",children:[e("div",{className:"flex justify-between",children:e("h4",{className:"mb-1 text-gray-800",children:"Pelanggan"})}),t("div",{className:"flex gap-x-1",children:[e("span",{className:"text-xl font-normal text-gray-800"}),e("p",{className:"text-xl font-semibold text-gray-800",children:a.total_customers})]})]}),t("div",{className:"flex flex-col p-4",children:[e("h4",{className:"mb-1 text-gray-800",children:"Harga"}),t("div",{className:"flex gap-x-1",children:[e("span",{className:"text-base font-normal text-gray-800",children:"Rp"}),e("p",{className:"text-xl font-semibold text-gray-800",children:f(a.total_price_user)})]})]})]})},l)),e("div",{className:"flex flex-col mt-4",children:e("div",{className:"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8",children:e("div",{className:"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8",children:e("div",{className:"overflow-hidden border-b border-gray-200 shadow sm:rounded-lg",children:t("table",{className:"min-w-full divide-y divide-gray-200",children:[e("thead",{className:"bg-gray-50",children:t("tr",{children:[e("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-800 uppercase",children:e("div",{className:"flex items-center cursor-pointer gap-x-2",children:"#"})}),e("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-800 uppercase",children:t("div",{className:"flex items-center cursor-pointer gap-x-2",onClick:()=>c("counter_name"),children:["Nama Layanan",r.field=="counter_name"&&r.direction=="asc"&&e(m,{}),r.field=="counter_name"&&r.direction=="desc"&&e(p,{})]})}),e("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-800 uppercase",children:t("div",{className:"flex items-center cursor-pointer gap-x-2",onClick:()=>c("total_customers"),children:["Total Customer",r.field=="total_customers"&&r.direction=="asc"&&e(m,{}),r.field=="total_customers"&&r.direction=="desc"&&e(p,{})]})}),e("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-800 uppercase",children:t("div",{className:"flex items-center cursor-pointer gap-x-2",onClick:()=>c("total_price_user"),children:["Total Harga",r.field=="total_price_user"&&r.direction=="asc"&&e(m,{}),r.field=="total_price_user"&&r.direction=="desc"&&e(p,{})]})})]})}),e("tbody",{className:"bg-white divide-y divide-gray-200",children:h.map((a,l)=>t("tr",{children:[e("td",{className:"px-6 py-4 whitespace-nowrap",children:x.from+l}),e("td",{className:"px-6 py-4 whitespace-nowrap",children:a.counter_name}),e("td",{className:"px-6 py-4 whitespace-nowrap",children:t("div",{className:"flex mt-1 rounded-md shadow-sm",children:[e("div",{className:"flex-1 block w-full px-4 py-1 text-base border border-r-0 border-gray-300 rounded-none rounded-l-md focus:border-indigo-500 focus:ring-indigo-500",children:a.total_customers}),e("span",{className:"inline-flex items-center px-3 text-base text-gray-500 border border-l-0 border-gray-300 rounded-r-md bg-gray-50",children:"Pelanggan"})]})}),e("td",{className:"px-6 py-4 whitespace-nowrap",children:t("div",{className:"flex mt-1 rounded-md shadow-sm",children:[e("span",{className:"inline-flex items-center px-3 text-base text-gray-500 border border-r-0 border-gray-300 rounded-l-md bg-gray-50",children:"Rp"}),e("div",{className:"flex-1 block w-full px-2 py-1 text-base border border-l-0 border-gray-300 rounded-none rounded-r-md focus:border-indigo-500 focus:ring-indigo-500",children:f(a.total_price_user)})]})})]},a.id))})]})})})})}),e("ul",{className:"flex items-center mt-10 gap-x-1",children:x.links.map((a,l)=>e("button",{disabled:a.url==null,className:`${a.url==null?"text-gray-500":"text-gray-800"} w-12 h-9 rounded-lg flex items-center justify-center border bg-white`,onClick:()=>d({...r,page:new URL(a.url).searchParams.get("page")}),children:a.label},l))})]})})})]})}H.layout=i=>e(D,{children:i});export{H as default};
