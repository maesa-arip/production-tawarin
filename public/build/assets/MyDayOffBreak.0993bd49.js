import{r as l,l as E,d as ee,b as ae,a as r,F as M,j as e,H as re,L as P}from"./app.e7470cdc.js";import{D as c}from"./index_responsive.e78e356f.js";import{A as se}from"./AppReservasi.b85ad499.js";import"./CopyButton.8b724643.js";import{I as J}from"./InfoModal.534dcd03.js";import{T as i}from"./ThirdButtonNoLink.30de8e74.js";import{i as z}from"./index.esm.492fa502.js";import{I as N}from"./Input.16048f90.js";import{I as v}from"./InputError.c64527a1.js";import{E as F}from"./EditModal.e3dabbb1.js";import{H as te}from"./Header.3a73cb5c.js";import"./DropdownMobile.70c4df77.js";import{T as u}from"./ThirdButtonSmallNoLink.2160a8ec.js";import{C as le}from"./Container.0e83379f.js";import"./transition.157fb26d.js";import"./use-event-listener.08e13ab9.js";import"./DropdownMenu.8f27eb7c.js";import"./clsx.m.256e9345.js";import"./Tawarin.08057ae7.js";import"./AsideReservasi.79a8d149.js";import"./ExclamationIcon.65946d1d.js";import"./dialog.fb14a4b8.js";import"./description.05a22cdd.js";const d=()=>e("svg",{className:"w-5 h-5 text-gray-500",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e("path",{fillRule:"evenodd",d:"M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z",clipRule:"evenodd"})}),m=()=>e("svg",{className:"w-5 h-5 text-gray-500",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})});function ie(g){const{data:y,meta:w,filtered:R,attributes:h}=g.reservationEmployeeDayOff,T=g.reservationEmployeeBreak,[_,H]=l.exports.useState([]),[s,f]=l.exports.useState(R),[q,A]=l.exports.useState(!0),K=l.exports.useCallback(E.exports.debounce(a=>{ee.Inertia.get(route(route().current()),{...E.exports.pickBy(a),page:a.page},{preserveState:!0,preserveScroll:!0})},150),[]);l.exports.useEffect(()=>{q?A(!1):K(s)},[s]),l.exports.useEffect(()=>{let a=[];for(let t=h.per_page;t<h.total/h.per_page;t=t+h.per_page)a.push(t);H(a)},[]);const x=a=>{const t={...s,[a.target.name]:a.target.value,page:1};f(t)},n=a=>{f({...s,field:a,direction:s.direction=="asc"?"desc":"asc"})},[ne,D]=l.exports.useState([]),[U,j]=l.exports.useState(!1),[$,L]=l.exports.useState(!1),{data:o,setData:p,patch:oe,post:S,put:ce,processing:B,errors:b,reset:O}=ae({});l.exports.useEffect(()=>{const a=y[0].company.id;p("reservation_company_id",a)},[o.reason,o.start,o.end]);const W=()=>{j(!1)},Y=()=>{L(!1)},[G,k]=l.exports.useState(!1),C=a=>{D(a),k(!0)},Q=a=>{a.preventDefault(),S(route("reservationemployeedayoff.store"),{onSuccess:()=>Promise.all([k(!1),O()])})},[V,I]=l.exports.useState(!1),X=a=>{D(a),I(!0)},Z=a=>{a.preventDefault(),S(route("reservationemployeebreak.store_break"),{onSuccess:()=>Promise.all([I(!1),O()])})};return r(M,{children:[e(te,{title:"Jadwal",description:"Jadwal Libur dan Istirahat."}),r(le,{children:[e(F,{isOpenEditDialog:G,setIsOpenEditDialog:k,size:"2xl",title:"Masukan Jadwal Libur",children:r("form",{onSubmit:Q,children:[r("div",{className:"grid grid-cols-12 gap-6",children:[r("div",{className:"col-span-12 md:col-span-6",children:[e("label",{htmlFor:"date",className:"block text-sm font-medium text-gray-700",children:"Tanggal Libur"}),e(N,{type:"date",name:"date",value:o.date,className:"block w-full mt-1",autoComplete:"date",isFocused:!0,onChange:a=>p("date",a.target.value)}),e(v,{message:b.date,className:"mt-2"})]})," ",r("div",{className:"col-span-12 md:col-span-6",children:[e("label",{htmlFor:"date",className:"block text-sm font-medium text-gray-700",children:"Alasan"}),e(N,{type:"text",name:"reason",value:o.reason,className:"block w-full mt-1",autoComplete:"reason",isFocused:!0,onChange:a=>{p("reason",a.target.value)}}),e(v,{message:b.reason,className:"mt-2"})]})," "]}),e(i,{className:"mt-4",disabled:B,children:"Simpan"})]})}),e(F,{isOpenEditDialog:V,setIsOpenEditDialog:I,size:"2xl",title:"Masukan Jam Istirahat",children:r("form",{onSubmit:Z,children:[r("div",{className:"grid grid-cols-12 gap-6",children:[r("div",{className:"col-span-12 md:col-span-6",children:[e("label",{htmlFor:"start",className:"block text-sm font-medium text-gray-700",children:"Jam Mulai Istirahat"}),e(N,{type:"time",name:"start",value:o.start,className:"block w-full mt-1",autoComplete:"start",isFocused:!0,onChange:a=>p("start",a.target.value)}),e(v,{message:b.start,className:"mt-2"})]})," ",r("div",{className:"col-span-12 md:col-span-6",children:[e("label",{htmlFor:"end",className:"block text-sm font-medium text-gray-700",children:"Jam Berakhir Istirahat"}),e(N,{type:"time",name:"end",value:o.end,className:"block w-full mt-1",autoComplete:"end",isFocused:!0,onChange:a=>p("end",a.target.value)}),e(v,{message:b.end,className:"mt-2"})]})," "]}),e(i,{className:"mt-4",disabled:B,children:"Simpan"})]})}),e(J,{isOpenInfoDialog:U,setIsOpenInfoDialog:j,size:"2xl",closeButton:"false",title:"Yakin Mulai Pelayanan ?",children:e(i,{className:"mx-2 mt-2",color:"gray",onClick:W,children:"Close"})}),e(J,{isOpenInfoDialog:$,setIsOpenInfoDialog:L,size:"2xl",closeButton:"false",title:"Yakin Selesaikan Pelayanan ?",children:e(i,{className:"mx-2 mt-2",color:"gray",onClick:Y,children:"Close"})}),e(re,{title:"Profile"}),r("div",{className:"hidden lg:block",children:[r("div",{className:"flex items-center justify-end",children:[e("div",{className:"w-1/2",children:r("div",{className:"flex items-center justify-start mb-6 gap-x-2",children:[e(i,{onClick:()=>C(),children:"Tambah Hari Libur"}),e(i,{onClick:()=>C(),children:"Tambah Jam Istirahat"})]})}),e("div",{className:"w-1/2",children:r("div",{className:"flex items-center justify-end mb-6 gap-x-2",children:[e("select",{name:"load",id:"load",onChange:x,value:s.load,className:"transition duration-150 ease-in-out border-gray-300 rounded-lg focus:ring-blue-200 focus:ring form-select",children:_.map((a,t)=>e("option",{children:a},t))}),r("div",{className:"flex items-center px-2 transition duration-150 ease-in-out bg-white border border-gray-300 rounded-lg gap-x-2 focus-within:border-blue-400 focus-within:ring-blue-200 focus-within:ring",children:[e("svg",{className:"inline w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e("input",{type:"text",name:"q",id:"q",onChange:x,value:s.q,className:"w-full border-0 focus:ring-0 form-text"})]})]})})]}),e("div",{className:"flex flex-col",children:e("div",{className:"-my-2 sm:-mx-6 lg:-mx-8",children:e("div",{className:"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8",children:e("div",{className:"border-b border-gray-200 shadow sm:rounded-lg",children:r("table",{className:"min-w-full divide-y divide-gray-200",children:[e("thead",{className:"bg-gray-50",children:r("tr",{children:[e("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-800 uppercase",children:e("div",{className:"flex items-center cursor-pointer gap-x-2",children:"#"})}),e("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-800 uppercase",children:r("div",{className:"flex items-center cursor-pointer gap-x-2",onClick:()=>n("jumlah_revisi"),children:[s.field=="media"&&s.direction=="asc"&&e(d,{}),s.field=="media"&&s.direction=="desc"&&e(m,{})]})}),e("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-800 uppercase",children:r("div",{className:"flex items-center cursor-pointer gap-x-2",onClick:()=>n("name"),children:["Nama Perencanaan",s.field=="name"&&s.direction=="asc"&&e(d,{}),s.field=="name"&&s.direction=="desc"&&e(m,{})]})}),e("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-800 uppercase",children:r("div",{className:"flex items-center cursor-pointer gap-x-2",onClick:()=>n("jumlah_revisi"),children:["Jumlah Revisi",s.field=="jumlah_revisi"&&s.direction=="asc"&&e(d,{}),s.field=="jumlah_revisi"&&s.direction=="desc"&&e(m,{})]})}),e("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-800 uppercase",children:r("div",{className:"flex items-center cursor-pointer gap-x-2",onClick:()=>n("anggaran_proyek"),children:["Anggaran Proyek",s.field=="anggaran_proyek"&&s.direction=="asc"&&e(d,{}),s.field=="anggaran_proyek"&&s.direction=="desc"&&e(m,{})]})}),e("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-800 uppercase",children:r("div",{className:"flex items-center cursor-pointer gap-x-2",onClick:()=>n("is_approved"),children:["Status",s.field=="is_approved"&&s.direction=="asc"&&e(d,{}),s.field=="is_approved"&&s.direction=="desc"&&e(m,{})]})}),e("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-800 uppercase",children:r("div",{className:"flex items-center cursor-pointer gap-x-2",onClick:()=>n("employee_bids_count"),children:["Jumlah Penawar",s.field=="employee_bids_count"&&s.direction=="asc"&&e(d,{}),s.field=="employee_bids_count"&&s.direction=="desc"&&e(m,{})]})}),e("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-800 uppercase",children:r("div",{className:"flex items-center cursor-pointer gap-x-2",onClick:()=>n("created_at"),children:["Dibuat",s.field=="created_at"&&s.direction=="asc"&&e(d,{}),s.field=="created_at"&&s.direction=="desc"&&e(m,{})]})}),e("th",{scope:"col",className:"relative px-6 py-3",children:e("span",{className:"sr-only",children:"Edit"})})]})}),e("tbody",{className:"bg-white divide-y divide-gray-200",children:y.map((a,t)=>r("tr",{children:[e("td",{className:"px-6 py-4 whitespace-nowrap",children:w.from+t}),e("td",{className:"px-6 py-4 whitespace-nowrap",children:e("img",{className:"object-cover w-16 h-12 border rounded-lg",src:a.media?a.media:"storage/files/default/NoImage.svg",alt:a.slug})}),e("td",{className:"px-6 py-4 whitespace-nowrap",children:a.company.name}),e("td",{className:"px-6 py-4 whitespace-nowrap",children:r("div",{className:"flex mt-1 rounded-md shadow-sm",children:[e("div",{className:"flex-1 block w-full px-4 py-1 text-base border border-r-0 border-gray-300 rounded-none rounded-l-md focus:border-indigo-500 focus:ring-indigo-500",children:a.jumlah_revisi}),e("span",{className:"inline-flex items-center px-3 text-base text-gray-500 border border-l-0 border-gray-300 rounded-r-md bg-gray-50",children:"Kali"})]})}),e("td",{className:"px-6 py-4 whitespace-nowrap",children:r("div",{className:"flex mt-1 rounded-md shadow-sm",children:[e("span",{className:"inline-flex items-center px-3 text-base text-gray-500 border border-r-0 border-gray-300 rounded-l-md bg-gray-50",children:"Rp"}),e("div",{className:"flex-1 block w-full px-2 py-1 text-base border border-l-0 border-gray-300 rounded-none rounded-r-md focus:border-indigo-500 focus:ring-indigo-500",children:"employee.anggaran_proyek"})]})}),e("td",{className:"px-6 py-4 whitespace-nowrap",children:a.approved==1?e(u,{children:"Diterima"}):e(u,{color:"secondary",children:"Menunggu Konfirmasi"})}),e("td",{className:"px-6 py-4 whitespace-nowrap",children:r("div",{className:"flex mt-1 rounded-md shadow-sm",children:[e("div",{className:"flex-1 block w-full px-4 py-1 text-base border border-r-0 border-gray-300 rounded-none rounded-l-md focus:border-indigo-500 focus:ring-indigo-500",children:a.employee_bids_count}),e("span",{className:"inline-flex items-center px-3 text-base text-gray-500 border border-l-0 border-gray-300 rounded-r-md bg-gray-50",children:"Penawaran"})]})}),e("td",{className:"px-6 py-4 whitespace-nowrap",children:a.created_at}),e("td",{children:r(c,{children:[e(c.Trigger,{children:e("button",{children:e("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{d:"M6 10a2 2 0 11-4 0 2 2 0 014 0zM12 10a2 2 0 11-4 0 2 2 0 014 0zM16 12a2 2 0 100-4 2 2 0 000 4z"})})})}),r(c.Content,{children:[a.approved==1?"":r(M,{children:[e(c.Link,{children:"Edit"}),e("button",{className:"items-center block w-full px-4 py-2 text-sm leading-5 text-left text-gray-700 transition duration-150 ease-in-out hover:bg-gray-100 focus:outline-none focus:bg-gray-100 gap-x-2",onClick:()=>openDestroyDialog(a),children:"Hapus"})]}),e(c.Link,{children:"Lihat Detail"}),e(c.Link,{children:"Lihat Penawaran"}),a.employee_bids_sum_is_approved=="1"&&e(c.Link,{href:route("employee.tahapan",`${a.slug}`),children:"Tahapan Perencanaan"})]})]})})]},a.id))})]})})})})}),e("ul",{className:"flex items-center mt-10 gap-x-1",children:w.links.map((a,t)=>e("button",{disabled:a.url==null,className:`${a.url==null?"text-gray-500":"text-gray-800"} w-12 h-9 rounded-lg flex items-center justify-center border bg-white`,onClick:()=>f({...s,page:new URL(a.url).searchParams.get("page")}),children:a.label},t))})]}),r("div",{className:"lg:hidden",children:[r("div",{className:"flex items-center justify-between",children:[e("div",{className:"w-1/2",children:r("div",{className:"flex items-center justify-start mt-2 mb-0 gap-x-1",children:[r(i,{onClick:()=>C(),children:["Libur ",e(z,{className:"w-4 h-4"})]}),r(i,{onClick:()=>X(),children:["Istirahat"," ",e(z,{className:"w-4 h-4"})]})]})}),e("div",{className:"w-1/2",children:r("div",{className:"flex items-center justify-between mt-2 mb-0 gap-x-1",children:[e("select",{name:"load",id:"load",onChange:x,value:s.load,className:"transition duration-150 ease-in-out border-gray-300 rounded-lg focus:ring-blue-200 focus:ring form-select",children:_.map((a,t)=>e("option",{children:a},t))}),r("div",{className:"flex items-center px-2 transition duration-150 ease-in-out bg-white border border-gray-300 rounded-lg gap-x-2 focus-within:border-blue-400 focus-within:ring-blue-200 focus-within:ring",children:[e("svg",{className:"inline w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e("input",{type:"text",autoComplete:"off",name:"q",id:"q",onChange:x,value:s.q,className:"w-full border-0 focus:ring-0 form-text"})]})]})})]}),e("div",{className:"grid w-full grid-cols-1 mt-4 gap-x-1 gap-y-4 md:gap-2 sm:grid-cols-2 lg:grid-cols-2 xl:grid-cols-2",children:T.map((a,t)=>e("div",{className:"relative w-full mx-auto",children:e("div",{className:"flex flex-col bg-amber-200 border border-amber-400 shadow-lg rounded-xl dark:bg-gray-800 dark:border-gray-700 dark:shadow-slate-700/[.7]",children:e("div",{className:"flex flex-col items-center justify-center flex-auto p-2",children:r("div",{className:"grid w-full grid-cols-12 gap-1",children:[r("div",{className:"col-span-4 col-start-1",children:[e("p",{className:"text-base font-semibold",children:a.company.name}),e("p",{className:"text-xs font-medium text-gray-500",children:a.email})]}),e("div",{className:"flex items-center justify-end col-span-6 col-end-13",children:e(u,{color:"secondary",children:"Jam Istirahat"})}),e("div",{className:"col-span-12 col-start-1 border-b border-gray-100"}),e("div",{className:"col-span-10 col-start-1",children:r(P,{className:"text-base font-semibold",children:["Istirahat  : ",a.start," - ",a.end]})}),e("div",{className:"col-span-5 col-end-13",children:e("div",{className:"flex items-center justify-end col-span-3 col-end-6 "})})]})})})},t))}),e("div",{className:"grid w-full grid-cols-1 mt-4 gap-x-1 gap-y-4 md:gap-2 sm:grid-cols-2 lg:grid-cols-2 xl:grid-cols-2",children:y.map((a,t)=>e("div",{className:"relative w-full mx-auto",children:e("div",{className:"flex flex-col bg-white border shadow-lg rounded-xl dark:bg-gray-800 dark:border-gray-700 dark:shadow-slate-700/[.7]",children:e("div",{className:"flex flex-col items-center justify-center flex-auto p-2",children:r("div",{className:"grid w-full grid-cols-12 gap-1",children:[r("div",{className:"col-span-4 col-start-1",children:[e("p",{className:"text-base font-semibold",children:a.company.name}),e("p",{className:"text-xs font-medium text-gray-500",children:a.email})]}),e("div",{className:"flex items-center justify-end col-span-6 col-end-13",children:a.approved==1?e(u,{children:"Diterima"}):e(u,{color:"secondary",children:"Menunggu Konfirmasi"})}),e("div",{className:"col-span-12 col-start-1 border-b border-gray-100"}),e("div",{className:"col-span-10 col-start-1",children:r(P,{className:"text-base font-semibold",children:["Libur : ",a.date]})}),e("div",{className:"col-span-5 col-end-13",children:e("div",{className:"flex items-center justify-end col-span-3 col-end-6 "})})]})})})},t))}),e("ul",{className:"flex items-center mt-10 gap-x-1",children:w.links.map((a,t)=>e("button",{disabled:a.url==null,className:`${a.url==null?"text-gray-500":"text-gray-800"} w-12 h-9 rounded-lg flex items-center justify-center border bg-white`,onClick:()=>f({...s,page:new URL(a.url).searchParams.get("page")}),children:a.label},t))})]})]})]})}ie.layout=g=>e(se,{children:g});export{ie as default};
