import{r as f,R as F}from"./app.b593357b.js";import{i as K,t as L,a as T,x as B,y as w,o as y,u as P,L as N,C as V,p as $,h as G,b as q,g as W,_ as k,I as E,d as Q,s as _,e as J,n as X,j as U,S as Y,B as Z,c as d,l as h,r as ee,m as te,v as re}from"./App.afa2c59f.js";import{e as oe}from"./form.0980e256.js";function H(e,a){let[r,t]=f.exports.useState(e),o=K(e);return L(()=>t(o.current),[o,t,...a]),r}var ne=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(ne||{}),ae=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(ae||{}),ie=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(ie||{}),le=(e=>(e[e.OpenListbox=0]="OpenListbox",e[e.CloseListbox=1]="CloseListbox",e[e.SetDisabled=2]="SetDisabled",e[e.SetOrientation=3]="SetOrientation",e[e.GoToOption=4]="GoToOption",e[e.Search=5]="Search",e[e.ClearSearch=6]="ClearSearch",e[e.RegisterOption=7]="RegisterOption",e[e.UnregisterOption=8]="UnregisterOption",e))(le||{});function M(e,a=r=>r){let r=e.activeOptionIndex!==null?e.options[e.activeOptionIndex]:null,t=re(a(e.options.slice()),n=>n.dataRef.current.domRef.current),o=r?t.indexOf(r):null;return o===-1&&(o=null),{options:t,activeOptionIndex:o}}let se={[1](e){return e.disabled||e.listboxState===1?e:{...e,activeOptionIndex:null,listboxState:1}},[0](e){if(e.disabled||e.listboxState===0)return e;let a=e.activeOptionIndex,{value:r,mode:t,compare:o}=e.propsRef.current,n=e.options.findIndex(s=>{let l=s.dataRef.current.value;return P(t,{[1]:()=>r.some(p=>o(p,l)),[0]:()=>o(r,l)})});return n!==-1&&(a=n),{...e,listboxState:0,activeOptionIndex:a}},[2](e,a){return e.disabled===a.disabled?e:{...e,disabled:a.disabled}},[3](e,a){return e.orientation===a.orientation?e:{...e,orientation:a.orientation}},[4](e,a){var r;if(e.disabled||e.listboxState===1)return e;let t=M(e),o=te(a,{resolveItems:()=>t.options,resolveActiveIndex:()=>t.activeOptionIndex,resolveId:n=>n.id,resolveDisabled:n=>n.dataRef.current.disabled});return{...e,...t,searchQuery:"",activeOptionIndex:o,activationTrigger:(r=a.trigger)!=null?r:1}},[5]:(e,a)=>{if(e.disabled||e.listboxState===1)return e;let r=e.searchQuery!==""?0:1,t=e.searchQuery+a.value.toLowerCase(),o=(e.activeOptionIndex!==null?e.options.slice(e.activeOptionIndex+r).concat(e.options.slice(0,e.activeOptionIndex+r)):e.options).find(s=>{var l;return!s.dataRef.current.disabled&&((l=s.dataRef.current.textValue)==null?void 0:l.startsWith(t))}),n=o?e.options.indexOf(o):-1;return n===-1||n===e.activeOptionIndex?{...e,searchQuery:t}:{...e,searchQuery:t,activeOptionIndex:n,activationTrigger:1}},[6](e){return e.disabled||e.listboxState===1||e.searchQuery===""?e:{...e,searchQuery:""}},[7]:(e,a)=>{let r={id:a.id,dataRef:a.dataRef},t=M(e,o=>[...o,r]);if(e.activeOptionIndex===null){let{value:o,mode:n,compare:s}=e.propsRef.current,l=a.dataRef.current.value;P(n,{[1]:()=>o.some(p=>s(p,l)),[0]:()=>s(o,l)})&&(t.activeOptionIndex=t.options.indexOf(r))}return{...e,...t}},[8]:(e,a)=>{let r=M(e,t=>{let o=t.findIndex(n=>n.id===a.id);return o!==-1&&t.splice(o,1),t});return{...e,...r,activationTrigger:1}}},j=f.exports.createContext(null);j.displayName="ListboxContext";function A(e){let a=f.exports.useContext(j);if(a===null){let r=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,A),r}return a}function ue(e,a){return P(a.type,se,e,a)}let pe=f.exports.Fragment,ce=T(function(e,a){let{value:r,name:t,onChange:o,disabled:n=!1,horizontal:s=!1,multiple:l=!1,...p}=e;const g=s?"horizontal":"vertical";let D=w(a),S=f.exports.useReducer(ue,{listboxState:1,propsRef:{current:{value:r,onChange:o,mode:l?1:0,compare:y((R,O)=>R===O)}},labelRef:f.exports.createRef(),buttonRef:f.exports.createRef(),optionsRef:f.exports.createRef(),disabled:n,orientation:g,options:[],searchQuery:"",activeOptionIndex:null,activationTrigger:1}),[{listboxState:v,propsRef:m,optionsRef:x,buttonRef:c},i]=S;m.current.value=r,m.current.mode=l?1:0,L(()=>{m.current.onChange=R=>P(m.current.mode,{[0](){return o(R)},[1](){let O=m.current.value.slice(),b=O.indexOf(R);return b===-1?O.push(R):O.splice(b,1),o(O)}})},[o,m]),L(()=>i({type:2,disabled:n}),[n]),L(()=>i({type:3,orientation:g}),[g]),N([c,x],(R,O)=>{var b;i({type:1}),Y(O,Z.Loose)||(R.preventDefault(),(b=c.current)==null||b.focus())},v===0);let u=f.exports.useMemo(()=>({open:v===0,disabled:n}),[v,n]),C={ref:D};return F.createElement(j.Provider,{value:S},F.createElement(V,{value:P(v,{[0]:$.Open,[1]:$.Closed})},t!=null&&r!=null&&oe({[t]:r}).map(([R,O])=>F.createElement(G,{features:q.Hidden,...W({key:R,as:"input",type:"hidden",hidden:!0,readOnly:!0,name:R,value:O})})),k({ourProps:C,theirProps:p,slot:u,defaultTag:pe,name:"Listbox"})))}),de="button",fe=T(function(e,a){var r;let[t,o]=A("Listbox.Button"),n=w(t.buttonRef,a),s=`headlessui-listbox-button-${E()}`,l=Q(),p=y(c=>{switch(c.key){case d.Space:case d.Enter:case d.ArrowDown:c.preventDefault(),o({type:0}),l.nextFrame(()=>{t.propsRef.current.value||o({type:4,focus:h.First})});break;case d.ArrowUp:c.preventDefault(),o({type:0}),l.nextFrame(()=>{t.propsRef.current.value||o({type:4,focus:h.Last})});break}}),g=y(c=>{switch(c.key){case d.Space:c.preventDefault();break}}),D=y(c=>{if(ee(c.currentTarget))return c.preventDefault();t.listboxState===0?(o({type:1}),l.nextFrame(()=>{var i;return(i=t.buttonRef.current)==null?void 0:i.focus({preventScroll:!0})})):(c.preventDefault(),o({type:0}))}),S=H(()=>{if(t.labelRef.current)return[t.labelRef.current.id,s].join(" ")},[t.labelRef.current,s]),v=f.exports.useMemo(()=>({open:t.listboxState===0,disabled:t.disabled}),[t]),m=e,x={ref:n,id:s,type:_(e,t.buttonRef),"aria-haspopup":!0,"aria-controls":(r=t.optionsRef.current)==null?void 0:r.id,"aria-expanded":t.disabled?void 0:t.listboxState===0,"aria-labelledby":S,disabled:t.disabled,onKeyDown:p,onKeyUp:g,onClick:D};return k({ourProps:x,theirProps:m,slot:v,defaultTag:de,name:"Listbox.Button"})}),ve="label",be=T(function(e,a){let[r]=A("Listbox.Label"),t=`headlessui-listbox-label-${E()}`,o=w(r.labelRef,a),n=y(()=>{var l;return(l=r.buttonRef.current)==null?void 0:l.focus({preventScroll:!0})}),s=f.exports.useMemo(()=>({open:r.listboxState===0,disabled:r.disabled}),[r]);return k({ourProps:{ref:o,id:t,onClick:n},theirProps:e,slot:s,defaultTag:ve,name:"Listbox.Label"})}),xe="ul",Re=B.RenderStrategy|B.Static,me=T(function(e,a){var r;let[t,o]=A("Listbox.Options"),n=w(t.optionsRef,a),s=`headlessui-listbox-options-${E()}`,l=Q(),p=Q(),g=J(),D=(()=>g!==null?g===$.Open:t.listboxState===0)();f.exports.useEffect(()=>{var i;let u=t.optionsRef.current;!u||t.listboxState===0&&u!==((i=X(u))==null?void 0:i.activeElement)&&u.focus({preventScroll:!0})},[t.listboxState,t.optionsRef]);let S=y(i=>{switch(p.dispose(),i.key){case d.Space:if(t.searchQuery!=="")return i.preventDefault(),i.stopPropagation(),o({type:5,value:i.key});case d.Enter:if(i.preventDefault(),i.stopPropagation(),t.activeOptionIndex!==null){let{dataRef:u}=t.options[t.activeOptionIndex];t.propsRef.current.onChange(u.current.value)}t.propsRef.current.mode===0&&(o({type:1}),U().nextFrame(()=>{var u;return(u=t.buttonRef.current)==null?void 0:u.focus({preventScroll:!0})}));break;case P(t.orientation,{vertical:d.ArrowDown,horizontal:d.ArrowRight}):return i.preventDefault(),i.stopPropagation(),o({type:4,focus:h.Next});case P(t.orientation,{vertical:d.ArrowUp,horizontal:d.ArrowLeft}):return i.preventDefault(),i.stopPropagation(),o({type:4,focus:h.Previous});case d.Home:case d.PageUp:return i.preventDefault(),i.stopPropagation(),o({type:4,focus:h.First});case d.End:case d.PageDown:return i.preventDefault(),i.stopPropagation(),o({type:4,focus:h.Last});case d.Escape:return i.preventDefault(),i.stopPropagation(),o({type:1}),l.nextFrame(()=>{var u;return(u=t.buttonRef.current)==null?void 0:u.focus({preventScroll:!0})});case d.Tab:i.preventDefault(),i.stopPropagation();break;default:i.key.length===1&&(o({type:5,value:i.key}),p.setTimeout(()=>o({type:6}),350));break}}),v=H(()=>{var i,u,C;return(C=(i=t.labelRef.current)==null?void 0:i.id)!=null?C:(u=t.buttonRef.current)==null?void 0:u.id},[t.labelRef.current,t.buttonRef.current]),m=f.exports.useMemo(()=>({open:t.listboxState===0}),[t]),x=e,c={"aria-activedescendant":t.activeOptionIndex===null||(r=t.options[t.activeOptionIndex])==null?void 0:r.id,"aria-multiselectable":t.propsRef.current.mode===1?!0:void 0,"aria-labelledby":v,"aria-orientation":t.orientation,id:s,onKeyDown:S,role:"listbox",tabIndex:0,ref:n};return k({ourProps:c,theirProps:x,slot:m,defaultTag:xe,features:Re,visible:D,name:"Listbox.Options"})}),Oe="li",ge=T(function(e,a){let{disabled:r=!1,value:t,...o}=e,[n,s]=A("Listbox.Option"),l=`headlessui-listbox-option-${E()}`,p=n.activeOptionIndex!==null?n.options[n.activeOptionIndex].id===l:!1,{value:g,compare:D}=n.propsRef.current,S=P(n.propsRef.current.mode,{[1]:()=>g.some(b=>D(b,t)),[0]:()=>D(g,t)}),v=f.exports.useRef(null),m=w(a,v);L(()=>{if(n.listboxState!==0||!p||n.activationTrigger===0)return;let b=U();return b.requestAnimationFrame(()=>{var I,z;(z=(I=v.current)==null?void 0:I.scrollIntoView)==null||z.call(I,{block:"nearest"})}),b.dispose},[v,p,n.listboxState,n.activationTrigger,n.activeOptionIndex]);let x=f.exports.useRef({disabled:r,value:t,domRef:v});L(()=>{x.current.disabled=r},[x,r]),L(()=>{x.current.value=t},[x,t]),L(()=>{var b,I;x.current.textValue=(I=(b=v.current)==null?void 0:b.textContent)==null?void 0:I.toLowerCase()},[x,v]);let c=y(()=>n.propsRef.current.onChange(t));L(()=>(s({type:7,id:l,dataRef:x}),()=>s({type:8,id:l})),[x,l]);let i=y(b=>{if(r)return b.preventDefault();c(),n.propsRef.current.mode===0&&(s({type:1}),U().nextFrame(()=>{var I;return(I=n.buttonRef.current)==null?void 0:I.focus({preventScroll:!0})}))}),u=y(()=>{if(r)return s({type:4,focus:h.Nothing});s({type:4,focus:h.Specific,id:l})}),C=y(()=>{r||p||s({type:4,focus:h.Specific,id:l,trigger:0})}),R=y(()=>{r||!p||s({type:4,focus:h.Nothing})}),O=f.exports.useMemo(()=>({active:p,selected:S,disabled:r}),[p,S,r]);return k({ourProps:{id:l,ref:m,role:"option",tabIndex:r===!0?void 0:-1,"aria-disabled":r===!0?!0:void 0,"aria-selected":S===!0?!0:void 0,disabled:void 0,onClick:i,onFocus:u,onPointerMove:C,onMouseMove:C,onPointerLeave:R,onMouseLeave:R},theirProps:o,slot:O,defaultTag:Oe,name:"Listbox.Option"})}),Ie=Object.assign(ce,{Button:fe,Label:be,Options:me,Option:ge});export{H as i,Ie as r};
