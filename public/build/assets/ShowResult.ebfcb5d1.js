import{B as b}from"./Button.b12371ff.js";import{A as E}from"./App.054084fc.js";import{j as a,F as j,a as e,e as y,r as x,H as B}from"./app.944f49db.js";import{A as F,E as M}from"./EditModal.a75c6d67.js";import{D as O}from"./DestroyModal.5b90e9c1.js";import"./clsx.m.256e9345.js";import"./XIcon.fca1a70c.js";import"./transition.2b43218d.js";import"./Tawarin.08057ae7.js";import"./ExclamationIcon.c4a098e9.js";function D({errors:t,submit:i,data:r,result:n,setData:o,closeButton:l}){var u;const d=m=>o({...r,[m.target.id]:m.target.value});return a(j,{children:[e("div",{className:"px-4 py-5 bg-white sm:p-6",children:e("div",{className:"grid grid-cols-6 gap-6",children:a("div",{className:"col-span-6",children:[e("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Keterangan"}),e("div",{className:"mt-1",children:e("textarea",{id:"description",name:"description",value:(u=r.description)!=null?u:"",onChange:d,rows:3,className:"block w-full mt-1 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"Masukan Deskripsi Revisi"})}),t&&e("div",{className:"mt-1 text-pink-500",children:t.description})]})})}),a("div",{className:"px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[e(b,{children:i}),e(b,{color:"pink",type:"button",onClick:l,children:"Cancel"})]})]})}function $({setIsOpenAddDialog:t,result:i}){const{data:r,setData:n,post:o,reset:l,errors:d}=y({description:"",plan_result_id:""});return e("form",{onSubmit:p=>{p.preventDefault(),o(route("plan.simpanrevisi",i),{data:r,onSuccess:()=>{l(),t(!1)}})},children:e(D,{errors:d,data:r,setData:n,submit:"Simpan",closeButton:p=>t(!1)})})}function z({setIsOpenEditDialog:t,model:i}){const{data:r,setData:n,put:o,reset:l,errors:d}=y({description:i.description,plan_result_id:i.plan_result_id}),u=p=>t(!1),m=p=>{p.preventDefault(),o(route("users.update",i.id),{data:r,onSuccess:()=>{l(),t(!1)}})};return x.exports.useEffect(()=>{n({...r,description:i.description,plan_result_id:i.plan_result_id})},[i]),e("form",{onSubmit:m,children:e(D,{errors:d,data:r,setData:n,submit:"Update",closeButton:u})})}function H({plan:t,dataplan:i,plan_master:r,plan_details:n}){const o=s=>{_(s),g(!0)},l=s=>{_(s),v(!0)},{data:d,setData:u,put:m,clearErrors:p,reset:S,errors:I}=y({}),R=s=>{s.preventDefault(),m(route("planresult.finish",f.result_id),{data:d,onSuccess:()=>{S(),v(!1)}})},[w,g]=x.exports.useState(!1),[k,N]=x.exports.useState(!1),[A,v]=x.exports.useState(!1),[f,_]=x.exports.useState([]);return a("div",{children:[e(B,{title:"Upload Hasil"}),e(F,{isOpenAddDialog:w,setIsOpenAddDialog:g,size:"2xl",title:"Revisi "+f.name,children:e($,{isOpenAddDialog:w,setIsOpenAddDialog:g,result:f.result_id})}),e(M,{isOpenEditDialog:k,setIsOpenEditDialog:N,size:"2xl",title:"Edit User",children:e(z,{model:f,isOpenEditDialog:k,setIsOpenEditDialog:N})}),e(O,{isOpenDestroyDialog:A,setIsOpenDestroyDialog:v,size:"2xl",title:"Tidak ada revisi untuk "+f.name+" ?",children:e(b,{onClick:R,children:"Selesai"})}),e("div",{className:"bg-white",children:e("div",{className:"grid items-start max-w-2xl grid-cols-1 px-4 py-4 mx-auto gap-y-8 gap-x-8 sm:px-6 sm:py-16 lg:max-w-7xl lg:grid-cols-2 lg:px-8",children:n.map((s,C)=>e(j,{children:i[s.slug]?e("div",{className:"mt-5 ",children:e("div",{className:"bg-white ",children:e("div",{children:e("div",{className:"mt-5 md:mt-0",children:e("div",{className:"shadow sm:rounded-md sm:overflow-hidden",children:e("div",{className:"px-4 py-5 space-y-6 bg-white sm:p-6",children:a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700",children:s.name}),a("div",{className:"relative flex justify-center px-6 pt-5 pb-6 mt-1 overflow-hidden border-2 border-gray-300 border-dashed rounded-md",children:[s.is_finish==1&&e("div",{className:"absolute top-0 right-0 w-16 h-16",children:e("div",{className:"absolute right-[-44px] top-[22px] w-[170px] transform rotate-45 bg-sky-100 text-center text-sky-900 font-semibold py-1",children:"Selesai"})}),a("div",{className:"w-full text-center",children:[i[s.slug].map((c,h)=>h<2&&e("div",{className:" shadow overflow-hidden rounded-xl col-span-3 max-h-[14rem]",children:e("img",{className:"object-cover w-full h-full ",src:`/storage/${c.id}/${c.file_name}`,alt:h})},c.id)),i[s.slug].map((c,h)=>h>1&&h<6&&e("div",{className:"shadow overflow-hidden rounded-xl col-span-2 max-h-[10rem]",children:e("img",{className:"object-cover w-full h-full ",src:`/storage/${c.id}/${c.file_name}`,alt:h})},c.id))]})]}),e("div",{className:"mt-1",children:e("textarea",{rows:3,className:"block w-full mt-1 border border-gray-300 rounded-md shadow-sm focus:ring-sky-500 focus:border-sky-500 sm:text-sm",placeholder:"",disabled:!0,defaultValue:"Ini adalah hasil "+s.name+" dari konsultan"})}),s.is_finish==1&&s.jumlah_pengajuan_revisi==0?e("div",{className:"py-3 sm:flex sm:flex-row-reverse",children:e("button",{type:"button",className:"inline-flex items-center justify-center w-full px-4 py-2 text-sm font-medium transition duration-150 ease-in-out border border-transparent rounded-md text-sky-900 bg-sky-100 hover:bg-sky-200 active:bg-sky-300 sm:ml-3 sm:w-auto sm:text-sm",children:"Tidak Ada Revisi"})}):"",s.is_finish==1&&s.jumlah_pengajuan_revisi>0?e("div",{className:"py-3 sm:flex sm:flex-row-reverse",children:e("button",{type:"button",className:"inline-flex items-center justify-center w-full px-4 py-2 text-sm font-medium transition duration-150 ease-in-out border border-transparent rounded-md text-sky-900 bg-sky-100 hover:bg-sky-200 active:bg-sky-300 sm:ml-3 sm:w-auto sm:text-sm",children:"Revisi Selesai"})}):"",s.is_finish==0&&s.jumlah_pengajuan_revisi>=s.jumlah_revisi?e("div",{className:"py-3 sm:flex sm:flex-row-reverse",children:a("button",{type:"button",className:"inline-flex items-center justify-center w-full px-4 py-2 text-sm font-medium transition duration-150 ease-in-out border border-transparent rounded-md text-sky-900 bg-sky-100 hover:bg-sky-200 active:bg-sky-300 sm:ml-3 sm:w-auto sm:text-sm",children:["Pengajuan Revisi Sudah"," ",s.jumlah_pengajuan_revisi," ","Kali"]})}):"",s.is_finish==0&&s.jumlah_pengajuan_revisi<s.jumlah_revisi?a("div",{className:"py-3 sm:flex sm:flex-row-reverse",children:[a("button",{onClick:()=>o(s),type:"submit",className:"inline-flex items-center justify-center w-full px-4 py-2 text-sm font-medium text-pink-900 transition duration-150 ease-in-out bg-pink-100 border border-transparent rounded-md hover:bg-pink-200 active:bg-pink-300 sm:ml-3 sm:w-auto sm:text-sm",tabIndex:0,children:["Ajukan Revisi Ke-",s.jumlah_pengajuan_revisi+1]}),a("button",{onClick:()=>l(s),type:"button",name:s.slug,id:s.slug,className:"inline-flex justify-center w-full px-4 py-2 mt-3 text-base font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:["Selesai"," ",s.name]})]}):""]})})})})})})},C):""}))})})]})}H.layout=t=>e(E,{children:t});export{H as default};
