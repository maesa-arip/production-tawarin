import{r as s,l as h,d as S,a as t,F as D,j as e,H as P}from"./app.c0487b97.js";import{A as H}from"./AppReservasi.4a1c0fda.js";import{C as I}from"./Container.32c4b3a4.js";import"./DatePicker.8c4bd224.js";import{H as T}from"./Header.1fa7904e.js";import"./DropdownMenu.f870501d.js";import"./clsx.m.256e9345.js";import"./transition.b636ea97.js";import"./use-event-listener.6968febd.js";import"./AsideReservasi.74ad7115.js";import"./Tawarin.08057ae7.js";const c=()=>e("svg",{className:"w-5 h-5 text-gray-500",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e("path",{fillRule:"evenodd",d:"M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z",clipRule:"evenodd"})}),o=()=>e("svg",{className:"w-5 h-5 text-gray-500",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})});function L(i){const{data:b,meta:g,filtered:y,attributes:m}=i.transactions,{data:x}=i.sumTransactions,N=i.employees,v=i.counters,[B,w]=s.exports.useState([]),[r,u]=s.exports.useState(y),[_,k]=s.exports.useState(!0),j=s.exports.useCallback(h.exports.debounce(a=>{S.Inertia.get(route(route().current()),{...h.exports.pickBy(a),page:a.page},{preserveState:!0,preserveScroll:!0})},150),[]);s.exports.useEffect(()=>{_?k(!1):j(r)},[r]),s.exports.useEffect(()=>{let a=[];for(let l=m.per_page;l<m.total/m.per_page;l=l+m.per_page)a.push(l);w(a)},[]);const p=a=>u({...r,[a.target.name]:a.target.value}),d=a=>{u({...r,field:a,direction:r.direction=="asc"?"desc":"asc"})},f=new Date().toLocaleDateString("en-CA");s.exports.useState(f[0]);const n=a=>new Intl.NumberFormat("id-ID").format(a),C=x.reduce((a,l)=>a+Number(l.total_price_user),0),R=x.reduce((a,l)=>a+Number(l.total_uang),0);return t(D,{children:[e(P,{title:"History"}),e(T,{title:"Rekapan",description:"Rekapan Perusahaan."}),e(I,{children:e("div",{className:"py-4",children:t("div",{className:"mx-auto",children:[e("div",{className:"flex items-center justify-end ",children:e("div",{className:"w-full",children:e("div",{className:"flex items-center justify-end mb-4 overflow-hidden gap-x-1",children:e("div",{className:"flex items-center transition duration-150 ease-in-out bg-white ",children:t("select",{name:"q",id:"q",onChange:p,value:r.q,className:"mb-2 transition duration-150 ease-in-out border-gray-300 rounded-lg form-select",children:[e("option",{selected:!0,children:"Semua Karyawan"}),N.map((a,l)=>e("option",{children:a.user.name},l))]})})})})}),e("div",{className:"flex items-center justify-end ",children:e("div",{className:"w-full",children:e("div",{className:"flex items-center justify-end mb-4 overflow-hidden gap-x-1",children:e("div",{className:"flex items-center transition duration-150 ease-in-out bg-white ",children:t("select",{name:"r",id:"r",onChange:p,value:r.r,className:"mb-2 transition duration-150 ease-in-out border-gray-300 rounded-lg form-select",children:[e("option",{selected:!0,children:"Semua Layanan"}),v.map((a,l)=>e("option",{children:a.name},l))]})})})})}),e("div",{className:"flex items-center justify-end ",children:e("div",{className:"w-full",children:t("div",{className:"flex items-center justify-end mb-4 overflow-hidden gap-x-1",children:[e("div",{className:"flex items-center px-2 transition duration-150 ease-in-out bg-white border border-gray-300 rounded-lg focus-within:border-blue-400 focus-within:ring-blue-200 focus-within:ring",children:e("input",{type:"date",name:"startDate",id:"startDate",defaultValue:f,onChange:p,value:r.startDate,className:"w-full border-0 focus:ring-0 form-text"})}),e("div",{className:"flex items-center px-2 transition duration-150 ease-in-out bg-white border border-gray-300 rounded-lg focus-within:border-blue-400 focus-within:ring-blue-200 focus-within:ring",children:e("input",{type:"date",name:"endDate",id:"endDate",defaultValue:f,onChange:p,value:r.endDate,className:"w-full border-0 focus:ring-0 form-text"})})]})})}),x.map((a,l)=>e("div",{className:"py-2",children:t("div",{className:"grid grid-cols-3 border border-gray-200 lg:items-center rounded-xl",children:[t("div",{className:"flex flex-col p-4",children:[e("h4",{className:"mb-2 text-gray-800"}),t("div",{className:"flex gap-x-1",children:[e("span",{className:"text-xl font-normal text-gray-800"}),e("p",{className:"text-base font-semibold text-gray-800",children:a.employee_name})]})]}),t("div",{className:"flex flex-col p-4",children:[e("div",{className:"flex justify-between",children:e("h4",{className:"mb-1 text-gray-800",children:"Pelanggan"})}),t("div",{className:"flex gap-x-1",children:[e("span",{className:"text-xl font-normal text-gray-800"}),e("p",{className:"text-xl font-semibold text-gray-800",children:a.total_customers})]})]}),t("div",{className:"flex flex-col p-4",children:[e("h4",{className:"mb-1 text-gray-800",children:"Harga"}),t("div",{className:"flex gap-x-1",children:[e("span",{className:"text-base font-normal text-gray-800",children:"Rp"}),e("p",{className:"text-xl font-semibold text-gray-800",children:n(a.total_price_user)})]})]})]},l)},l)),e("div",{className:"py-2",children:t("div",{className:"flex justify-between",children:[t("div",{className:"flex flex-col p-4 border border-gray-200 rounded-xl",children:[e("h4",{className:"mb-1 text-gray-800",children:"Total Pendapatan"}),t("div",{className:"flex gap-x-1",children:[e("span",{className:"text-base font-normal text-gray-800",children:"Rp"}),e("p",{className:"text-xl font-semibold text-gray-800",children:n(C)})]})]}),t("div",{className:"flex flex-col p-4 border border-gray-200 rounded-xl",children:[e("h4",{className:"mb-1 text-gray-800",children:"Total Bagi Hasil untuk Pekerja"}),t("div",{className:"flex gap-x-1",children:[e("span",{className:"text-base font-normal text-gray-800",children:"Rp"}),e("p",{className:"text-xl font-semibold text-gray-800",children:n(Math.abs(R))})]})]})]})}),e("div",{className:"flex flex-col mt-4",children:e("div",{className:"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8",children:e("div",{className:"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8",children:e("div",{className:"overflow-hidden border-b border-gray-200 shadow sm:rounded-lg",children:t("table",{className:"min-w-full divide-y divide-gray-200",children:[e("thead",{className:"bg-gray-50",children:t("tr",{children:[e("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-800 uppercase",children:e("div",{className:"flex items-center cursor-pointer gap-x-2",children:"#"})}),e("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-800 uppercase",children:t("div",{className:"flex items-center cursor-pointer gap-x-2",onClick:()=>d("employee_name"),children:["Nama Pekerja",r.field=="employee_name"&&r.direction=="asc"&&e(c,{}),r.field=="employee_name"&&r.direction=="desc"&&e(o,{})]})}),e("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-800 uppercase",children:t("div",{className:"flex items-center cursor-pointer gap-x-2",onClick:()=>d("counter_name"),children:["Nama Layanan",r.field=="counter_name"&&r.direction=="asc"&&e(c,{}),r.field=="counter_name"&&r.direction=="desc"&&e(o,{})]})}),e("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-800 uppercase",children:t("div",{className:"flex items-center cursor-pointer gap-x-2",onClick:()=>d("total_customers"),children:["Total Customer",r.field=="total_customers"&&r.direction=="asc"&&e(c,{}),r.field=="total_customers"&&r.direction=="desc"&&e(o,{})]})}),e("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-800 uppercase",children:t("div",{className:"flex items-center cursor-pointer gap-x-2",onClick:()=>d("total_price_user"),children:["Total Harga",r.field=="total_price_user"&&r.direction=="asc"&&e(c,{}),r.field=="total_price_user"&&r.direction=="desc"&&e(o,{})]})}),e("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-800 uppercase",children:t("div",{className:"flex items-center cursor-pointer gap-x-2",onClick:()=>d("total_jasa"),children:["Total Jasa",r.field=="total_jasa"&&r.direction=="asc"&&e(c,{}),r.field=="total_jasa"&&r.direction=="desc"&&e(o,{})]})}),e("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-800 uppercase",children:t("div",{className:"flex items-center cursor-pointer gap-x-2",onClick:()=>d("total_uang"),children:["Total Bagi Hasil",r.field=="total_uang"&&r.direction=="asc"&&e(c,{}),r.field=="total_uang"&&r.direction=="desc"&&e(o,{})]})})]})}),e("tbody",{className:"bg-white divide-y divide-gray-200",children:b.map((a,l)=>t("tr",{children:[e("td",{className:"px-6 py-4 whitespace-nowrap",children:g.from+l}),e("td",{className:"px-6 py-4 whitespace-nowrap",children:a.employee_name}),e("td",{className:"px-6 py-4 whitespace-nowrap",children:a.counter_name}),e("td",{className:"px-6 py-4 whitespace-nowrap",children:t("div",{className:"flex mt-1 rounded-md shadow-sm",children:[e("div",{className:"flex-1 block w-full px-4 py-1 text-base border border-r-0 border-gray-300 rounded-none rounded-l-md focus:border-indigo-500 focus:ring-indigo-500",children:a.total_customers}),e("span",{className:"inline-flex items-center px-3 text-base text-gray-500 border border-l-0 border-gray-300 rounded-r-md bg-gray-50",children:"Pelanggan"})]})}),e("td",{className:"px-6 py-4 whitespace-nowrap",children:t("div",{className:"flex mt-1 rounded-md shadow-sm",children:[e("span",{className:"inline-flex items-center px-3 text-base text-gray-500 border border-r-0 border-gray-300 rounded-l-md bg-gray-50",children:"Rp"}),e("div",{className:"flex-1 block w-full px-2 py-1 text-base border border-l-0 border-gray-300 rounded-none rounded-r-md focus:border-indigo-500 focus:ring-indigo-500",children:n(a.total_price_user)})]})}),e("td",{className:"px-6 py-4 whitespace-nowrap",children:t("div",{className:"flex mt-1 rounded-md shadow-sm",children:[e("span",{className:"inline-flex items-center px-3 text-base text-gray-500 border border-r-0 border-gray-300 rounded-l-md bg-gray-50",children:"Rp"}),e("div",{className:"flex-1 block w-full px-2 py-1 text-base border border-l-0 border-gray-300 rounded-none rounded-r-md focus:border-indigo-500 focus:ring-indigo-500",children:n(a.total_jasa)})]})}),e("td",{className:"px-6 py-4 whitespace-nowrap",children:t("div",{className:"flex mt-1 rounded-md shadow-sm",children:[e("span",{className:"inline-flex items-center px-3 text-base text-gray-500 border border-r-0 border-gray-300 rounded-l-md bg-gray-50",children:"Rp"}),e("div",{className:"flex-1 block w-full px-2 py-1 text-base border border-l-0 border-gray-300 rounded-none rounded-r-md focus:border-indigo-500 focus:ring-indigo-500",children:n(Math.abs(a.total_uang))})]})})]},l))})]})})})})}),e("ul",{className:"flex items-center mt-10 gap-x-1",children:g.links.map((a,l)=>e("button",{disabled:a.url==null,className:`${a.url==null?"text-gray-500":"text-gray-800"} w-12 h-9 rounded-lg flex items-center justify-center border bg-white`,onClick:()=>u({...r,page:new URL(a.url).searchParams.get("page")}),children:a.label},l))})]})})})]})}L.layout=i=>e(H,{children:i});export{L as default};
