import{r,b as R,a as s,F as n,j as e,H}from"./app.bc97968f.js";import{l as Y,n as w,w as F,o as J,k as W,f as X,p as V}from"./AsideReservasi.7a6f531d.js";import{A as G}from"./AppReservasi.22567fce.js";import"./CopyButton.c6ffb91c.js";import{I as x}from"./InfoModal.c47635a7.js";import{T as o}from"./ThirdButtonNoLink.21f326fd.js";import"./TextInputCheckbox.fa9a6a5c.js";import{T as Q}from"./TextAreaInput.2eef1552.js";import"./transition.3bfa50dc.js";import"./DropdownMenu.3c9a07f2.js";import"./clsx.m.256e9345.js";import"./use-event-listener.c313bc47.js";import"./Tawarin.08057ae7.js";import"./ExclamationIcon.3e8ea2f2.js";import"./dialog.c186cac8.js";import"./description.bb806fde.js";function U({auth:y,mustVerifyEmail:Z,status:$,myCustomers:v,appEnv:ee}){const[t,i]=r.exports.useState([]),[k,c]=r.exports.useState(!1),[I,d]=r.exports.useState(!1),[j,m]=r.exports.useState(!1),[D,p]=r.exports.useState(!1),{data:ae,setData:C,patch:se,post:le,put:h,processing:u,errors:ne,reset:oe}=R({}),S=a=>{C(a.target.name,a.target.type==="checkbox"?a.target.checked:a.target.value)},O=a=>{i(a),c(!0)},_=a=>{i(a),d(!0)},N=a=>{i(a),m(!0)},f=a=>{i(a),p(!0)},T=()=>{h(route("reservation.startservice",t.id),{onSuccess:()=>c(!1)})},B=()=>{h(route("reservation.finishservice",t.id),{onSuccess:()=>d(!1)})},P=()=>{h(route("reservation.declineanswer",t.id),{onSuccess:()=>m(!1)})},q=()=>{h(route("reservation.approvedanswer",t.id),{onSuccess:()=>p(!1)})},M=()=>{c(!1)},A=()=>{d(!1)},K=()=>{m(!1)},z=()=>{p(!1)};let g="";return s(n,{children:[s(x,{isOpenInfoDialog:k,setIsOpenInfoDialog:c,size:"2xl",closeButton:"false",title:"Yakin Mulai Pelayanan ?",children:[e(o,{processing:u,onClick:T,children:"Mulai"}),e(o,{className:"mx-2 mt-2",color:"secondary",onClick:M,children:"Close"})]}),s(x,{isOpenInfoDialog:I,setIsOpenInfoDialog:d,size:"2xl",closeButton:"false",title:"Yakin Selesaikan Pelayanan ?",children:[e(o,{processing:u,onClick:B,children:"Selesai"}),e(o,{className:"mx-2 mt-2",color:"secondary",onClick:A,children:"Close"})]}),s(x,{isOpenInfoDialog:j,setIsOpenInfoDialog:m,size:"2xl",closeButton:"false",title:"Yakin Tolak Jawaban Pelanggan ?",children:[e(Q,{placeholder:"Komentar",name:"pekerja_comment",handleChange:S}),e(o,{processing:u,onClick:P,color:"danger",children:"Tolak"}),e(o,{className:"mx-2 mt-2",color:"secondary",onClick:K,children:"Close"})]}),s(x,{isOpenInfoDialog:D,setIsOpenInfoDialog:p,size:"2xl",closeButton:"false",title:"Yakin Terima Jawaban Pelanggan ?",children:[t.request_approved==1?s("div",{className:"col-span-12 px-3 py-4 mb-6 text-sm text-gray-500 rounded shadow md:col-span-8",children:[s("svg",{xmlns:"http://www.w3.org/2000/svg",className:"justify-center inline w-6 h-6 mr-3 -mt-1 text-center text-white rounded-full bg-gradient-to-r from-yellow-300 via-yellow-500 to-yellow-600 icon icon-tabler icon-tabler-info-circle",width:24,height:24,viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[e("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e("circle",{cx:12,cy:12,r:9}),e("line",{x1:12,y1:8,x2:"12.01",y2:8}),e("polyline",{points:"11 12 12 12 12 16 13 16"})]}),e("span",{className:"text-lg font-semibold text-left",children:t.customer_comment})]}):e(n,{}),e(o,{processing:u,onClick:q,children:"Terima"}),e(o,{className:"mx-2 mt-2",color:"secondary",onClick:z,children:"Close"})]}),e(H,{title:"Profile"}),e("div",{className:"py-12",children:e("div",{className:"mx-auto space-y-6 sm:px-6 lg:px-8",children:s("div",{className:"p-4 bg-white shadow sm:p-8 dark:bg-gray-800 sm:rounded-lg",children:[e("div",{className:"p-8 border border-gray-200 rounded-2xl",children:e("div",{className:"flex justify-center mb-2 text-lg",children:"Pelanggan Saya"})}),v.map((a,E)=>{var b;return e("div",{className:"py-5",children:e("div",{className:"p-2 duration-150 bg-white rounded-lg shadow cursor-pointer",children:s("div",{children:[s("div",{className:"flex items-center justify-between px-4 my-6",children:[e("p",{className:"font-bold text-gray-500",children:"Nama Layanan"}),s("p",{className:"rounded-full bg-blue-500 px-2 py-0.5 text-xs font-semibold text-white",children:[a.counterCategoryName," ",a.counterName]})]}),s("div",{className:"flex items-center justify-between px-4 my-4",children:[e("p",{className:"text-sm font-semibold text-gray-500",children:"Kode Bukti"}),e("p",{className:"rounded-full bg-gray-200 px-2 py-0.5 text-xs font-semibold text-gray-600",children:a.code})]}),s("div",{className:"flex items-center justify-between px-4 my-4",children:[e("p",{className:"text-sm font-semibold text-gray-500",children:"Tanggal Reservasi"}),e("p",{className:"rounded-full bg-gray-200 px-2 py-0.5 text-xs font-semibold text-gray-600",children:a.date})]}),s("div",{className:"flex items-center justify-between px-4 my-4",children:[e("p",{className:"text-sm font-semibold text-gray-500",children:"Jam Reservasi"}),e("p",{className:"rounded-full bg-gray-200 px-2 py-0.5 text-xs font-semibold text-gray-600",children:a.time})]}),s("div",{className:"flex items-center justify-between px-4 my-4",children:[e("p",{className:"text-sm font-semibold text-gray-500",children:"Nama Pelanggan"}),e("p",{className:"rounded-full bg-gray-200 px-2 py-0.5 text-xs font-semibold text-gray-600",children:a.user.name})]}),a.complaint==1?s("div",{className:"flex items-center justify-between px-4 my-4",children:[e("p",{className:"text-sm font-semibold text-gray-500",children:"Alasan Komplain"}),e("p",{className:"rounded-full bg-red-200 px-2 py-0.5 text-xs font-semibold text-red-600",children:a.complaint_reason})]}):e(n,{}),a.answers.map((l,L)=>s("div",{className:"grid grid-cols-12 gap-1",children:[e("div",{className:"col-span-10 p-1 mt-2 duration-150 bg-white rounded-lg shadow cursor-pointer ",children:e("div",{children:s("div",{className:"flex items-center justify-between ",children:[e("p",{className:"text-sm font-semibold text-gray-500",children:l.question.question}),e("p",{className:"rounded-full bg-gray-200 px-2 py-0.5 text-xs font-semibold text-gray-600",children:l.description}),l.request_approved==1?e("p",{className:"rounded-full bg-gray-200 px-2 py-0.5 text-xs font-semibold text-yellow-600",children:l.customer_comment}):e(n,{})]})})}),l.approved==0&&l.decline==0&&l.request_approved==0?s(n,{children:[e("div",{className:"col-span-1 p-1 mx-auto mt-2 duration-150 bg-white rounded-lg shadow cursor-pointer ",children:e("div",{children:e("div",{className:"flex items-center justify-between ",children:e("p",{className:"text-sm font-semibold text-red-500",children:e(Y,{onClick:()=>N(l)})})})})}),e("div",{className:"col-span-1 p-1 mx-auto mt-2 duration-150 bg-white rounded-lg shadow cursor-pointer ",children:e("div",{children:e("div",{className:"flex items-center justify-between ",children:e("p",{className:"text-sm font-semibold text-green-500",children:e(w,{onClick:()=>f(l)})})})})})]}):e(n,{}),l.approved==1?e(n,{children:e("div",{className:"col-span-1 p-1 mx-auto mt-2 duration-150 bg-white rounded-lg shadow cursor-pointer ",children:e("div",{children:e("div",{className:"flex items-center justify-between ",children:e("p",{className:"text-sm font-semibold text-green-500",children:e(w,{onClick:()=>f(l)})})})})})}):e(n,{}),l.decline==1&&l.request_approved==1&&l.approved==0?e(n,{children:e("div",{className:"col-span-1 p-1 mx-auto mt-2 duration-150 bg-white rounded-lg shadow cursor-pointer ",children:e("div",{children:e("div",{className:"flex items-center justify-between ",children:e("p",{className:"text-sm font-semibold text-yellow-500",children:e(F,{onClick:()=>f(l)})})})})})}):e(n,{}),l.decline==1&&l.approved==0?e(n,{children:e("div",{className:"col-span-1 p-1 mx-auto mt-2 duration-150 bg-white rounded-lg shadow cursor-pointer ",children:e("div",{children:e("div",{className:"flex items-center justify-between ",children:e("p",{className:"text-sm font-semibold text-red-500",children:e(J,{onClick:()=>N(l)})})})})})}):e(n,{})]},L)),a.batal_customer==1?s("div",{className:"flex items-center justify-between px-4 my-4",children:[e("p",{className:"text-sm font-semibold text-gray-500",children:"Alasan Batal"}),e("p",{className:"rounded-full bg-red-200 px-2 py-0.5 text-xs font-semibold text-red-600",children:a.alasan_batal_customer})]}):e(n,{}),e("div",{className:"flex items-center px-4 my-4 justify-evenly",children:a.batal_customer==1?s(o,{className:"cursor-not-allowed",color:"red",children:["Sudah dibatalkan"," ",e(W,{className:"w-4 h-4"})]}):a.selesai_customer==1?s(n,{children:[s(o,{color:"teal",className:"cursor-not-allowed",children:["BERES"," ",e(X,{className:"w-5 h-5 ml-2"})]}),e("div",{className:"hidden",children:((b=a.user.phone)==null?void 0:b.charAt(0))==="0"?g=a.user.phone.slice(1):g=a.user.phone}),e("a",{className:"inline-flex items-center px-3 py-2 mr-1 text-xs font-semibold text-yellow-600 rounded-md bg-yellow-50 ring-yellow-500/10 ring-1 ring-inset",href:"https://wa.me/62"+g+"?text=Terima kasih telah berbelanja Rp. "+a.team.counter.price.toLocaleString("id-ID")+" di "+a.team.counter.company.name+", cek struk di https://tawarin.id/ereceipt/"+a.code,"data-action":"share/whatsapp/share",children:"Kirim Nota via Whatsapp"})]}):e(n,{children:a.selesai_team==1?e(o,{color:"yellow",className:"cursor-not-allowed",children:"Menunggu Konfirmasi Pelanggan"}):a.complaint==1?s(o,{color:"red",className:"cursor-not-allowed",children:["Pelanggan Komplain"," ",e(V,{className:"w-5 h-5 ml-2"})]}):s(n,{children:[a.dikerjakan==1?e(o,{children:"Sedang dikerjakan ..."}):e(o,{onClick:a.leader===1?()=>O(a):void 0,className:a.leader===1?"":"cursor-not-allowed",children:"Mulai"}),a.dikerjakan==1?e(o,{onClick:a.leader===1?()=>_(a):void 0,className:a.leader===1?"":"cursor-not-allowed",color:"cyan",children:"Selesai"}):e(o,{color:"gray",className:"cursor-not-allowed",children:"Selesai"})]})})})]})})},E)})]})})})]})}U.layout=y=>e(G,{children:y});export{U as default};
