import{r as d,R as j,a as l,j as x,l as Q,F as J,e as G,L as B}from"./app.18faa3d5.js";import{P as X}from"./Pagination.d1845432.js";import{c as Y,t as N,H as D,x as V,y as T,o as O,u as I,j as Z,m as ee,i as W,g as te,_ as M,I as $,l as H,s as re,h as ae,f as oe,k as U,S as ne,v as le,a as v,w as k,r as ie,z as se,B as ce,C as ue,W as F,A as de}from"./App.46048341.js";import{h as pe,s as fe}from"./hidden.6d544f51.js";import{e as ve}from"./form.0980e256.js";import{W as xe}from"./transition.c3af983d.js";import"./clsx.m.ff2a78c3.js";function q(e,o){let[r,t]=d.exports.useState(e),n=Y(e);return N(()=>t(n.current),[n,t,...o]),r}var be=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(be||{}),me=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(me||{}),he=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(he||{}),ge=(e=>(e[e.OpenListbox=0]="OpenListbox",e[e.CloseListbox=1]="CloseListbox",e[e.SetDisabled=2]="SetDisabled",e[e.SetOrientation=3]="SetOrientation",e[e.GoToOption=4]="GoToOption",e[e.Search=5]="Search",e[e.ClearSearch=6]="ClearSearch",e[e.RegisterOption=7]="RegisterOption",e[e.UnregisterOption=8]="UnregisterOption",e))(ge||{});function E(e,o=r=>r){let r=e.activeOptionIndex!==null?e.options[e.activeOptionIndex]:null,t=ce(o(e.options.slice()),a=>a.dataRef.current.domRef.current),n=r?t.indexOf(r):null;return n===-1&&(n=null),{options:t,activeOptionIndex:n}}let we={[1](e){return e.disabled||e.listboxState===1?e:{...e,activeOptionIndex:null,listboxState:1}},[0](e){if(e.disabled||e.listboxState===0)return e;let o=e.activeOptionIndex,{value:r,mode:t,compare:n}=e.propsRef.current,a=e.options.findIndex(u=>{let s=u.dataRef.current.value;return I(t,{[1]:()=>r.some(i=>n(i,s)),[0]:()=>n(r,s)})});return a!==-1&&(o=a),{...e,listboxState:0,activeOptionIndex:o}},[2](e,o){return e.disabled===o.disabled?e:{...e,disabled:o.disabled}},[3](e,o){return e.orientation===o.orientation?e:{...e,orientation:o.orientation}},[4](e,o){var r;if(e.disabled||e.listboxState===1)return e;let t=E(e),n=se(o,{resolveItems:()=>t.options,resolveActiveIndex:()=>t.activeOptionIndex,resolveId:a=>a.id,resolveDisabled:a=>a.dataRef.current.disabled});return{...e,...t,searchQuery:"",activeOptionIndex:n,activationTrigger:(r=o.trigger)!=null?r:1}},[5]:(e,o)=>{if(e.disabled||e.listboxState===1)return e;let r=e.searchQuery!==""?0:1,t=e.searchQuery+o.value.toLowerCase(),n=(e.activeOptionIndex!==null?e.options.slice(e.activeOptionIndex+r).concat(e.options.slice(0,e.activeOptionIndex+r)):e.options).find(u=>{var s;return!u.dataRef.current.disabled&&((s=u.dataRef.current.textValue)==null?void 0:s.startsWith(t))}),a=n?e.options.indexOf(n):-1;return a===-1||a===e.activeOptionIndex?{...e,searchQuery:t}:{...e,searchQuery:t,activeOptionIndex:a,activationTrigger:1}},[6](e){return e.disabled||e.listboxState===1||e.searchQuery===""?e:{...e,searchQuery:""}},[7]:(e,o)=>{let r={id:o.id,dataRef:o.dataRef},t=E(e,n=>[...n,r]);if(e.activeOptionIndex===null){let{value:n,mode:a,compare:u}=e.propsRef.current,s=o.dataRef.current.value;I(a,{[1]:()=>n.some(i=>u(i,s)),[0]:()=>u(n,s)})&&(t.activeOptionIndex=t.options.indexOf(r))}return{...e,...t}},[8]:(e,o)=>{let r=E(e,t=>{let n=t.findIndex(a=>a.id===o.id);return n!==-1&&t.splice(n,1),t});return{...e,...r,activationTrigger:1}}},K=d.exports.createContext(null);K.displayName="ListboxContext";function A(e){let o=d.exports.useContext(K);if(o===null){let r=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,A),r}return o}function ye(e,o){return I(o.type,we,e,o)}let Re=d.exports.Fragment,Oe=D(function(e,o){let{value:r,name:t,onChange:n,disabled:a=!1,horizontal:u=!1,multiple:s=!1,...i}=e;const h=u?"horizontal":"vertical";let C=T(o),S=d.exports.useReducer(ye,{listboxState:1,propsRef:{current:{value:r,onChange:n,mode:s?1:0,compare:O((w,R)=>w===R)}},labelRef:d.exports.createRef(),buttonRef:d.exports.createRef(),optionsRef:d.exports.createRef(),disabled:a,orientation:h,options:[],searchQuery:"",activeOptionIndex:null,activationTrigger:1}),[{listboxState:b,propsRef:y,optionsRef:g,buttonRef:f},c]=S;y.current.value=r,y.current.mode=s?1:0,N(()=>{y.current.onChange=w=>I(y.current.mode,{[0](){return n(w)},[1](){let R=y.current.value.slice(),m=R.indexOf(w);return m===-1?R.push(w):R.splice(m,1),n(R)}})},[n,y]),N(()=>c({type:2,disabled:a}),[a]),N(()=>c({type:3,orientation:h}),[h]),Z([f,g],(w,R)=>{var m;c({type:1}),ne(R,le.Loose)||(w.preventDefault(),(m=f.current)==null||m.focus())},b===0);let p=d.exports.useMemo(()=>({open:b===0,disabled:a}),[b,a]),P={ref:C};return j.createElement(K.Provider,{value:S},j.createElement(ee,{value:I(b,{[0]:W.Open,[1]:W.Closed})},t!=null&&r!=null&&ve({[t]:r}).map(([w,R])=>j.createElement(pe,{features:fe.Hidden,...te({key:w,as:"input",type:"hidden",hidden:!0,readOnly:!0,name:w,value:R})})),M({ourProps:P,theirProps:i,slot:p,defaultTag:Re,name:"Listbox"})))}),Se="button",ke=D(function(e,o){var r;let[t,n]=A("Listbox.Button"),a=T(t.buttonRef,o),u=`headlessui-listbox-button-${$()}`,s=H(),i=O(f=>{switch(f.key){case v.Space:case v.Enter:case v.ArrowDown:f.preventDefault(),n({type:0}),s.nextFrame(()=>{t.propsRef.current.value||n({type:4,focus:k.First})});break;case v.ArrowUp:f.preventDefault(),n({type:0}),s.nextFrame(()=>{t.propsRef.current.value||n({type:4,focus:k.Last})});break}}),h=O(f=>{switch(f.key){case v.Space:f.preventDefault();break}}),C=O(f=>{if(ie(f.currentTarget))return f.preventDefault();t.listboxState===0?(n({type:1}),s.nextFrame(()=>{var c;return(c=t.buttonRef.current)==null?void 0:c.focus({preventScroll:!0})})):(f.preventDefault(),n({type:0}))}),S=q(()=>{if(t.labelRef.current)return[t.labelRef.current.id,u].join(" ")},[t.labelRef.current,u]),b=d.exports.useMemo(()=>({open:t.listboxState===0,disabled:t.disabled}),[t]),y=e,g={ref:a,id:u,type:re(e,t.buttonRef),"aria-haspopup":!0,"aria-controls":(r=t.optionsRef.current)==null?void 0:r.id,"aria-expanded":t.disabled?void 0:t.listboxState===0,"aria-labelledby":S,disabled:t.disabled,onKeyDown:i,onKeyUp:h,onClick:C};return M({ourProps:g,theirProps:y,slot:b,defaultTag:Se,name:"Listbox.Button"})}),Le="label",Ne=D(function(e,o){let[r]=A("Listbox.Label"),t=`headlessui-listbox-label-${$()}`,n=T(r.labelRef,o),a=O(()=>{var s;return(s=r.buttonRef.current)==null?void 0:s.focus({preventScroll:!0})}),u=d.exports.useMemo(()=>({open:r.listboxState===0,disabled:r.disabled}),[r]);return M({ourProps:{ref:n,id:t,onClick:a},theirProps:e,slot:u,defaultTag:Le,name:"Listbox.Label"})}),Ce="ul",Ie=V.RenderStrategy|V.Static,Pe=D(function(e,o){var r;let[t,n]=A("Listbox.Options"),a=T(t.optionsRef,o),u=`headlessui-listbox-options-${$()}`,s=H(),i=H(),h=ae(),C=(()=>h!==null?h===W.Open:t.listboxState===0)();d.exports.useEffect(()=>{var c;let p=t.optionsRef.current;!p||t.listboxState===0&&p!==((c=oe(p))==null?void 0:c.activeElement)&&p.focus({preventScroll:!0})},[t.listboxState,t.optionsRef]);let S=O(c=>{switch(i.dispose(),c.key){case v.Space:if(t.searchQuery!=="")return c.preventDefault(),c.stopPropagation(),n({type:5,value:c.key});case v.Enter:if(c.preventDefault(),c.stopPropagation(),t.activeOptionIndex!==null){let{dataRef:p}=t.options[t.activeOptionIndex];t.propsRef.current.onChange(p.current.value)}t.propsRef.current.mode===0&&(n({type:1}),U().nextFrame(()=>{var p;return(p=t.buttonRef.current)==null?void 0:p.focus({preventScroll:!0})}));break;case I(t.orientation,{vertical:v.ArrowDown,horizontal:v.ArrowRight}):return c.preventDefault(),c.stopPropagation(),n({type:4,focus:k.Next});case I(t.orientation,{vertical:v.ArrowUp,horizontal:v.ArrowLeft}):return c.preventDefault(),c.stopPropagation(),n({type:4,focus:k.Previous});case v.Home:case v.PageUp:return c.preventDefault(),c.stopPropagation(),n({type:4,focus:k.First});case v.End:case v.PageDown:return c.preventDefault(),c.stopPropagation(),n({type:4,focus:k.Last});case v.Escape:return c.preventDefault(),c.stopPropagation(),n({type:1}),s.nextFrame(()=>{var p;return(p=t.buttonRef.current)==null?void 0:p.focus({preventScroll:!0})});case v.Tab:c.preventDefault(),c.stopPropagation();break;default:c.key.length===1&&(n({type:5,value:c.key}),i.setTimeout(()=>n({type:6}),350));break}}),b=q(()=>{var c,p,P;return(P=(c=t.labelRef.current)==null?void 0:c.id)!=null?P:(p=t.buttonRef.current)==null?void 0:p.id},[t.labelRef.current,t.buttonRef.current]),y=d.exports.useMemo(()=>({open:t.listboxState===0}),[t]),g=e,f={"aria-activedescendant":t.activeOptionIndex===null||(r=t.options[t.activeOptionIndex])==null?void 0:r.id,"aria-multiselectable":t.propsRef.current.mode===1?!0:void 0,"aria-labelledby":b,"aria-orientation":t.orientation,id:u,onKeyDown:S,role:"listbox",tabIndex:0,ref:a};return M({ourProps:f,theirProps:g,slot:y,defaultTag:Ce,features:Ie,visible:C,name:"Listbox.Options"})}),De="li",Te=D(function(e,o){let{disabled:r=!1,value:t,...n}=e,[a,u]=A("Listbox.Option"),s=`headlessui-listbox-option-${$()}`,i=a.activeOptionIndex!==null?a.options[a.activeOptionIndex].id===s:!1,{value:h,compare:C}=a.propsRef.current,S=I(a.propsRef.current.mode,{[1]:()=>h.some(m=>C(m,t)),[0]:()=>C(h,t)}),b=d.exports.useRef(null),y=T(o,b);N(()=>{if(a.listboxState!==0||!i||a.activationTrigger===0)return;let m=U();return m.requestAnimationFrame(()=>{var L,_;(_=(L=b.current)==null?void 0:L.scrollIntoView)==null||_.call(L,{block:"nearest"})}),m.dispose},[b,i,a.listboxState,a.activationTrigger,a.activeOptionIndex]);let g=d.exports.useRef({disabled:r,value:t,domRef:b});N(()=>{g.current.disabled=r},[g,r]),N(()=>{g.current.value=t},[g,t]),N(()=>{var m,L;g.current.textValue=(L=(m=b.current)==null?void 0:m.textContent)==null?void 0:L.toLowerCase()},[g,b]);let f=O(()=>a.propsRef.current.onChange(t));N(()=>(u({type:7,id:s,dataRef:g}),()=>u({type:8,id:s})),[g,s]);let c=O(m=>{if(r)return m.preventDefault();f(),a.propsRef.current.mode===0&&(u({type:1}),U().nextFrame(()=>{var L;return(L=a.buttonRef.current)==null?void 0:L.focus({preventScroll:!0})}))}),p=O(()=>{if(r)return u({type:4,focus:k.Nothing});u({type:4,focus:k.Specific,id:s})}),P=O(()=>{r||i||u({type:4,focus:k.Specific,id:s,trigger:0})}),w=O(()=>{r||!i||u({type:4,focus:k.Nothing})}),R=d.exports.useMemo(()=>({active:i,selected:S,disabled:r}),[i,S,r]);return M({ourProps:{id:s,ref:y,role:"option",tabIndex:r===!0?void 0:-1,"aria-disabled":r===!0?!0:void 0,"aria-selected":S===!0?!0:void 0,disabled:void 0,onClick:c,onFocus:p,onPointerMove:P,onMouseMove:P,onPointerLeave:w,onMouseLeave:w},theirProps:n,slot:R,defaultTag:De,name:"Listbox.Option"})}),z=Object.assign(Oe,{Button:ke,Label:Ne,Options:Pe,Option:Te});function Me({categories:e,initialState:o}){const[r,t]=d.exports.useState(o);return l("div",{className:"w-full lg:w-52",children:l(z,{value:r,onChange:a=>{t(a),G.Inertia.get("/toko/products/table",{category:a},{preserveState:!0})},children:x("div",{className:"relative rounded-lg shadow",children:[x(z.Button,{className:"relative w-full h-10 pl-3 pr-10 text-left bg-white rounded-lg cursor-default focus:outline-none focus-visible:ring-2 focus-visible:ring-opacity-75 focus-visible:ring-white focus-visible:ring-offset-orange-300 focus-visible:ring-offset-2 focus-visible:border-indigo-500 sm:text-sm",children:[l("span",{className:"block truncate",children:o?Q.exports.find(e,a=>a.slug==r).name:"Choose a Category"}),l("span",{className:"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none",children:l("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor",children:l("path",{fillRule:"evenodd",d:"M10 3a1 1 0 01.707.293l3 3a1 1 0 01-1.414 1.414L10 5.414 7.707 7.707a1 1 0 01-1.414-1.414l3-3A1 1 0 0110 3zm-3.707 9.293a1 1 0 011.414 0L10 14.586l2.293-2.293a1 1 0 011.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),l(xe,{as:d.exports.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:l(z.Options,{className:"absolute w-full py-1 mt-1 overflow-auto text-base bg-white rounded-md shadow-lg max-h-60 ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm",children:e.map((a,u)=>l(z.Option,{className:({active:s})=>`${s?"text-blue-900 bg-blue-100":"text-gray-900"}
                          cursor-default select-none relative py-2 pl-10 pr-4`,value:a.slug,children:({selected:s,active:i})=>x(J,{children:[l("span",{className:`${s?"font-medium":"font-normal"} block truncate`,children:a.name}),s?l("span",{className:`text-blue-600
                                absolute inset-y-0 left-0 flex items-center pl-3`,children:l("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:l("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}):null]})},u))})})]})})})}const Ae=[{label:"latest",value:"latest"},{label:"oldest",value:"oldest"}];function Fe(e){const{filter:o,categories:r}=e,{data:t,meta:n}=e.products,[a,u]=d.exports.useState(o.search),s=d.exports.useCallback(Q.exports.debounce(i=>{G.Inertia.get("/toko/products/table",{...Q.exports.pickBy({search:i,page:o.page,filtered:o.filtered,category:o.category})},{preserveState:!0})},500),[]);return d.exports.useEffect(()=>s(a),[a]),l(ue,{children:x("div",{className:"space-y-4",children:[x("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-2 w-full",children:[x("div",{className:"flex flex-col lg:flex-row lg:items-center gap-2",children:[x(F,{as:"div",className:"relative",children:[x(F.Button,{className:"capitalize focus:outline-none bg-white rounded-lg px-4 w-full lg:w-52 py-2 shadow flex items-center justify-between",children:[o.filtered=="popular-this-week"?"Popular This Week":o.filtered=="no-replies"?"No Replies":o.filtered?o.filtered:"Filter",l("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor",children:l("path",{fillRule:"evenodd",d:"M10 3a1 1 0 01.707.293l3 3a1 1 0 01-1.414 1.414L10 5.414 7.707 7.707a1 1 0 01-1.414-1.414l3-3A1 1 0 0110 3zm-3.707 9.293a1 1 0 011.414 0L10 14.586l2.293-2.293a1 1 0 011.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})})]}),l(F.Items,{className:"absolute mt-1 w-52 z-50 bg-white shadow rounded-lg overflow-hidden py-0.5",children:Ae.map((i,h)=>i.label=="line"?l("div",{className:"h-px bg-gray-200 my-0.5 w-full"},h):l(F.Item,{children:l(B,{preserveState:!0,className:"block px-4 py-2 hover:bg-gray-100 font-medium capitalize text-sm",href:`/toko/products/table?filtered=${i.value}`,children:i.label})},h))})]}),l(Me,{categories:r,initialState:o.category})]}),x("div",{className:"bg-white flex items-center overflow-hidden shadow rounded-lg px-2",children:[l("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1.5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),l("input",{className:"h-10 p-0 focus:outline-none focus:ring-transparent focus:border-transparent border-0",type:"text",placeholder:"Search...",name:"search",id:"search",value:a,onChange:i=>u(i.target.value)})]})]}),t.length?t.map(i=>x("div",{className:"bg-white flex gap-x-4 p-4 rounded-lg shadow",children:[l("div",{className:"flex-shrink-0",children:l("img",{className:"w-10 h-10 rounded-full",src:i.picture,alt:i.name})}),x("div",{className:"w-full",children:[l("div",{className:"flex items-center justify-between",children:l(B,{href:route("products.show",i.slug),children:l("h1",{children:i.name})})}),l("div",{className:"leading-relaxed text-sm mb-3 text-gray-500",children:i.teaser}),x("div",{className:"flex items-center justify-between",children:[x("div",{className:"flex items-center text-sm gap-x-4",children:[l(B,{href:`/toko/products/table?category=${i.category.slug}`,className:"hidden md:block text-gray-500 font-semibold text-sm",children:i.category.name}),l("span",{className:"text-gray-500 hidden md:block",children:i.created_at})]}),x("div",{className:"flex items-center text-sm gap-x-4",children:[x("span",{children:[l("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-500 inline",viewBox:"0 0 20 20",fill:"currentColor",children:l("path",{fillRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z",clipRule:"evenodd"})}),l("span",{className:"ml-1",children:i.likes_count})]}),x("span",{children:[l("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-500 inline",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),l("span",{className:"ml-1",children:i.replies_count})]})]})]})]})]},i.id)):l("div",{className:"bg-white border border-dashed p-10 text-center text-gray-800 rounded-2xl",children:"No products."}),l(X,{meta:n})]})})}Fe.layout=e=>l(de,{children:e});export{Fe as default};
