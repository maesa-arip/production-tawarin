import{r as a,l as p,d as u,j as t,F as n,a as e,H as k,L as d}from"./app.f8e30c63.js";import{A as j}from"./App.0033b8d4.js";import{C as D}from"./Container.ca6022b0.js";import{D as L}from"./DestroyModal.b90e0fe2.js";import{B as P}from"./Button.e1c069b7.js";import{n as S}from"./helper.e37a4314.js";import{N as h}from"./XIcon.7d40b7c9.js";import"./Dropdown.e673dfd6.js";import{D as r}from"./DropdownMobile.a587bb9d.js";import{U as $,w as C}from"./Navbar.edd59422.js";import"./index.15b4b860.js";import"./ExclamationIcon.2dba6588.js";import"./transition.7f1431d2.js";import"./render.ec3e30a3.js";import"./clsx.m.256e9345.js";import"./keyboard.beac6fa7.js";import"./DropdownMenu.4c4cbc68.js";import"./hidden.1e1f4d6e.js";import"./description.0a8c3a30.js";import"./Tawarin.08057ae7.js";function H(l){const{data:f,meta:T,filtered:g,attributes:o}=l.plans;l.planRejectCount,l.permissions;const[E,b]=a.exports.useState([]),[m,I]=a.exports.useState(g),x=a.exports.useCallback(p.exports.debounce(s=>{u.Inertia.get(route("dashboard"),{...p.exports.pickBy(s),page:s.page},{preserveState:!0,preserveScroll:!0})},150),[]);a.exports.useEffect(()=>x(m),[m]),a.exports.useEffect(()=>{let s=[];for(let i=o.per_page;i<o.total/o.per_page;i=i+o.per_page)s.push(i);b(s)},[]);const y=s=>{_(s),c(!0)},N=()=>{u.Inertia.delete(route("plans.destroy",w.id),{onSuccess:()=>c(!1)})},[v,c]=a.exports.useState(!1),[w,_]=a.exports.useState([]);return t(n,{children:[e(k,{title:"Dashboard"}),e(D,{children:t("div",{className:"mt-4 flex flex-col px-2 py-2 bg-white border shadow-lg rounded-xl dark:bg-gray-800 dark:border-gray-700 dark:shadow-slate-700/[.7]",children:[e(L,{isOpenDestroyDialog:v,setIsOpenDestroyDialog:c,size:"2xl",title:"Hapus Perencanaan",children:e(P,{color:"pink",onClick:N,children:"Hapus"})}),t("div",{className:"",children:[e("div",{className:"flex items-center justify-between",children:e("div",{className:"w-full",children:t("div",{className:"flex items-center justify-start mt-2 mb-0 gap-x-1",children:[t(h,{type:"button",className:"justify-start px-4 py-2 text-sm font-medium text-blue-900 bg-blue-100 border border-transparent rounded-md hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",href:"plans/create",children:["Tambah Perencanaan",e($,{className:"w-4 h-4"})]}),e(h,{type:"button",className:"justify-start px-4 py-2 text-sm font-medium text-blue-900 bg-blue-100 border border-transparent rounded-md hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",href:"plans/create",children:"Perencanaan Lainnya"})]})})}),e("div",{className:"grid w-full grid-cols-1 mt-4 gap-x-1 gap-y-4 md:gap-2 sm:grid-cols-2 lg:grid-cols-2 xl:grid-cols-2",children:f.map((s,i)=>e("div",{className:"relative w-full mx-auto",children:e("div",{className:"flex flex-col bg-white border shadow-lg rounded-xl dark:bg-gray-800 dark:border-gray-700 dark:shadow-slate-700/[.7]",children:e("div",{className:"flex flex-col items-center justify-center flex-auto p-2",children:t("div",{className:"grid w-full grid-cols-12 gap-1",children:[t("div",{className:"col-span-4 col-start-1",children:[e("p",{className:"text-sm font-semibold",children:s.owner.name}),e("p",{className:"text-xs font-medium text-gray-500",children:s.plan_category.name})]}),e("div",{className:"flex items-center justify-end col-span-6 col-end-12",children:s.plan_bids_sum_is_approved=="1"?e("p",{className:"px-1 py-1 text-xs font-semibold text-blue-900 rounded bg-sky-200",children:"Sudah Memilih Pemenang"}):e(n,{children:s.is_approved==1?e("p",{className:"px-1 py-1 text-xs font-semibold text-blue-900 rounded bg-sky-200",children:"Diterima"}):e("p",{className:"px-1 py-1 text-xs font-semibold text-red-500 bg-yellow-200 rounded",children:"Menunggu Konfirmasi"})})}),e("div",{className:"flex items-center justify-center col-span-1 col-end-13",children:e("span",{className:"items-center justify-center px-1 ml-1 text-xs font-thin rounded-lg select-none ",children:t(r,{children:[e(r.Trigger,{children:e("button",{children:e(C,{})})}),t(r.Content,{children:[s.is_approved==1?"":t(n,{children:[e(r.Link,{href:route("plans.edit",`${s.slug}`),children:"Edit"}),e("button",{className:"items-center block w-full px-4 py-2 text-sm leading-5 text-left text-gray-700 transition duration-150 ease-in-out hover:bg-gray-100 focus:outline-none focus:bg-gray-100 gap-x-2",onClick:()=>y(s),children:"Hapus"})]}),e(r.Link,{href:route("plans.show",`${s.slug}`),children:"Lihat Detail"}),s.plan_bids_count>0&&e(r.Link,{href:route("bidplans.listpenawar",`${s.id}`),children:"Lihat Penawaran"}),s.plan_bids_sum_is_approved=="1"&&e(r.Link,{href:route("plan.tahapan",`${s.slug}`),children:"Tahapan Perencanaan"})]})]})})}),e("div",{className:"col-span-12 col-start-1 border-b border-gray-100"}),e("div",{className:"flex items-center justify-center col-span-2 col-start-1 mb-2",children:e("img",{className:"object-cover w-12 h-12 border rounded-lg",src:s.media?s.media:"storage/files/default/NoImage.svg",alt:"0"})}),t("div",{className:"col-span-10 col-start-3 mb-2",children:[e(d,{className:"text-base font-semibold",href:route("plans.show",`${s.slug}`),children:s.name}),t("p",{className:"text-xs font-medium text-gray-500",children:[s.plan_bids_count," ","Penawar"]})]}),t("div",{className:"col-span-6 col-start-1",children:[e("p",{className:"text-xs font-medium text-gray-500",children:"Total Anggaran"}),t("p",{className:"text-sm font-semibold",children:["Rp."," ",S(s.anggaran_proyek)]})]}),e("div",{className:"col-span-5 col-end-13",children:e("div",{className:"flex items-center justify-end col-span-3 col-end-6 ",children:s.plan_bids_sum_is_approved=="1"?e(d,{href:route("plan.tahapan",`${s.slug}`),className:"px-2 py-1 text-xs font-semibold text-white rounded bg-sky-700",children:"Tahapan"}):e(n,{children:s.is_approved==1?e(d,{href:route("bidplans.listpenawar",`${s.id}`),className:"px-2 py-1 text-xs font-semibold text-white rounded bg-sky-700",children:"Lihat Penawaran"}):e(d,{href:route("plans.edit",`${s.slug}`),className:"px-2 py-1 text-xs font-semibold text-white bg-yellow-700 rounded",children:"Edit"})})})})]})})})},i))})]})]})})]})}H.layout=l=>e(j,{children:l});export{H as default};
