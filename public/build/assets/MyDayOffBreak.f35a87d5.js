import{r as t,l as z,d as de,b as me,a as r,F as y,j as e,H as pe,L as F}from"./app.f3bfacbd.js";import{f as R,s as T,c as d,i as q,k as ue}from"./AsideReservasi.cf549a58.js";import{A as ge}from"./AppReservasi.0a6431c1.js";import"./CopyButton.45f0844d.js";import{I as S}from"./InfoModal.1852e229.js";import{T as i}from"./ThirdButtonNoLink.f55ec812.js";import{I as w}from"./Input.6fd61a94.js";import{I as k}from"./InputError.83c9c6b8.js";import{E as H}from"./EditModal.a7ca45d7.js";import{H as he}from"./Header.c3faaff4.js";import"./DropdownMobile.a06d7f3a.js";import{T as n}from"./ThirdButtonSmallNoLink.0a4d9175.js";import{C as fe}from"./Container.0f7c36cf.js";import"./transition.f173fab8.js";import"./DropdownMenu.6d9f6009.js";import"./clsx.m.256e9345.js";import"./use-event-listener.3bfbd49c.js";import"./Tawarin.08057ae7.js";import"./ExclamationIcon.028321fd.js";import"./dialog.f13323dc.js";import"./description.ec7f19cf.js";const m=()=>e("svg",{className:"w-5 h-5 text-gray-500",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e("path",{fillRule:"evenodd",d:"M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z",clipRule:"evenodd"})}),p=()=>e("svg",{className:"w-5 h-5 text-gray-500",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})});function xe(u){const{data:B,meta:C,filtered:A,attributes:h}=u.reservationEmployeeDayOff,K=u.reservationEmployeeBreak,f=u.reservationEmployee,[O,Y]=t.exports.useState([]),[s,x]=t.exports.useState(A),[U,W]=t.exports.useState(!0),$=t.exports.useCallback(z.exports.debounce(a=>{de.Inertia.get(route(route().current()),{...z.exports.pickBy(a),page:a.page},{preserveState:!0,preserveScroll:!0})},150),[]);t.exports.useEffect(()=>{U?W(!1):$(s)},[s]),t.exports.useEffect(()=>{let a=[];for(let l=h.per_page;l<h.total/h.per_page;l=l+h.per_page)a.push(l);Y(a)},[]);const b=a=>{const l={...s,[a.target.name]:a.target.value,page:1};x(l)},o=a=>{x({...s,field:a,direction:s.direction=="asc"?"desc":"asc"})},[X,I]=t.exports.useState([]),[G,N]=t.exports.useState(!1),[Q,M]=t.exports.useState(!1),[V,P]=t.exports.useState(!1),{data:c,setData:g,patch:Z,post:E,put:be,processing:J,errors:v,reset:_}=me({});t.exports.useEffect(()=>{const a=f==null?void 0:f.company.id;g("reservation_company_id",a)},[c.reason,c.start,c.end]);const ee=()=>{M(!1)},ae=()=>{P(!1)},[re,D]=t.exports.useState(!1),j=a=>{I(a),D(!0)},se=a=>{I(a),N(!0)},le=()=>{N(!1)},te=a=>{a.preventDefault(),E(route("reservationemployeedayoff.store"),{onSuccess:()=>Promise.all([D(!1),_()])})},[ie,L]=t.exports.useState(!1),ne=a=>{I(a),L(!0)},oe=a=>{a.preventDefault(),E(route("reservationemployeebreak.store_break"),{onSuccess:()=>Promise.all([L(!1),_()])})},ce=a=>{a.preventDefault(),Z(route("reservationemployee_cancel.cancel_dayoff",X.id),{onSuccess:()=>Promise.all([N(!1),_()])})};return r(y,{children:[e(he,{title:"Jadwal",description:"Jadwal Libur dan Istirahat."}),r(fe,{children:[e(H,{isOpenEditDialog:re,setIsOpenEditDialog:D,size:"2xl",title:"Masukan Jadwal Libur",children:r("form",{onSubmit:te,children:[r("div",{className:"grid grid-cols-12 gap-6",children:[r("div",{className:"col-span-12 md:col-span-6",children:[e("label",{htmlFor:"date",className:"block text-sm font-medium text-gray-700",children:"Tanggal Libur"}),e(w,{type:"date",name:"date",value:c.date,className:"block w-full mt-1",autoComplete:"date",isFocused:!0,onChange:a=>g("date",a.target.value)}),e(k,{message:v.date,className:"mt-2"})]})," ",r("div",{className:"col-span-12 md:col-span-6",children:[e("label",{htmlFor:"date",className:"block text-sm font-medium text-gray-700",children:"Alasan"}),e(w,{type:"text",name:"reason",value:c.reason,className:"block w-full mt-1",autoComplete:"reason",isFocused:!0,onChange:a=>{g("reason",a.target.value)}}),e(k,{message:v.reason,className:"mt-2"})]})," "]}),e(i,{className:"mt-4",disabled:J,children:"Simpan"})]})}),e(H,{isOpenEditDialog:ie,setIsOpenEditDialog:L,size:"2xl",title:"Masukan Jam Istirahat",children:r("form",{onSubmit:oe,children:[r("div",{className:"grid grid-cols-12 gap-6",children:[r("div",{className:"col-span-12 md:col-span-6",children:[e("label",{htmlFor:"start",className:"block text-sm font-medium text-gray-700",children:"Jam Mulai Istirahat"}),e(w,{type:"time",name:"start",value:c.start,className:"block w-full mt-1",autoComplete:"start",isFocused:!0,onChange:a=>g("start",a.target.value)}),e(k,{message:v.start,className:"mt-2"})]})," ",r("div",{className:"col-span-12 md:col-span-6",children:[e("label",{htmlFor:"end",className:"block text-sm font-medium text-gray-700",children:"Jam Berakhir Istirahat"}),e(w,{type:"time",name:"end",value:c.end,className:"block w-full mt-1",autoComplete:"end",isFocused:!0,onChange:a=>g("end",a.target.value)}),e(k,{message:v.end,className:"mt-2"})]})," "]}),e(i,{className:"mt-4",disabled:J,children:"Simpan"})]})}),e(S,{isOpenInfoDialog:Q,setIsOpenInfoDialog:M,size:"2xl",closeButton:"false",title:"Yakin Mulai Pelayanan ?",children:e(i,{className:"mx-2 mt-2",color:"gray",onClick:ee,children:"Close"})}),e(S,{isOpenInfoDialog:V,setIsOpenInfoDialog:P,size:"2xl",closeButton:"false",title:"Yakin Selesaikan Pelayanan ?",children:e(i,{className:"mx-2 mt-2",color:"gray",onClick:ae,children:"Close"})}),r(S,{isOpenInfoDialog:G,setIsOpenInfoDialog:N,size:"2xl",closeButton:"false",title:"Yakin Batalkan Libur ?",children:[e(i,{color:"tawarin",onClick:ce,children:"Yakin"}),e(i,{className:"mx-2 mt-2",color:"secondary",onClick:le,children:"Close"})]}),e(pe,{title:"Profile"}),r("div",{className:"hidden lg:block",children:[r("div",{className:"flex items-center justify-end",children:[e("div",{className:"w-1/2",children:r("div",{className:"flex items-center justify-start mb-6 gap-x-2",children:[e(i,{onClick:()=>j(),children:"Tambah Hari Libur"}),e(i,{onClick:()=>j(),children:"Tambah Jam Istirahat"})]})}),e("div",{className:"w-1/2",children:r("div",{className:"flex items-center justify-end mb-6 gap-x-2",children:[e("select",{name:"load",id:"load",onChange:b,value:s.load,className:"transition duration-150 ease-in-out border-gray-300 rounded-lg focus:ring-blue-200 focus:ring form-select",children:O.map((a,l)=>e("option",{children:a},l))}),r("div",{className:"flex items-center px-2 transition duration-150 ease-in-out bg-white border border-gray-300 rounded-lg gap-x-2 focus-within:border-blue-400 focus-within:ring-blue-200 focus-within:ring",children:[e("svg",{className:"inline w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e("input",{type:"text",name:"q",id:"q",onChange:b,value:s.q,className:"w-full border-0 focus:ring-0 form-text"})]})]})})]}),e("div",{className:"flex flex-col",children:e("div",{className:"-my-2 sm:-mx-6 lg:-mx-8",children:e("div",{className:"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8",children:e("div",{className:"border-b border-gray-200 shadow sm:rounded-lg",children:r("table",{className:"min-w-full divide-y divide-gray-200",children:[e("thead",{className:"bg-gray-50",children:r("tr",{children:[e("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-800 uppercase",children:e("div",{className:"flex items-center cursor-pointer gap-x-2",children:"#"})}),e("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-800 uppercase",children:r("div",{className:"flex items-center cursor-pointer gap-x-2",onClick:()=>o("jumlah_revisi"),children:[s.field=="media"&&s.direction=="asc"&&e(m,{}),s.field=="media"&&s.direction=="desc"&&e(p,{})]})}),e("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-800 uppercase",children:r("div",{className:"flex items-center cursor-pointer gap-x-2",onClick:()=>o("name"),children:["Nama Perencanaan",s.field=="name"&&s.direction=="asc"&&e(m,{}),s.field=="name"&&s.direction=="desc"&&e(p,{})]})}),e("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-800 uppercase",children:r("div",{className:"flex items-center cursor-pointer gap-x-2",onClick:()=>o("jumlah_revisi"),children:["Jumlah Revisi",s.field=="jumlah_revisi"&&s.direction=="asc"&&e(m,{}),s.field=="jumlah_revisi"&&s.direction=="desc"&&e(p,{})]})}),e("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-800 uppercase",children:r("div",{className:"flex items-center cursor-pointer gap-x-2",onClick:()=>o("anggaran_proyek"),children:["Anggaran Proyek",s.field=="anggaran_proyek"&&s.direction=="asc"&&e(m,{}),s.field=="anggaran_proyek"&&s.direction=="desc"&&e(p,{})]})}),e("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-800 uppercase",children:r("div",{className:"flex items-center cursor-pointer gap-x-2",onClick:()=>o("is_approved"),children:["Status",s.field=="is_approved"&&s.direction=="asc"&&e(m,{}),s.field=="is_approved"&&s.direction=="desc"&&e(p,{})]})}),e("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-800 uppercase",children:r("div",{className:"flex items-center cursor-pointer gap-x-2",onClick:()=>o("employee_bids_count"),children:["Jumlah Penawar",s.field=="employee_bids_count"&&s.direction=="asc"&&e(m,{}),s.field=="employee_bids_count"&&s.direction=="desc"&&e(p,{})]})}),e("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-800 uppercase",children:r("div",{className:"flex items-center cursor-pointer gap-x-2",onClick:()=>o("created_at"),children:["Dibuat",s.field=="created_at"&&s.direction=="asc"&&e(m,{}),s.field=="created_at"&&s.direction=="desc"&&e(p,{})]})}),e("th",{scope:"col",className:"relative px-6 py-3",children:e("span",{className:"sr-only",children:"Edit"})})]})}),e("tbody",{className:"bg-white divide-y divide-gray-200",children:B.map((a,l)=>r("tr",{children:[e("td",{className:"px-6 py-4 whitespace-nowrap",children:C.from+l}),e("td",{className:"px-6 py-4 whitespace-nowrap",children:e("img",{className:"object-cover w-16 h-12 border rounded-lg",src:a.media?a.media:"storage/files/default/NoImage.svg",alt:a.slug})}),e("td",{className:"px-6 py-4 whitespace-nowrap",children:a.company.name}),e("td",{className:"px-6 py-4 whitespace-nowrap",children:r("div",{className:"flex mt-1 rounded-md shadow-sm",children:[e("div",{className:"flex-1 block w-full px-4 py-1 text-base border border-r-0 border-gray-300 rounded-none rounded-l-md focus:border-indigo-500 focus:ring-indigo-500",children:a.jumlah_revisi}),e("span",{className:"inline-flex items-center px-3 text-base text-gray-500 border border-l-0 border-gray-300 rounded-r-md bg-gray-50",children:"Kali"})]})}),e("td",{className:"px-6 py-4 whitespace-nowrap",children:r("div",{className:"flex mt-1 rounded-md shadow-sm",children:[e("span",{className:"inline-flex items-center px-3 text-base text-gray-500 border border-r-0 border-gray-300 rounded-l-md bg-gray-50",children:"Rp"}),e("div",{className:"flex-1 block w-full px-2 py-1 text-base border border-l-0 border-gray-300 rounded-none rounded-r-md focus:border-indigo-500 focus:ring-indigo-500",children:"employee.anggaran_proyek"})]})}),e("td",{className:"px-6 py-4 whitespace-nowrap",children:a.approved==1?r(n,{children:[e(R,{className:"w-4 h-4 mr-2"})," Diterima"]}):r(n,{color:"secondary",children:[e(T,{className:"w-4 h-4 mr-2"}),"Menunggu Konfirmasi"]})}),e("td",{className:"px-6 py-4 whitespace-nowrap",children:r("div",{className:"flex mt-1 rounded-md shadow-sm",children:[e("div",{className:"flex-1 block w-full px-4 py-1 text-base border border-r-0 border-gray-300 rounded-none rounded-l-md focus:border-indigo-500 focus:ring-indigo-500",children:a.employee_bids_count}),e("span",{className:"inline-flex items-center px-3 text-base text-gray-500 border border-l-0 border-gray-300 rounded-r-md bg-gray-50",children:"Penawaran"})]})}),e("td",{className:"px-6 py-4 whitespace-nowrap",children:a.created_at}),e("td",{children:r(d,{children:[e(d.Trigger,{children:e("button",{children:e("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{d:"M6 10a2 2 0 11-4 0 2 2 0 014 0zM12 10a2 2 0 11-4 0 2 2 0 014 0zM16 12a2 2 0 100-4 2 2 0 000 4z"})})})}),r(d.Content,{children:[a.approved==1?"":r(y,{children:[e(d.Link,{children:"Edit"}),e("button",{className:"items-center block w-full px-4 py-2 text-sm leading-5 text-left text-gray-700 transition duration-150 ease-in-out hover:bg-gray-100 focus:outline-none focus:bg-gray-100 gap-x-2",onClick:()=>openDestroyDialog(a),children:"Hapus"})]}),e(d.Link,{children:"Lihat Detail"}),e(d.Link,{children:"Lihat Penawaran"}),a.employee_bids_sum_is_approved=="1"&&e(d.Link,{href:route("employee.tahapan",`${a.slug}`),children:"Tahapan Perencanaan"})]})]})})]},a.id))})]})})})})}),e("ul",{className:"flex items-center mt-10 gap-x-1",children:C.links.map((a,l)=>e("button",{disabled:a.url==null,className:`${a.url==null?"text-gray-500":"text-gray-800"} w-12 h-9 rounded-lg flex items-center justify-center border bg-white`,onClick:()=>x({...s,page:new URL(a.url).searchParams.get("page")}),children:a.label},l))})]}),r("div",{className:"lg:hidden",children:[r("div",{className:"flex items-center justify-between",children:[e("div",{className:"w-1/2",children:e("div",{className:"flex items-center justify-start mt-2 mb-0 gap-x-1",children:f?r(y,{children:[r(i,{onClick:()=>j(),children:["Libur ",e(q,{className:"w-4 h-4"})]}),r(i,{onClick:()=>ne(),children:["Istirahat"," ",e(q,{className:"w-4 h-4"})]})]}):e(n,{color:"secondary",children:"Belum Menjadi Karyawan"})})}),e("div",{className:"w-1/2",children:r("div",{className:"flex items-center justify-between mt-2 mb-0 gap-x-1",children:[e("select",{name:"load",id:"load",onChange:b,value:s.load,className:"transition duration-150 ease-in-out border-gray-300 rounded-lg focus:ring-blue-200 focus:ring form-select",children:O.map((a,l)=>e("option",{children:a},l))}),r("div",{className:"flex items-center px-2 transition duration-150 ease-in-out bg-white border border-gray-300 rounded-lg gap-x-2 focus-within:border-blue-400 focus-within:ring-blue-200 focus-within:ring",children:[e("svg",{className:"inline w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e("input",{type:"text",autoComplete:"off",name:"q",id:"q",onChange:b,value:s.q,className:"w-full border-0 focus:ring-0 form-text"})]})]})})]}),e("div",{className:"grid w-full grid-cols-1 mt-4 gap-x-1 gap-y-4 md:gap-2 sm:grid-cols-2 lg:grid-cols-2 xl:grid-cols-2",children:K.map((a,l)=>e("div",{className:"relative w-full mx-auto",children:e("div",{className:"flex flex-col bg-amber-200 border border-amber-400 shadow-lg rounded-xl dark:bg-gray-800 dark:border-gray-700 dark:shadow-slate-700/[.7]",children:e("div",{className:"flex flex-col items-center justify-center flex-auto p-2",children:r("div",{className:"grid w-full grid-cols-12 gap-1",children:[r("div",{className:"col-span-4 col-start-1",children:[e("p",{className:"text-base font-semibold",children:a.company.name}),e("p",{className:"text-xs font-medium text-gray-500",children:a.email})]}),e("div",{className:"flex items-center justify-end col-span-6 col-end-13",children:e(n,{color:"secondary",children:"Jam Istirahat"})}),e("div",{className:"col-span-12 col-start-1 border-b border-gray-100"}),e("div",{className:"col-span-10 col-start-1",children:r(F,{className:"text-base font-semibold",children:["Istirahat  : ",a.start," - ",a.end]})}),e("div",{className:"col-span-5 col-end-13",children:e("div",{className:"flex items-center justify-end col-span-3 col-end-6 "})})]})})})},l))}),e("div",{className:"grid w-full grid-cols-1 mt-4 gap-x-1 gap-y-4 md:gap-2 sm:grid-cols-2 lg:grid-cols-2 xl:grid-cols-2",children:B.map((a,l)=>e("div",{className:"relative w-full mx-auto",children:e("div",{className:"flex flex-col bg-white border shadow-lg rounded-xl dark:bg-gray-800 dark:border-gray-700 dark:shadow-slate-700/[.7]",children:e("div",{className:"flex flex-col items-center justify-center flex-auto p-2",children:r("div",{className:"grid w-full grid-cols-12 gap-1",children:[r("div",{className:"col-span-4 col-start-1",children:[e("p",{className:"text-base font-semibold",children:a.company.name}),e("p",{className:"text-xs font-medium text-gray-500",children:a.email})]}),e("div",{className:"flex items-center justify-end col-span-6 col-end-13",children:a.batal==1?r(n,{color:"red",children:[e(ue,{className:"w-4 h-4 mr-2"})," Sudah Batal"]}):a.approved==1?r(n,{children:[e(R,{className:"w-4 h-4 mr-2"}),"Diterima"]}):r(n,{color:"secondary",children:[e(T,{className:"w-4 h-4 mr-2"})," Menunggu Konfirmasi"]})}),e("div",{className:"col-span-12 col-start-1 border-b border-gray-100"}),e("div",{className:"col-span-10 col-start-1",children:r(F,{className:"text-base font-semibold",children:["Libur : ",a.date]})}),e("div",{className:"col-span-2 col-end-13",children:e("div",{className:"flex items-center justify-end col-span-3 col-end-6 ",children:a.batal==1?e(y,{}):e(n,{onClick:()=>se(a),color:"primary",children:"Batal"})})})]})})})},l))}),e("ul",{className:"flex items-center mt-10 gap-x-1",children:C.links.map((a,l)=>e("button",{disabled:a.url==null,className:`${a.url==null?"text-gray-500":"text-gray-800"} w-12 h-9 rounded-lg flex items-center justify-center border bg-white`,onClick:()=>x({...s,page:new URL(a.url).searchParams.get("page")}),children:a.label},l))})]})]})]})}xe.layout=u=>e(ge,{children:u});export{xe as default};
