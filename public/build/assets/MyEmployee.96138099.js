import{r as i,l as D,d as G,b as Q,a as t,F as I,j as e,H as V,L as X}from"./app.cbf5fb57.js";import{D as n}from"./index_responsive.ccef68da.js";import{A as Z}from"./AppReservasi.96d1c6a8.js";import"./CopyButton.a8ebd1c9.js";import{I as b}from"./InfoModal.61e22367.js";import{T as d}from"./ThirdButtonNoLink.8d4848b7.js";import{i as ee}from"./index.esm.5d767936.js";import{I as ae}from"./Input.df2b986f.js";import{I as re}from"./InputError.4999e345.js";import{E as te}from"./EditModal.120a40ad.js";import{H as se}from"./Header.9da80536.js";import"./DropdownMobile.b5a066da.js";import{T as u}from"./ThirdButtonSmallNoLink.eb8fab9f.js";import{C as ie}from"./Container.419791eb.js";import"./transition.e9ed1d9b.js";import"./DropdownMenu.2ead40bc.js";import"./clsx.m.256e9345.js";import"./use-event-listener.787b1ac1.js";import"./Tawarin.08057ae7.js";import"./AsideReservasi.085f333e.js";import"./ExclamationIcon.36b877d2.js";import"./dialog.176511f1.js";import"./description.b72956d9.js";const o=()=>e("svg",{className:"w-5 h-5 text-gray-500",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e("path",{fillRule:"evenodd",d:"M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z",clipRule:"evenodd"})}),c=()=>e("svg",{className:"w-5 h-5 text-gray-500",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})});function le(h){const{data:N,meta:x,filtered:L,attributes:m}=h.reservationEmployees,[y,j]=i.exports.useState([]),[r,p]=i.exports.useState(L),[M,S]=i.exports.useState(!0),z=i.exports.useCallback(D.exports.debounce(a=>{G.Inertia.get(route(route().current()),{...D.exports.pickBy(a),page:a.page},{preserveState:!0,preserveScroll:!0})},150),[]);i.exports.useEffect(()=>{M?S(!1):z(r)},[r]),i.exports.useEffect(()=>{let a=[];for(let s=m.per_page;s<m.total/m.per_page;s=s+m.per_page)a.push(s);j(a)},[]);const g=a=>{const s={...r,[a.target.name]:a.target.value,page:1};p(s)},l=a=>{p({...r,field:a,direction:r.direction=="asc"?"desc":"asc"})},[ne,P]=i.exports.useState([]),[R,k]=i.exports.useState(!1),[B,f]=i.exports.useState(!1),[E,_]=i.exports.useState(!1),{data:O,setData:K,patch:oe,post:T,put:ce,processing:U,errors:$,reset:q}=Q({}),A=()=>{k(!1)},H=()=>{_(!1)},[J,w]=i.exports.useState(!1),C=a=>{P(a),w(!0)},F=a=>{a.preventDefault(),T(route("reservationemployees.store"),{onSuccess:()=>Promise.all([w(!1),q()])})},W=a=>{f(!0)},Y=()=>{f(!1)};return t(I,{children:[e(se,{title:"Karyawan",description:"List Karyawan Saya."}),t(ie,{children:[e(te,{isOpenEditDialog:J,setIsOpenEditDialog:w,size:"2xl",title:"Masukan Email/Username/No Telp Karyawan",children:t("form",{onSubmit:F,children:[e(ae,{type:"text",name:"email",value:O.email,className:"block w-full mt-1",autoComplete:"email",isFocused:!0,onChange:a=>K("email",a.target.value)}),e(re,{message:$.email,className:"mt-2"}),e(d,{className:"mt-4",disabled:U,children:"Undang"})]})}),e(b,{isOpenInfoDialog:R,setIsOpenInfoDialog:k,size:"2xl",closeButton:"false",title:"Yakin Mulai Pelayanan ?",children:e(d,{className:"mx-2 mt-2",color:"gray",onClick:A,children:"Close"})}),e(b,{isOpenInfoDialog:E,setIsOpenInfoDialog:_,size:"2xl",closeButton:"false",title:"Yakin Selesaikan Pelayanan ?",children:e(d,{className:"mx-2 mt-2",color:"gray",onClick:H,children:"Close"})}),e(b,{isOpenInfoDialog:B,setIsOpenRatingDialog:f,size:"2xl",closeButton:"false",children:e(d,{className:"mx-2 mt-2",color:"gray",onClick:Y,children:"Close"})}),e(V,{title:"Profile"}),t("div",{className:"hidden lg:block",children:[t("div",{className:"flex items-center justify-end",children:[e("div",{className:"w-1/2",children:e("div",{className:"flex items-center justify-start mb-6 gap-x-2",children:e(d,{onClick:()=>C(),children:"Undang Karyawan"})})}),e("div",{className:"w-1/2",children:t("div",{className:"flex items-center justify-end mb-6 gap-x-2",children:[e("select",{name:"load",id:"load",onChange:g,value:r.load,className:"transition duration-150 ease-in-out border-gray-300 rounded-lg focus:ring-blue-200 focus:ring form-select",children:y.map((a,s)=>e("option",{children:a},s))}),t("div",{className:"flex items-center px-2 transition duration-150 ease-in-out bg-white border border-gray-300 rounded-lg gap-x-2 focus-within:border-blue-400 focus-within:ring-blue-200 focus-within:ring",children:[e("svg",{className:"inline w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e("input",{type:"text",name:"q",id:"q",onChange:g,value:r.q,className:"w-full border-0 focus:ring-0 form-text"})]})]})})]}),e("div",{className:"flex flex-col",children:e("div",{className:"-my-2 sm:-mx-6 lg:-mx-8",children:e("div",{className:"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8",children:e("div",{className:"border-b border-gray-200 shadow sm:rounded-lg",children:t("table",{className:"min-w-full divide-y divide-gray-200",children:[e("thead",{className:"bg-gray-50",children:t("tr",{children:[e("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-800 uppercase",children:e("div",{className:"flex items-center cursor-pointer gap-x-2",children:"#"})}),e("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-800 uppercase",children:t("div",{className:"flex items-center cursor-pointer gap-x-2",onClick:()=>l("jumlah_revisi"),children:[r.field=="media"&&r.direction=="asc"&&e(o,{}),r.field=="media"&&r.direction=="desc"&&e(c,{})]})}),e("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-800 uppercase",children:t("div",{className:"flex items-center cursor-pointer gap-x-2",onClick:()=>l("name"),children:["Nama Perencanaan",r.field=="name"&&r.direction=="asc"&&e(o,{}),r.field=="name"&&r.direction=="desc"&&e(c,{})]})}),e("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-800 uppercase",children:t("div",{className:"flex items-center cursor-pointer gap-x-2",onClick:()=>l("jumlah_revisi"),children:["Jumlah Revisi",r.field=="jumlah_revisi"&&r.direction=="asc"&&e(o,{}),r.field=="jumlah_revisi"&&r.direction=="desc"&&e(c,{})]})}),e("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-800 uppercase",children:t("div",{className:"flex items-center cursor-pointer gap-x-2",onClick:()=>l("anggaran_proyek"),children:["Anggaran Proyek",r.field=="anggaran_proyek"&&r.direction=="asc"&&e(o,{}),r.field=="anggaran_proyek"&&r.direction=="desc"&&e(c,{})]})}),e("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-800 uppercase",children:t("div",{className:"flex items-center cursor-pointer gap-x-2",onClick:()=>l("is_approved"),children:["Status",r.field=="is_approved"&&r.direction=="asc"&&e(o,{}),r.field=="is_approved"&&r.direction=="desc"&&e(c,{})]})}),e("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-800 uppercase",children:t("div",{className:"flex items-center cursor-pointer gap-x-2",onClick:()=>l("employee_bids_count"),children:["Jumlah Penawar",r.field=="employee_bids_count"&&r.direction=="asc"&&e(o,{}),r.field=="employee_bids_count"&&r.direction=="desc"&&e(c,{})]})}),e("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-800 uppercase",children:t("div",{className:"flex items-center cursor-pointer gap-x-2",onClick:()=>l("created_at"),children:["Dibuat",r.field=="created_at"&&r.direction=="asc"&&e(o,{}),r.field=="created_at"&&r.direction=="desc"&&e(c,{})]})}),e("th",{scope:"col",className:"relative px-6 py-3",children:e("span",{className:"sr-only",children:"Edit"})})]})}),e("tbody",{className:"bg-white divide-y divide-gray-200",children:N.map((a,s)=>t("tr",{children:[e("td",{className:"px-6 py-4 whitespace-nowrap",children:x.from+s}),e("td",{className:"px-6 py-4 whitespace-nowrap",children:e("img",{className:"object-cover w-16 h-12 border rounded-lg",src:a.media_id?`/storage/${a.media_id}/${a.file_name}`:"/storage/files/default/NoImage.svg",alt:a.slug})}),e("td",{className:"px-6 py-4 whitespace-nowrap",children:a.name}),e("td",{className:"px-6 py-4 whitespace-nowrap",children:t("div",{className:"flex mt-1 rounded-md shadow-sm",children:[e("div",{className:"flex-1 block w-full px-4 py-1 text-base border border-r-0 border-gray-300 rounded-none rounded-l-md focus:border-indigo-500 focus:ring-indigo-500",children:a.jumlah_revisi}),e("span",{className:"inline-flex items-center px-3 text-base text-gray-500 border border-l-0 border-gray-300 rounded-r-md bg-gray-50",children:"Kali"})]})}),e("td",{className:"px-6 py-4 whitespace-nowrap",children:t("div",{className:"flex mt-1 rounded-md shadow-sm",children:[e("span",{className:"inline-flex items-center px-3 text-base text-gray-500 border border-r-0 border-gray-300 rounded-l-md bg-gray-50",children:"Rp"}),e("div",{className:"flex-1 block w-full px-2 py-1 text-base border border-l-0 border-gray-300 rounded-none rounded-r-md focus:border-indigo-500 focus:ring-indigo-500",children:"employee.anggaran_proyek"})]})}),e("td",{className:"px-6 py-4 whitespace-nowrap",children:a.approved==1?e(u,{children:"Diterima"}):e(u,{color:"secondary",children:"Menunggu Konfirmasi"})}),e("td",{className:"px-6 py-4 whitespace-nowrap",children:t("div",{className:"flex mt-1 rounded-md shadow-sm",children:[e("div",{className:"flex-1 block w-full px-4 py-1 text-base border border-r-0 border-gray-300 rounded-none rounded-l-md focus:border-indigo-500 focus:ring-indigo-500",children:a.employee_bids_count}),e("span",{className:"inline-flex items-center px-3 text-base text-gray-500 border border-l-0 border-gray-300 rounded-r-md bg-gray-50",children:"Penawaran"})]})}),e("td",{className:"px-6 py-4 whitespace-nowrap",children:a.created_at}),e("td",{children:t(n,{children:[e(n.Trigger,{children:e("button",{children:e("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{d:"M6 10a2 2 0 11-4 0 2 2 0 014 0zM12 10a2 2 0 11-4 0 2 2 0 014 0zM16 12a2 2 0 100-4 2 2 0 000 4z"})})})}),t(n.Content,{children:[a.approved==1?"":t(I,{children:[e(n.Link,{children:"Edit"}),e("button",{className:"items-center block w-full px-4 py-2 text-sm leading-5 text-left text-gray-700 transition duration-150 ease-in-out hover:bg-gray-100 focus:outline-none focus:bg-gray-100 gap-x-2",onClick:()=>openDestroyDialog(a),children:"Hapus"})]}),e(n.Link,{children:"Lihat Detail"}),e(n.Link,{children:"Lihat Penawaran"}),a.employee_bids_sum_is_approved=="1"&&e(n.Link,{href:route("employee.tahapan",`${a.slug}`),children:"Tahapan Perencanaan"})]})]})})]},a.id))})]})})})})}),e("ul",{className:"flex items-center mt-10 gap-x-1",children:x.links.map((a,s)=>e("button",{disabled:a.url==null,className:`${a.url==null?"text-gray-500":"text-gray-800"} w-12 h-9 rounded-lg flex items-center justify-center border bg-white`,onClick:()=>p({...r,page:new URL(a.url).searchParams.get("page")}),children:a.label},s))})]}),t("div",{className:"lg:hidden",children:[t("div",{className:"flex items-center justify-between",children:[e("div",{className:"w-1/2",children:e("div",{className:"flex items-center justify-start mt-2 mb-0 gap-x-1",children:t(d,{onClick:()=>C(),children:["Undang Karyawan ",e(ee,{className:"w-4 h-4"})]})})}),e("div",{className:"w-1/2",children:t("div",{className:"flex items-center justify-between mt-2 mb-0 gap-x-1",children:[e("select",{name:"load",id:"load",onChange:g,value:r.load,className:"transition duration-150 ease-in-out border-gray-300 rounded-lg focus:ring-blue-200 focus:ring form-select",children:y.map((a,s)=>e("option",{children:a},s))}),t("div",{className:"flex items-center px-2 transition duration-150 ease-in-out bg-white border border-gray-300 rounded-lg gap-x-2 focus-within:border-blue-400 focus-within:ring-blue-200 focus-within:ring",children:[e("svg",{className:"inline w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e("input",{type:"text",autoComplete:"off",name:"q",id:"q",onChange:g,value:r.q,className:"w-full border-0 focus:ring-0 form-text"})]})]})})]}),e("div",{className:"grid w-full grid-cols-1 mt-4 gap-x-1 gap-y-4 md:gap-2 sm:grid-cols-2 lg:grid-cols-2 xl:grid-cols-2",children:N.map((a,s)=>e("div",{className:"relative w-full mx-auto",children:e("div",{className:"flex flex-col bg-white border shadow-lg rounded-xl dark:bg-gray-800 dark:border-gray-700 dark:shadow-slate-700/[.7]",children:e("div",{className:"flex flex-col items-center justify-center flex-auto p-2",children:t("div",{className:"grid w-full grid-cols-12 gap-1",children:[t("div",{className:"col-span-4 col-start-1",children:[e("p",{className:"text-sm font-semibold",children:a.name}),e("p",{className:"text-xs font-medium text-gray-500",children:a.email})]}),e("div",{className:"flex items-center justify-end col-span-6 col-end-13",children:a.approved==1?e(u,{children:"Diterima"}):e(u,{color:"secondary",children:"Menunggu Konfirmasi"})}),e("div",{className:"col-span-12 col-start-1 border-b border-gray-100"}),e("div",{className:"flex items-center justify-center col-span-2 col-start-1 mb-2",children:e("img",{className:"object-cover w-12 h-12 border rounded-lg",src:a.media_id?`/storage/${a.media_id}/${a.file_name}`:"/storage/files/default/NoImage.svg",alt:"0"})}),t("div",{className:"col-span-10 col-start-3 mb-2",children:[e(X,{className:"text-base font-semibold"}),e("p",{className:"text-xs font-medium text-gray-500",children:a.phone})]}),t("div",{className:"col-span-6 col-start-1",children:[e("div",{className:"flex items-start",children:[1,2,3,4,5].map(v=>e("div",{className:"w-5 h-5 relative",children:v<=a.average_rating?e("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-auto text-yellow-500 fill-current",viewBox:"0 0 16 16",children:e("path",{d:"M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"})}):v-.95<a.average_rating?e("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-auto text-yellow-500 fill-current",viewBox:"0 0 16 16",children:e("path",{d:"M5.354 5.119 7.538.792A.516.516 0 0 1 8 .5c.183 0 .366.097.465.292l2.184 4.327 4.898.696A.537.537 0 0 1 16 6.32a.548.548 0 0 1-.17.445l-3.523 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256a.52.52 0 0 1-.146.05c-.342.06-.668-.254-.6-.642l.83-4.73L.173 6.765a.55.55 0 0 1-.172-.403.58.58 0 0 1 .085-.302.513.513 0 0 1 .37-.245l4.898-.696zM8 12.027a.5.5 0 0 1 .232.056l3.686 1.894-.694-3.957a.565.565 0 0 1 .162-.505l2.907-2.77-4.052-.576a.525.525 0 0 1-.393-.288L8.001 2.223 8 2.226v9.8z"})}):e("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-auto text-yellow-500 fill-current",viewBox:"0 0 16 16",children:e("path",{d:"M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.522-3.356c.33-.314.16-.888-.282-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288L8 2.223l1.847 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.565.565 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z"})})},v))}),t("span",{onClick:()=>W(),className:"flex items-start text-xs font-medium text-left cursor-pointer text-slate-400",children:[a.average_rating?Math.round(a.average_rating*10)/10:0," ","out of 5 stars",e("br",{}),"(",a.count_rating?a.count_rating:0," ","Reviews dari"," ",a.count_customer?a.count_customer:0," ","Customer)"]})]}),e("div",{className:"col-span-5 col-end-13",children:e("div",{className:"flex items-center justify-end col-span-3 col-end-6 "})})]})})})},s))}),e("ul",{className:"flex items-center mt-10 gap-x-1",children:x.links.map((a,s)=>e("button",{disabled:a.url==null,className:`${a.url==null?"text-gray-500":"text-gray-800"} w-12 h-9 rounded-lg flex items-center justify-center border bg-white`,onClick:()=>p({...r,page:new URL(a.url).searchParams.get("page")}),children:a.label},s))})]})]})]})}le.layout=h=>e(Z,{children:h});export{le as default};
