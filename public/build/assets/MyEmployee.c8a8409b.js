import{r as l,l as M,d as re,b as se,a as s,F as y,j as e,H as te,L as le}from"./app.30e7ada2.js";import{c as o,i as ie,f as ne}from"./AsideReservasi.fe192722.js";import{A as oe}from"./AppReservasi.88d0a8de.js";import"./CopyButton.489d64b9.js";import{I as x}from"./InfoModal.c9ccccc6.js";import{T as i}from"./ThirdButtonNoLink.7a75f155.js";import{I as ce}from"./Input.8f884982.js";import{I as de}from"./InputError.7d823670.js";import{E as me}from"./EditModal.1079f717.js";import{H as pe}from"./Header.d47f8bfd.js";import"./DropdownMobile.9993bc3a.js";import{T as m}from"./ThirdButtonSmallNoLink.c25ac017.js";import{C as ge}from"./Container.edff39a2.js";import"./transition.38b0a85b.js";import"./DropdownMenu.67c76693.js";import"./clsx.m.256e9345.js";import"./use-event-listener.7a08d75d.js";import"./Tawarin.08057ae7.js";import"./ExclamationIcon.9869fa8a.js";import"./dialog.2e2a7a99.js";import"./description.8ad162b3.js";const c=()=>e("svg",{className:"w-5 h-5 text-gray-500",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e("path",{fillRule:"evenodd",d:"M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z",clipRule:"evenodd"})}),d=()=>e("svg",{className:"w-5 h-5 text-gray-500",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})});function ue(f){const{data:k,meta:w,filtered:z,attributes:p}=f.reservationEmployees,[_,O]=l.exports.useState([]),[r,g]=l.exports.useState(z),[R,P]=l.exports.useState(!0),B=l.exports.useCallback(M.exports.debounce(a=>{re.Inertia.get(route(route().current()),{...M.exports.pickBy(a),page:a.page},{preserveState:!0,preserveScroll:!0})},150),[]);l.exports.useEffect(()=>{R?P(!1):B(r)},[r]),l.exports.useEffect(()=>{let a=[];for(let t=p.per_page;t<p.total/p.per_page;t=t+p.per_page)a.push(t);O(a)},[]);const u=a=>{const t={...r,[a.target.name]:a.target.value,page:1};g(t)},n=a=>{g({...r,field:a,direction:r.direction=="asc"?"desc":"asc"})},[E,C]=l.exports.useState([]),[K,D]=l.exports.useState(!1),[J,b]=l.exports.useState(!1),[T,I]=l.exports.useState(!1),[U,h]=l.exports.useState(!1),{data:$,setData:q,patch:he,post:A,put:H,processing:L,errors:F,reset:j}=se({}),Y=()=>{D(!1)},W=()=>{I(!1)},[G,v]=l.exports.useState(!1),S=a=>{C(a),v(!0)},Q=a=>{a.preventDefault(),A(route("reservationemployees.store"),{onSuccess:()=>Promise.all([v(!1),j()])})},V=a=>{b(!0)},X=()=>{b(!1)},Z=a=>{C(a),h(!0)},ee=()=>{h(!1)},ae=a=>{a.preventDefault(),H(route("reservation.makecashier",E.team_detail_user_id),{onSuccess:()=>Promise.all([h(!1),j()])})};return s(y,{children:[e(pe,{title:"Karyawan",description:"List Karyawan Saya."}),s(ge,{children:[e(me,{isOpenEditDialog:G,setIsOpenEditDialog:v,size:"2xl",title:"Masukan Email/Username/No Telp Karyawan",children:s("form",{onSubmit:Q,children:[e(ce,{type:"text",name:"email",value:$.email,className:"block w-full mt-1",autoComplete:"email",isFocused:!0,onChange:a=>q("email",a.target.value)}),e(de,{message:F.email,className:"mt-2"}),e(i,{className:"mt-4",disabled:L,children:"Undang"})]})}),e(x,{isOpenInfoDialog:K,setIsOpenInfoDialog:D,size:"2xl",closeButton:"false",title:"Yakin Mulai Pelayanan ?",children:e(i,{className:"mx-2 mt-2",color:"gray",onClick:Y,children:"Close"})}),e(x,{isOpenInfoDialog:T,setIsOpenInfoDialog:I,size:"2xl",closeButton:"false",title:"Yakin Selesaikan Pelayanan ?",children:e(i,{className:"mx-2 mt-2",color:"gray",onClick:W,children:"Close"})}),e(x,{isOpenInfoDialog:J,setIsOpenRatingDialog:b,size:"2xl",closeButton:"false",children:e(i,{className:"mx-2 mt-2",color:"gray",onClick:X,children:"Close"})}),s(x,{isOpenInfoDialog:U,setIsOpenInfoDialog:h,size:"2xl",closeButton:"false",title:"Yakin Jadikan Kasir ?",children:[e("p",{className:"p-4 text-base font-semibold text-left border-2 border-yellow-600 rounded-lg",children:"Yakin berikan akun ini sebagai kasir ?"}),e(i,{className:"mt-2",processing:L,onClick:ae,children:"Simpan"}),e(i,{className:"mx-2 mt-2",color:"secondary",onClick:ee,children:"Close"})]}),e(te,{title:"Profile"}),s("div",{className:"hidden lg:block",children:[s("div",{className:"flex items-center justify-end",children:[e("div",{className:"w-1/2",children:e("div",{className:"flex items-center justify-start mb-6 gap-x-2",children:e(i,{onClick:()=>S(),children:"Undang Karyawan"})})}),e("div",{className:"w-1/2",children:s("div",{className:"flex items-center justify-end mb-6 gap-x-2",children:[e("select",{name:"load",id:"load",onChange:u,value:r.load,className:"transition duration-150 ease-in-out border-gray-300 rounded-lg focus:ring-blue-200 focus:ring form-select",children:_.map((a,t)=>e("option",{children:a},t))}),s("div",{className:"flex items-center px-2 transition duration-150 ease-in-out bg-white border border-gray-300 rounded-lg gap-x-2 focus-within:border-blue-400 focus-within:ring-blue-200 focus-within:ring",children:[e("svg",{className:"inline w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e("input",{type:"text",name:"q",id:"q",onChange:u,value:r.q,className:"w-full border-0 focus:ring-0 form-text"})]})]})})]}),e("div",{className:"flex flex-col",children:e("div",{className:"-my-2 sm:-mx-6 lg:-mx-8",children:e("div",{className:"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8",children:e("div",{className:"border-b border-gray-200 shadow sm:rounded-lg",children:s("table",{className:"min-w-full divide-y divide-gray-200",children:[e("thead",{className:"bg-gray-50",children:s("tr",{children:[e("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-800 uppercase",children:e("div",{className:"flex items-center cursor-pointer gap-x-2",children:"#"})}),e("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-800 uppercase",children:s("div",{className:"flex items-center cursor-pointer gap-x-2",onClick:()=>n("jumlah_revisi"),children:[r.field=="media"&&r.direction=="asc"&&e(c,{}),r.field=="media"&&r.direction=="desc"&&e(d,{})]})}),e("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-800 uppercase",children:s("div",{className:"flex items-center cursor-pointer gap-x-2",onClick:()=>n("name"),children:["Nama Perencanaan",r.field=="name"&&r.direction=="asc"&&e(c,{}),r.field=="name"&&r.direction=="desc"&&e(d,{})]})}),e("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-800 uppercase",children:s("div",{className:"flex items-center cursor-pointer gap-x-2",onClick:()=>n("jumlah_revisi"),children:["Jumlah Revisi",r.field=="jumlah_revisi"&&r.direction=="asc"&&e(c,{}),r.field=="jumlah_revisi"&&r.direction=="desc"&&e(d,{})]})}),e("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-800 uppercase",children:s("div",{className:"flex items-center cursor-pointer gap-x-2",onClick:()=>n("anggaran_proyek"),children:["Anggaran Proyek",r.field=="anggaran_proyek"&&r.direction=="asc"&&e(c,{}),r.field=="anggaran_proyek"&&r.direction=="desc"&&e(d,{})]})}),e("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-800 uppercase",children:s("div",{className:"flex items-center cursor-pointer gap-x-2",onClick:()=>n("is_approved"),children:["Status",r.field=="is_approved"&&r.direction=="asc"&&e(c,{}),r.field=="is_approved"&&r.direction=="desc"&&e(d,{})]})}),e("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-800 uppercase",children:s("div",{className:"flex items-center cursor-pointer gap-x-2",onClick:()=>n("employee_bids_count"),children:["Jumlah Penawar",r.field=="employee_bids_count"&&r.direction=="asc"&&e(c,{}),r.field=="employee_bids_count"&&r.direction=="desc"&&e(d,{})]})}),e("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-800 uppercase",children:s("div",{className:"flex items-center cursor-pointer gap-x-2",onClick:()=>n("created_at"),children:["Dibuat",r.field=="created_at"&&r.direction=="asc"&&e(c,{}),r.field=="created_at"&&r.direction=="desc"&&e(d,{})]})}),e("th",{scope:"col",className:"relative px-6 py-3",children:e("span",{className:"sr-only",children:"Edit"})})]})}),e("tbody",{className:"bg-white divide-y divide-gray-200",children:k.map((a,t)=>s("tr",{children:[e("td",{className:"px-6 py-4 whitespace-nowrap",children:w.from+t}),e("td",{className:"px-6 py-4 whitespace-nowrap",children:e("img",{className:"object-cover w-16 h-12 border rounded-lg",src:a.media_id?`/storage/${a.media_id}/${a.file_name}`:"/storage/files/default/NoImage.svg",alt:a.slug})}),e("td",{className:"px-6 py-4 whitespace-nowrap",children:a.name}),e("td",{className:"px-6 py-4 whitespace-nowrap",children:s("div",{className:"flex mt-1 rounded-md shadow-sm",children:[e("div",{className:"flex-1 block w-full px-4 py-1 text-base border border-r-0 border-gray-300 rounded-none rounded-l-md focus:border-indigo-500 focus:ring-indigo-500",children:a.jumlah_revisi}),e("span",{className:"inline-flex items-center px-3 text-base text-gray-500 border border-l-0 border-gray-300 rounded-r-md bg-gray-50",children:"Kali"})]})}),e("td",{className:"px-6 py-4 whitespace-nowrap",children:s("div",{className:"flex mt-1 rounded-md shadow-sm",children:[e("span",{className:"inline-flex items-center px-3 text-base text-gray-500 border border-r-0 border-gray-300 rounded-l-md bg-gray-50",children:"Rp"}),e("div",{className:"flex-1 block w-full px-2 py-1 text-base border border-l-0 border-gray-300 rounded-none rounded-r-md focus:border-indigo-500 focus:ring-indigo-500",children:"employee.anggaran_proyek"})]})}),e("td",{className:"px-6 py-4 whitespace-nowrap",children:a.approved==1?e(m,{children:"Diterima"}):e(m,{color:"secondary",children:"Menunggu Konfirmasi"})}),e("td",{className:"px-6 py-4 whitespace-nowrap",children:s("div",{className:"flex mt-1 rounded-md shadow-sm",children:[e("div",{className:"flex-1 block w-full px-4 py-1 text-base border border-r-0 border-gray-300 rounded-none rounded-l-md focus:border-indigo-500 focus:ring-indigo-500",children:a.employee_bids_count}),e("span",{className:"inline-flex items-center px-3 text-base text-gray-500 border border-l-0 border-gray-300 rounded-r-md bg-gray-50",children:"Penawaran"})]})}),e("td",{className:"px-6 py-4 whitespace-nowrap",children:a.created_at}),e("td",{children:s(o,{children:[e(o.Trigger,{children:e("button",{children:e("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{d:"M6 10a2 2 0 11-4 0 2 2 0 014 0zM12 10a2 2 0 11-4 0 2 2 0 014 0zM16 12a2 2 0 100-4 2 2 0 000 4z"})})})}),s(o.Content,{children:[a.approved==1?"":s(y,{children:[e(o.Link,{children:"Edit"}),e("button",{className:"items-center block w-full px-4 py-2 text-sm leading-5 text-left text-gray-700 transition duration-150 ease-in-out hover:bg-gray-100 focus:outline-none focus:bg-gray-100 gap-x-2",onClick:()=>openDestroyDialog(a),children:"Hapus"})]}),e(o.Link,{children:"Lihat Detail"}),e(o.Link,{children:"Lihat Penawaran"}),a.employee_bids_sum_is_approved=="1"&&e(o.Link,{href:route("employee.tahapan",`${a.slug}`),children:"Tahapan Perencanaan"})]})]})})]},a.id))})]})})})})}),e("ul",{className:"flex items-center mt-10 gap-x-1",children:w.links.map((a,t)=>e("button",{disabled:a.url==null,className:`${a.url==null?"text-gray-500":"text-gray-800"} w-12 h-9 rounded-lg flex items-center justify-center border bg-white`,onClick:()=>g({...r,page:new URL(a.url).searchParams.get("page")}),children:a.label},t))})]}),s("div",{className:"lg:hidden",children:[s("div",{className:"flex items-center justify-between",children:[e("div",{className:"w-1/2",children:e("div",{className:"flex items-center justify-start mt-2 mb-0 gap-x-1",children:s(i,{onClick:()=>S(),children:["Undang Karyawan"," ",e(ie,{className:"w-4 h-4"})]})})}),e("div",{className:"w-1/2",children:s("div",{className:"flex items-center justify-between mt-2 mb-0 gap-x-1",children:[e("select",{name:"load",id:"load",onChange:u,value:r.load,className:"transition duration-150 ease-in-out border-gray-300 rounded-lg focus:ring-blue-200 focus:ring form-select",children:_.map((a,t)=>e("option",{children:a},t))}),s("div",{className:"flex items-center px-2 transition duration-150 ease-in-out bg-white border border-gray-300 rounded-lg gap-x-2 focus-within:border-blue-400 focus-within:ring-blue-200 focus-within:ring",children:[e("svg",{className:"inline w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e("input",{type:"text",autoComplete:"off",name:"q",id:"q",onChange:u,value:r.q,className:"w-full border-0 focus:ring-0 form-text"})]})]})})]}),e("div",{className:"grid w-full grid-cols-1 mt-4 gap-x-1 gap-y-4 md:gap-2 sm:grid-cols-2 lg:grid-cols-2 xl:grid-cols-2",children:k.map((a,t)=>e("div",{className:"relative w-full mx-auto",children:e("div",{className:"flex flex-col bg-white border shadow-lg rounded-xl dark:bg-gray-800 dark:border-gray-700 dark:shadow-slate-700/[.7]",children:e("div",{className:"flex flex-col items-center justify-center flex-auto p-2",children:s("div",{className:"grid w-full grid-cols-12 gap-1",children:[s("div",{className:"col-span-5 col-start-1",children:[e("p",{className:"text-sm font-semibold",children:a.name}),e("p",{className:"text-xs font-medium text-gray-500",children:a.email})]}),e("div",{className:"flex items-center justify-end col-span-7 col-end-13 gap-x-1",children:a.approved==1?s(y,{children:[a.model_has_roles_model_type?s(m,{color:"teal",className:"",children:["Kasir ",e(ne,{className:"w-4 h-4"})]}):e(m,{color:"secondary",className:"",onClick:()=>Z(a),children:"Jadikan Kasir"}),e(m,{children:"Diterima"})]}):e(m,{color:"secondary",children:"Menunggu Konfirmasi"})}),e("div",{className:"col-span-12 col-start-1 border-b border-gray-100"}),e("div",{className:"flex items-center justify-center col-span-2 col-start-1 mb-2",children:e("img",{className:"object-cover w-12 h-12 border rounded-lg",src:a.media_id?`/storage/${a.media_id}/${a.file_name}`:"/storage/files/default/NoImage.svg",alt:"0"})}),s("div",{className:"col-span-10 col-start-3 mb-2",children:[e(le,{className:"text-base font-semibold"}),e("p",{className:"text-xs font-medium text-gray-500",children:a.phone})]}),s("div",{className:"col-span-6 col-start-1",children:[e("div",{className:"flex items-start",children:[1,2,3,4,5].map(N=>e("div",{className:"w-5 h-5 relative",children:N<=a.average_rating?e("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-auto text-yellow-500 fill-current",viewBox:"0 0 16 16",children:e("path",{d:"M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"})}):N-.95<a.average_rating?e("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-auto text-yellow-500 fill-current",viewBox:"0 0 16 16",children:e("path",{d:"M5.354 5.119 7.538.792A.516.516 0 0 1 8 .5c.183 0 .366.097.465.292l2.184 4.327 4.898.696A.537.537 0 0 1 16 6.32a.548.548 0 0 1-.17.445l-3.523 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256a.52.52 0 0 1-.146.05c-.342.06-.668-.254-.6-.642l.83-4.73L.173 6.765a.55.55 0 0 1-.172-.403.58.58 0 0 1 .085-.302.513.513 0 0 1 .37-.245l4.898-.696zM8 12.027a.5.5 0 0 1 .232.056l3.686 1.894-.694-3.957a.565.565 0 0 1 .162-.505l2.907-2.77-4.052-.576a.525.525 0 0 1-.393-.288L8.001 2.223 8 2.226v9.8z"})}):e("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-auto text-yellow-500 fill-current",viewBox:"0 0 16 16",children:e("path",{d:"M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.522-3.356c.33-.314.16-.888-.282-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288L8 2.223l1.847 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.565.565 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z"})})},N))}),s("span",{onClick:()=>V(),className:"flex items-start text-xs font-medium text-left cursor-pointer text-slate-400",children:[a.average_rating?Math.round(a.average_rating*10)/10:0," ","out of 5 stars",e("br",{}),"(",a.count_rating?a.count_rating:0," ","Reviews dari"," ",a.count_customer?a.count_customer:0," ","Customer)"]})]}),e("div",{className:"col-span-5 col-end-13",children:e("div",{className:"flex items-center justify-end col-span-3 col-end-6 "})})]})})})},t))}),e("ul",{className:"flex items-center mt-10 gap-x-1",children:w.links.map((a,t)=>e("button",{disabled:a.url==null,className:`${a.url==null?"text-gray-500":"text-gray-800"} w-12 h-9 rounded-lg flex items-center justify-center border bg-white`,onClick:()=>g({...r,page:new URL(a.url).searchParams.get("page")}),children:a.label},t))})]})]})]})}ue.layout=f=>e(oe,{children:f});export{ue as default};
