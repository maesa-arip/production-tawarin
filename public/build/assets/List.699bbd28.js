import{r as n,u as L,l as x,d as C,a as t,j as e,H as R,L as g}from"./app.9d9b1b7b.js";import{A as T}from"./App.1c22ed45.js";import{C as E}from"./Container.f67c8686.js";import{H}from"./Header.95ff10de.js";import{P as A}from"./Pagination.e98f72ea.js";import{n as d}from"./helper.e37a4314.js";import{E as z,G as B,f as D,e as O}from"./index.esm.e04f806f.js";import{E as q}from"./EmptyCard.22bf298e.js";import{I as G}from"./InfoModal.21c00661.js";import{T as o}from"./ThirdButton.9f42bc4c.js";import{T as M}from"./ThirdButtonNoLink.b027bfaf.js";import"./DropdownMenu.317518ca.js";import"./clsx.m.256e9345.js";import"./transition.e091d3a0.js";import"./use-event-listener.07311351.js";import"./index_responsive.692d46d4.js";import"./Tawarin.08057ae7.js";import"./Aside.ff8b8cd9.js";import"./ExclamationIcon.a4345e7e.js";import"./dialog.d19948fe.js";import"./description.47678c94.js";function $(l){const{data:m,meta:h,links:b,filtered:y,attributes:i}=l.plans,[w,N]=n.exports.useState([]),[r,v]=n.exports.useState(y),[k,j]=n.exports.useState(!0),{permissions:c}=L().props,p=c?c.map(a=>a.name):"null",_=n.exports.useCallback(x.exports.debounce(a=>{C.Inertia.get(route(route().current()),{...x.exports.pickBy(a),page:a.page},{preserveState:!0,preserveScroll:!0})},150),[]);n.exports.useEffect(()=>{k?j(!1):_(r)},[r]),n.exports.useEffect(()=>{let a=[];for(let s=i.per_page;s<i.total/i.per_page;s=s+i.per_page)a.push(s);N(a)},[]);const u=a=>{const s={...r,[a.target.name]:a.target.value,page:1};v(s)},[P,f]=n.exports.useState(!1),[F,I]=n.exports.useState([]),S=()=>{I(),f(!0)};return t("div",{children:[e(R,{title:"Plans"}),e(H,{title:"Perencanaan",description:"List perencanaan yang ada di Tawarin."}),e(G,{isOpenInfoDialog:P,setIsOpenInfoDialog:f,size:"2xl",title:"Info",header:"",children:"Anda harus memiliki akun owner terlebih dahulu sebelum bisa membuat perencanaan"}),t(E,{children:[t("div",{className:"flex items-center justify-end",children:[e("div",{className:"w-2/3",children:t("div",{className:"flex items-center justify-start gap-x-2",children:[p.indexOf("membuat perencanaan")>-1?t("div",{className:"flex items-center justify-start gap-x-2",children:[t(o,{type:"button",href:"/plans/create",children:[" ",e("p",{className:"hidden md:block",children:"Tambah "}),e(z,{className:"block md:hidden w-5 h-5"})]}),t(o,{type:"button",href:route("plans.index"),children:[e("p",{className:"hidden md:block",children:"Perencanaan Saya "}),e(B,{className:"block md:hidden w-5 h-5"})]})]}):e(M,{type:"button",onClick:()=>S(),children:"Tambah"}),p.indexOf("melakukan penawaran perencanaan")>-1?t(o,{type:"button",href:"/planbids",children:[e("p",{className:"hidden md:block",children:"Penawaran Saya "}),e(D,{className:"block md:hidden w-5 h-5"})]}):""]})}),e("div",{className:"w-1/3",children:t("div",{className:"flex items-center justify-end gap-x-2",children:[e("select",{name:"load",id:"load",onChange:u,value:r.load,className:"hidden transition duration-150 ease-in-out border-gray-300 rounded-lg md:flex focus:ring-blue-200 focus:ring form-select",children:w.map((a,s)=>e("option",{children:a},s))}),t("div",{className:"flex items-center px-2 transition duration-150 ease-in-out bg-white border border-gray-300 rounded-lg gap-x-2 focus-within:border-blue-400 focus-within:ring-blue-200 focus-within:ring",children:[e("svg",{className:"inline w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e("input",{type:"text",name:"q",id:"q",onChange:u,value:r.q,className:"w-full border-0 focus:ring-0 form-text"})]})]})})]}),m.length?e("div",{className:"grid w-full grid-cols-2 gap-1 mt-4 md:gap-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4",children:m.map((a,s)=>e("div",{className:"relative w-full pb-4 mx-auto",children:e(g,{href:`/public/plans/${a.slug}`,className:"relative inline-block w-full transition-transform duration-300 ease-in-out",children:t("div",{className:"p-2 bg-white border rounded-lg",children:[t("div",{className:"relative flex justify-center overflow-hidden border rounded-lg h-52",children:[e("div",{className:"w-full transition-transform duration-500 ease-in-out",children:e("div",{className:"absolute inset-0 ",children:e("img",{className:"object-cover object-top w-full h-full lg:h-full lg:w-full",src:a.media?a.media:"/storage/files/default/NoImage.svg",alt:a.slug})})}),e("div",{className:"absolute bottom-0 flex justify-center mb-3",children:e("div",{className:"flex px-2 py-1 space-x-1 overflow-hidden bg-white rounded-lg md:px-5 md:space-x-5",children:t("p",{className:"flex items-center text-sm font-medium text-gray-800",children:[e(O,{className:"w-5 h-5 text-gray-800 bg-transparent"}),a.owner.name]})})}),a.plan_bids_sum_is_approved==1?t("span",{className:"absolute top-0 left-0 inline-flex justify-end px-2 py-1 mt-3 ml-3 text-xs font-medium text-white bg-yellow-500 rounded-lg select-none z-9",children:["Pemenang Perencanaan Ini:"," ",a.winner.name]}):t("span",{className:"absolute top-0 left-0 inline-flex justify-end px-2 py-1 mt-3 ml-3 text-xs font-medium text-white bg-blue-500 rounded-lg select-none z-9",children:[a.until," Hari Lagi"]})]}),t("div",{className:"mt-4",children:[e("h2",{className:"text-base font-medium text-gray-800 md:text-lg line-clamp-1",title:"New York",children:a.name}),e(g,{className:"mt-2 text-sm text-gray-800 line-clamp-1",href:`/public/plans/list?plan_category=${a.plan_category.slug}`,children:a.plan_category.name})]}),e("div",{className:"flex items-center justify-between my-2 space-x-4",children:t("span",{className:"items-center w-full px-2 py-1 text-xs font-semibold text-gray-500 bg-gray-100 rounded-md md:justify-between md:flex ",children:[e("p",{className:"text-[10px] md:text-xs",children:"Anggaran Proyek"}),t("p",{className:"md:ml-1 text-[9px] md:text-xs",children:["Rp"," ",d(a.anggaran_proyek)]})]})}),e("div",{className:"flex items-center justify-between space-x-4",children:t("span",{className:"items-center w-full px-2 py-1 text-xs font-semibold text-blue-700 bg-blue-100 rounded-md md:flex md:justify-between",children:[e("p",{className:"text-[10px] md:text-xs",children:"Anggaran Perencanaan"}),t("p",{className:"justify-end text-[9px] md:text-xs md:flex",children:["Rp"," ",d(a.dari_anggaran)," ","-","Rp"," ",d(a.sampai_anggaran)]})]})}),t("div",{className:"flex items-center justify-between my-2 space-x-4",children:[t("span",{className:"flex items-center px-2 py-1 mt-2 text-xs font-semibold text-yellow-700 bg-yellow-100 rounded-md w-36",children:[a.jangka_waktu_pelaksanaan," ","Hari Pengerjaan"]}),t("span",{className:"flex items-center px-2 py-1 mt-2 text-xs font-semibold text-green-500 rounded-md bg-green-50",children:[a.plan_bids_count," Penawar"]})]})]})})},s))}):e(q,{}),e(A,{meta:h,links:b})]})]})}$.layout=l=>e(T,{children:l});export{$ as default};
