import{B as y}from"./Button.f8ea4a94.js";import{A as O}from"./App.9d73c0fe.js";import{j as a,F as w,a as e,e as N,r as v,H as A}from"./app.b9617ff3.js";import{A as E,E as H}from"./EditModal.66b586fd.js";import{D as L}from"./DestroyModal.3e6a9cf0.js";import $ from"./Filepond.1ee59c3f.js";import{I as K}from"./InfoModal.f0077fbf.js";import"./clsx.m.256e9345.js";import"./XIcon.83f2d528.js";import"./transition.ac765774.js";import"./Tawarin.08057ae7.js";import"./ExclamationIcon.f551b679.js";import"./Container.e5a71b64.js";function S({errors:r,submit:s,data:n,result:o,result_all:l,setData:d,closeButton:m}){var u,p;const c=h=>d({...n,[h.target.id]:h.target.value});return a(w,{children:[e("div",{className:"px-4 py-5 bg-white sm:p-6",children:e("div",{className:"grid grid-cols-6 gap-6",children:a("div",{className:"col-span-6",children:[e("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Keterangan Revisi Dari Owner"}),e("div",{className:"mt-1",children:e("textarea",{readOnly:!0,value:(u=l.description)!=null?u:"Belum ada permintaan revisi",onChange:c,rows:3,className:"block w-full mt-1 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"Masukan Deskripsi Revisi"})})]})})}),l.jumlah_pengajuan_revisi>0&&e("div",{className:"px-4 py-5 bg-white sm:p-6",children:e("div",{className:"grid grid-cols-6 gap-6",children:a("div",{className:"col-span-6",children:[e("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Masukan Keterangan Revisi"}),e("div",{className:"mt-1",children:e("textarea",{id:"description",name:"description",value:(p=n.description)!=null?p:"",onChange:c,rows:3,className:"block w-full mt-1 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"Masukan Deskripsi Revisi"})}),r&&e("div",{className:"mt-1 text-pink-500",children:r.description})]})})}),l.jumlah_pengajuan_revisi>0&&e("div",{className:"px-4 py-5 space-y-6 bg-white sm:p-6",children:a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700",children:"Masukan Hasil Revisimu (Max 5)"}),e("div",{className:"flex justify-center px-6 pt-5 pb-6 mt-1 border-2 border-gray-300 border-dashed rounded-md",children:a("div",{className:"w-full text-center",children:[e("svg",{className:"w-12 h-12 mx-auto text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:e("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}),e($,{inputname:"document",allowMultiple:!0,maxFiles:"5"}),a("div",{className:"flex justify-center text-sm text-gray-600",children:[e("label",{htmlFor:"file-upload",className:"relative font-medium text-indigo-600 bg-white rounded-md hover:text-indigo-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-indigo-500",children:e("span",{children:"Upload a file"})}),e("p",{className:"pl-1",children:"or drag and drop"})]}),e("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF up to 10MB"})]})})]})}),a("div",{className:"px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[l.jumlah_pengajuan_revisi>0&&e(y,{children:s}),e(y,{color:"pink",type:"button",onClick:m,children:"Cancel"})]})]})}function z({setIsOpenAddDialog:r,result:s,result_all:n}){const{data:o,setData:l,post:d,reset:m,errors:c}=N({description:"",plan_result_id:""});return e("form",{onSubmit:h=>{h.preventDefault(),d(route("plan.simpanrevisionresult",s),{data:o,onSuccess:()=>{m(),r(!1)}})},children:e(S,{errors:c,data:o,result_all:n,setData:l,submit:"Simpan",closeButton:h=>r(!1)})})}function P({setIsOpenEditDialog:r,model:s}){const{data:n,setData:o,put:l,reset:d,errors:m}=N({description:s.description,plan_result_id:s.plan_result_id}),c=p=>r(!1),u=p=>{p.preventDefault(),l(route("users.update",s.id),{data:n,onSuccess:()=>{d(),r(!1)}})};return v.exports.useEffect(()=>{o({...n,description:s.description,plan_result_id:s.plan_result_id})},[s]),e("form",{onSubmit:u,children:e(S,{errors:m,data:n,setData:o,submit:"Update",closeButton:c})})}function U({plan:r,dataplan:s,plan_master:n,plan_details:o,plan_revisions:l,datarevisionresult:d,datadescriptionrevisionresult:m}){const[c,u]=v.exports.useState(!1),p=i=>{R(i),u(!0)},h=i=>{R(i),g(!0)},{data:M,setData:G,put:I,clearErrors:T,reset:F,errors:V}=N({}),B=i=>{i.preventDefault(),I(route("planresult.finish",t.result_id),{data:M,onSuccess:()=>{F(),D(!1)}})};v.exports.useState(!1);const[k,g]=v.exports.useState(!1),[_,j]=v.exports.useState(!1),[C,D]=v.exports.useState(!1),[t,R]=v.exports.useState([]);return a("div",{children:[e(A,{title:"Upload Hasil"}),e(E,{isOpenAddDialog:k,setIsOpenAddDialog:g,size:"2xl",title:"Revisi "+t.name,children:e(z,{isOpenAddDialog:k,setIsOpenAddDialog:g,result:t.revision_id,result_all:t})}),e(H,{isOpenEditDialog:_,setIsOpenEditDialog:j,size:"2xl",title:"Edit User",children:e(P,{model:t,isOpenEditDialog:_,setIsOpenEditDialog:j})}),e(L,{isOpenDestroyDialog:C,setIsOpenDestroyDialog:D,size:"2xl",title:"Tidak ada revisi untuk "+t.name+" ?",children:e(y,{onClick:B,children:"Selesai"})}),a(K,{isOpenInfoDialog:c,setIsOpenInfoDialog:u,size:"6xl",title:"Hasil Revisi Ke-"+t.jumlah_pengajuan_revisi+" dari "+t.name,header:"",children:[m[t.revision_id]?e("div",{className:"mt-1",children:e("textarea",{rows:3,className:"block w-full mt-1 border border-gray-300 rounded-md shadow-sm focus:ring-sky-500 focus:border-sky-500 sm:text-sm",placeholder:"",disabled:!0,defaultValue:m[t.revision_id]})}):"",d[t.revision_id]?e(w,{children:e("div",{className:"relative flex justify-center px-6 pt-5 pb-6 mt-1 overflow-hidden border-2 border-gray-300 border-dashed rounded-md",children:e("div",{className:"w-full text-center",children:d[t.revision_id].map((i,b)=>e("div",{className:" shadow overflow-hidden rounded-xl col-span-3 max-h-[14rem]",children:e("img",{className:"object-cover w-full h-full ",src:`/storage/${i.id}/${i.file_name}`,alt:b})},{state:t}))})})}):""]}),e("div",{className:"bg-white",children:e("div",{className:"grid items-start max-w-2xl grid-cols-1 px-4 py-4 mx-auto gap-y-8 gap-x-8 sm:px-6 sm:py-16 lg:max-w-7xl lg:grid-cols-2 lg:px-8",children:o.map((i,b)=>e(w,{children:s[i.slug]?e("div",{className:"mt-5 ",children:e("div",{className:"bg-white ",children:e("div",{children:e("div",{className:"mt-5 md:mt-0",children:e("div",{className:"shadow sm:rounded-md sm:overflow-hidden",children:e("div",{className:"px-4 py-5 space-y-6 bg-white sm:p-6",children:a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700",children:i.name}),e("div",{className:"py-3 sm:flex sm:flex-row-reverse",children:e("button",{onClick:()=>p(i),type:"submit",className:"inline-flex items-center justify-center w-full px-4 py-2 text-sm font-medium text-pink-900 transition duration-150 ease-in-out bg-pink-100 border border-transparent rounded-md hover:bg-pink-200 active:bg-pink-300 sm:ml-3 sm:w-auto sm:text-sm",tabIndex:0,children:"Lihat Revisiiiiii"})}),a("div",{className:"relative flex justify-center px-6 pt-5 pb-6 mt-1 overflow-hidden border-2 border-gray-300 border-dashed rounded-md",children:[i.is_finish==1&&e("div",{className:"absolute top-0 right-0 w-16 h-16",children:e("div",{className:"absolute right-[-44px] top-[22px] w-[170px] transform rotate-45 bg-sky-100 text-center text-sky-900 font-semibold py-1",children:"Selesai"})}),a("div",{className:"w-full text-center",children:[s[i.slug].map((f,x)=>x<2&&e("div",{className:" shadow overflow-hidden rounded-xl col-span-3 max-h-[14rem]",children:e("img",{className:"object-cover w-full h-full ",src:`/storage/${f.id}/${f.file_name}`,alt:x})},f.id)),s[i.slug].map((f,x)=>x>1&&x<6&&e("div",{className:"shadow overflow-hidden rounded-xl col-span-2 max-h-[10rem]",children:e("img",{className:"object-cover w-full h-full ",src:`/storage/${f.id}/${f.file_name}`,alt:x})},f.id))]})]}),e("div",{className:"mt-1",children:e("textarea",{rows:3,className:"block w-full mt-1 border border-gray-300 rounded-md shadow-sm focus:ring-sky-500 focus:border-sky-500 sm:text-sm",placeholder:"",disabled:!0,defaultValue:"Ini adalah hasil "+i.name+" dari konsultan"})}),i.is_finish==1&&i.jumlah_pengajuan_revisi==0?e("div",{className:"py-3 sm:flex sm:flex-row-reverse",children:e("button",{type:"button",className:"inline-flex items-center justify-center w-full px-4 py-2 text-sm font-medium transition duration-150 ease-in-out border border-transparent rounded-md text-sky-900 bg-sky-100 hover:bg-sky-200 active:bg-sky-300 sm:ml-3 sm:w-auto sm:text-sm",children:"Tidak Ada Revisi"})}):"",i.is_finish==1&&i.jumlah_pengajuan_revisi>0?e("div",{className:"py-3 sm:flex sm:flex-row-reverse",children:e("button",{type:"button",className:"inline-flex items-center justify-center w-full px-4 py-2 text-sm font-medium transition duration-150 ease-in-out border border-transparent rounded-md text-sky-900 bg-sky-100 hover:bg-sky-200 active:bg-sky-300 sm:ml-3 sm:w-auto sm:text-sm",children:"Revisi Selesai"})}):"",i.is_finish==0&&i.jumlah_pengajuan_revisi>=i.jumlah_revisi?e("div",{className:"py-3 sm:flex sm:flex-row-reverse",children:a("button",{type:"button",className:"inline-flex items-center justify-center w-full px-4 py-2 text-sm font-medium transition duration-150 ease-in-out border border-transparent rounded-md text-sky-900 bg-sky-100 hover:bg-sky-200 active:bg-sky-300 sm:ml-3 sm:w-auto sm:text-sm",children:["Pengajuan Revisi Sudah"," ",i.jumlah_pengajuan_revisi," ","Kali"]})}):"",i.is_finish==0&&i.jumlah_pengajuan_revisi<i.jumlah_revisi?e("div",{className:"py-3 sm:flex sm:flex-row-reverse",children:a("button",{onClick:()=>h(i),type:"submit",className:"inline-flex items-center justify-center w-full px-4 py-2 text-sm font-medium text-pink-900 transition duration-150 ease-in-out bg-pink-100 border border-transparent rounded-md hover:bg-pink-200 active:bg-pink-300 sm:ml-3 sm:w-auto sm:text-sm",tabIndex:0,children:["Lihat Permintaan Ke-",i.jumlah_pengajuan_revisi]})}):""]})})})})})})},b):""}))})})]})}U.layout=r=>e(O,{children:r});export{U as default};
